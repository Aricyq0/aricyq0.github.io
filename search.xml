<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Stanford cs193p 01 | è¯¾ç¨‹ç®€ä»‹åŠSwiftUIå…¥é—¨</title>
    <url>/2024/11/21/Stanford-cs193p-01%EF%BD%9C%E8%AF%BE%E7%A8%8B%E7%AE%80%E4%BB%8B%E5%8F%8ASwiftUI%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<p>æœ¬æ–‡æ˜¯æ–¯å¦ç¦å¤§å­¦ cs193p å…¬å¼€è¯¾ç¨‹ç¬¬ 01 é›†çš„ç›¸å…³ç¬”è®°ã€‚</p>
<span id="more"></span>

<blockquote>
<p>æœ¬æ–‡ä¸»è¦å†…å®¹è½¬è½½äºï¼š<a href="https://nwdan.com/my-learning/stanford-cs193p-1.html">é—»è€…é€šè¾¾çš„ä¸ªäººåšå®¢</a></p>
</blockquote>
<h2 id="0-è¯¾ç¨‹ä»‹ç»"><a href="#0-è¯¾ç¨‹ä»‹ç»" class="headerlink" title="0. è¯¾ç¨‹ä»‹ç»"></a>0. è¯¾ç¨‹ä»‹ç»</h2><blockquote>
<p>The lectures for the Spring 2023 version of Stanford Universityâ€™s course CS193p (Developing Applications for iOS using SwiftUI) were given in person but, unfortunately, were not video recorded. However, we did capture the laptop screen of the presentations and demos as well as the associated audio. You can watch these screen captures using the links below. Youâ€™ll also find links to supporting material that was distributed to students during the quarter (homework, demo code, etc.).</p>
</blockquote>
<ul>
<li><strong>è¯¾ç¨‹ç½‘å€</strong>ï¼š<a href="https://cs193p.sites.stanford.edu/2023">https://cs193p.sites.stanford.edu/2023</a></li>
<li><strong>swift è¯´æ˜æ–‡æ¡£</strong>ï¼š<a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/">è‹±æ–‡ç‰ˆ</a> ï½œ <a href="https://swift.bootcss.com/">ä¸­æ–‡ç‰ˆ</a></li>
</ul>
<h3 id="è¯¾ç¨‹è¦æ±‚-ğŸ“"><a href="#è¯¾ç¨‹è¦æ±‚-ğŸ“" class="headerlink" title="è¯¾ç¨‹è¦æ±‚ ğŸ“"></a>è¯¾ç¨‹è¦æ±‚ ğŸ“</h3><ul>
<li>å»ºè®®ï¼šå…·å¤‡ç¼–ç¨‹ç»éªŒï¼Œç†Ÿæ‚‰å¤šç§ç¼–ç¨‹è¯­è¨€</li>
<li>å¤‡æ³¨ï¼šä¸å…·å¤‡ç¼–ç¨‹ç»éªŒå­¦ä¹ å…·æœ‰æŒ‘æˆ˜</li>
</ul>
<h3 id="å­¦ä¹ å†…å®¹-ğŸ–¥ï¸"><a href="#å­¦ä¹ å†…å®¹-ğŸ–¥ï¸" class="headerlink" title="å­¦ä¹ å†…å®¹ ğŸ–¥ï¸"></a>å­¦ä¹ å†…å®¹ ğŸ–¥ï¸</h3><ul>
<li>ä½¿ç”¨ Xcode å¯¼èˆª</li>
<li>ç†è§£ SwiftUI ä¸åŠŸèƒ½æ€§ç¼–ç¨‹çš„ç»“æ„</li>
</ul>
<h3 id="ä¸»è¦é¡¹ç›®-ğŸ“š"><a href="#ä¸»è¦é¡¹ç›®-ğŸ“š" class="headerlink" title="ä¸»è¦é¡¹ç›® ğŸ“š"></a>ä¸»è¦é¡¹ç›® ğŸ“š</h3><ul>
<li>åˆ›å»ºå¡ç‰Œæ¸¸æˆåº”ç”¨ Memorize</li>
<li>åŠ¨ç”»ä¸ç”¨æˆ·ç•Œé¢è®¾è®¡</li>
</ul>
<hr>
<h2 id="1-SwiftUI-è§†å›¾æ„å»ºå’Œä»£ç ç»“æ„"><a href="#1-SwiftUI-è§†å›¾æ„å»ºå’Œä»£ç ç»“æ„" class="headerlink" title="1. SwiftUI è§†å›¾æ„å»ºå’Œä»£ç ç»“æ„"></a>1. SwiftUI è§†å›¾æ„å»ºå’Œä»£ç ç»“æ„</h2><h3 id="1-1-é¡¹ç›®å‡†å¤‡å·¥ä½œ"><a href="#1-1-é¡¹ç›®å‡†å¤‡å·¥ä½œ" class="headerlink" title="1.1 é¡¹ç›®å‡†å¤‡å·¥ä½œ"></a>1.1 é¡¹ç›®å‡†å¤‡å·¥ä½œ</h3><p>ç†Ÿæ‚‰ Xcode çš„å®‰è£…ä¸ä½¿ç”¨ã€‚æ–°å»ºé¡¹ç›®åŠæ–‡ä»¶ï¼Œå„ç±»æ–‡ä»¶çš„ä½œç”¨ä¸åŒºåˆ«ã€‚</p>
<ol>
<li>æ–°å»ºé¡¹ç›®ï¼šå¯¹äºé¡¹ç›®åå­—ã€ç»„ç»‡ä¸è¯†åˆ« ID çš„è¯´æ˜ã€‚</li>
<li>é…ç½®é¡¹ç›®å±æ€§ï¼šè®¾ç½®é¡¹ç›®è¿è¡Œçš„å¹³å°æœ‰å“ªäº›ã€‚</li>
<li>æ–°å»ºé¡¹ç›®æ—¶ç”Ÿæˆçš„å„æ–‡ä»¶ä»‹ç»ã€‚</li>
<li>é¢„è§ˆä»£ç åŠä»£ç å±æ€§ä¿®æ”¹å™¨çš„ä»‹ç»å’Œå…¶å®ƒä½¿ç”¨å°æŠ€å·§ç­‰ã€‚</li>
</ol>
<h3 id="1-2-å®ä¾‹æ¼”ç»ƒ"><a href="#1-2-å®ä¾‹æ¼”ç»ƒ" class="headerlink" title="1.2 å®ä¾‹æ¼”ç»ƒ"></a>1.2 å®ä¾‹æ¼”ç»ƒ</h3><p>å®Œæ•´çš„ â€œHello worldâ€ ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">        	<span class="type">Image</span>(systemName:<span class="string">&quot;globe&quot;</span>)</span><br><span class="line">        		.imageScale(.large)</span><br><span class="line">        		.foregroundStyle(.tint)</span><br><span class="line">        	<span class="type">Text</span>(<span class="string">&quot;Hello, world!&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .padding()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥ï¼Œå°†æŒ‰ç…§ç”±ä¸Šè‡³ä¸‹ï¼Œç”±å¤–è‡³å†…çš„æ–¹å¼å¯¹è¿™ä¸€æ®µä»£ç è¿›è¡Œè§£é‡Šã€‚</p>
<h4 id="1-2-1-struct-å’Œ-View"><a href="#1-2-1-struct-å’Œ-View" class="headerlink" title="1.2.1 struct å’Œ View"></a>1.2.1 <code>struct</code> å’Œ <code>View</code></h4><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºä¸€ä¸ª ContentView ç»“æ„ä½“ï¼Œå¹¶ç¬¦åˆ View åè®®</span></span><br><span class="line">    <span class="comment">//è¯¥ç»“æ„ä½“ç¬¦åˆ View åè®®æ„å‘³ç€ï¼šéœ€è¦æä¾›ä¸€ä¸ªå˜é‡ body</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="comment">//some Viewçš„æ„æ€æ˜¯è¿”å›è¡Œä¸ºä¸Viewç›¸ä¼¼çš„å…ƒç´ </span></span><br><span class="line">        <span class="operator">...</span></span><br><span class="line">        <span class="operator">...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>struct</code> ç»“æ„ä½“ï¼Œå®ƒæ˜¯ swiftUI çš„æ ¸å¿ƒã€‚Swift ä¸æ˜¯é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ (Objective-oriented programming)ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹ (Functional programming)ã€‚</li>
<li><code>ContentView</code> æ˜¯ç»“æ„ä½“çš„åç§°ï¼Œ<code>struct ContentView: View</code> æ„å‘³ç€ <code>ContentView</code> ç»“æ„ä½“åƒä¸€ä¸ª <code>View</code>ã€‚</li>
<li><code>View</code> å’Œ <code>some View</code> åŒºåˆ†ï¼šæ­¤å¤„çš„ View æ˜¯ä¸€ä¸ªåè®®ï¼ˆprotocolï¼‰ã€‚</li>
</ul>
<h4 id="1-2-2-var"><a href="#1-2-2-var" class="headerlink" title="1.2.2 var"></a>1.2.2 <code>var</code></h4><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="comment">//some Viewçš„æ„æ€æ˜¯è¿”å›è¡Œä¸ºä¸Viewç›¸ä¼¼çš„å…ƒç´ </span></span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>var</code>æ˜¯ä¸€ä¸ªå˜é‡çš„å…³é”®å­—ï¼Œbody æ˜¯å˜é‡åã€‚å…¶ä»–å˜é‡å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</li>
</ul>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> i: <span class="type">Int</span></span><br><span class="line"><span class="keyword">var</span> s: <span class="type">String</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>Int</code> <code>String</code> æ˜¯ <code>struct</code> ç»“æ„ä½“</li>
<li><code>some View</code> æ˜¯æŸç§ç±»å‹çš„ <code>View</code>ï¼Œåªè¦æ˜¯ä¸€ä¸ª <code>View</code> å³å¯ï¼Œæ¯”å¦‚ <code>Text</code>ã€<code>Image</code>ã€<code>VStack</code> ã€<code>HStack</code> ç­‰ã€‚</li>
</ul>
<h4 id="1-2-3-è®¡ç®—å±æ€§-Computed-Property"><a href="#1-2-3-è®¡ç®—å±æ€§-Computed-Property" class="headerlink" title="1.2.3 è®¡ç®—å±æ€§ Computed Property"></a>1.2.3 è®¡ç®—å±æ€§ <code>Computed Property</code></h4><p>ä¸Šè¾¹æˆ‘ä»¬è§£é‡Šäº† <code>var body: some View</code>ï¼Œæ¥ä¸‹æ¥çœ‹ <code>body</code> ä¸­çš„å†…å®¹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">	<span class="type">VStack</span> &#123;</span><br><span class="line">		<span class="type">Image</span>(systemName: <span class="string">&quot;globe&quot;</span>)</span><br><span class="line">			.imageScale(.large)</span><br><span class="line">			.foregroundStyle(.tint)</span><br><span class="line">		<span class="type">Text</span>(<span class="string">&quot;Hello, world!&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	.padding()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>var body</code> æ˜¯ä¸€ä¸ªå±æ€§ï¼Œ<code>body</code> å˜é‡çš„å€¼ä¸ä¼šå­˜å‚¨åœ¨æŸä¸ªåœ°æ–¹ï¼Œè€Œæ˜¯åœ¨æ¯æ¬¡ç¨‹åºè¿è¡Œæ—¶éƒ½ä¼šè®¡ç®—ä¸€æ¬¡ã€‚åœ¨ â€œHello Worldâ€ ä»£ç ä¸­ï¼Œå®ƒè®¡ç®—çš„æ˜¯å¦‚ä¸‹éƒ¨åˆ†ï¼š</li>
</ul>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">VStack</span> &#123;</span><br><span class="line">	<span class="type">Image</span>(systemName: <span class="string">&quot;globe&quot;</span>)</span><br><span class="line">		.imageScale(.large)</span><br><span class="line">		.foregroundStyle(.tint)</span><br><span class="line">	<span class="type">Text</span>(<span class="string">&quot;Hello, world!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">.padding()</span><br></pre></td></tr></table></figure>

<h4 id="1-2-4-è§†å›¾ç»“æ„-VStack"><a href="#1-2-4-è§†å›¾ç»“æ„-VStack" class="headerlink" title="1.2.4 è§†å›¾ç»“æ„ VStack"></a>1.2.4 è§†å›¾ç»“æ„ <code>VStack</code></h4><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">VStack</span> &#123;</span><br><span class="line">	<span class="type">Image</span>(systemName: <span class="string">&quot;globe&quot;</span>)</span><br><span class="line">		.imageScale(.large)</span><br><span class="line">		.foregroundStyle(.tint)</span><br><span class="line">	<span class="type">Text</span>(<span class="string">&quot;Hello, world!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>ç»“æ„ä½“å®ä¾‹</strong> (Instance of structs)ï¼šVStack æ˜¯ä¸€ä¸ª SwiftUI ä¸­çš„ç»“æ„ä½“ï¼Œç”¨äºå‚ç›´å †å å’Œæ’åˆ—å¤šä¸ªå­è§†å›¾ï¼Œä¾‹å¦‚ <code>Image</code> å’Œ <code>Text</code>ã€‚</li>
<li><strong>å‘½åå‚æ•°</strong> (named parameters)ï¼š<code>VStack</code> å¯ä»¥æ¥å—ä¸åŒçš„å‚æ•°ï¼Œé»˜è®¤çš„ <code>alignment</code> æ˜¯ <code>.center</code>ï¼Œ<code>spacing</code> æ˜¯ 0ï¼Œè¡¨ç¤ºæ‰€æœ‰å­è§†å›¾å±…ä¸­å¯¹é½ï¼Œä¸”å‚ç›´é—´è·ä¸º 0ã€‚</li>
<li><strong>å‚æ•°é»˜è®¤å€¼</strong> (Parameter Defaults)ï¼š<code>VStack</code> å…è®¸æŒ‡å®š <code>alignment</code> å’Œ <code>spacing</code>ï¼Œä½†å®ƒä»¬æœ‰é»˜è®¤å€¼ï¼Œä¸æŒ‡å®šæ—¶ä¼šä½¿ç”¨é»˜è®¤è®¾ç½®ã€‚</li>
</ul>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">VStack</span>(alignment: .leading, spacing: <span class="number">20</span>) &#123;</span><br><span class="line">    <span class="type">Image</span>(systemName: <span class="string">&quot;globe&quot;</span>)</span><br><span class="line">        .imageScale(.large)</span><br><span class="line">        .foregroundStyle(.tint)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello, world!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>å†…å®¹å‚æ•°</strong><code>content</code>ï¼š<code>VStack</code> å®é™…ä¸Šå¯ä»¥ç”¨ <code>content</code> å‚æ•°æ¥åŒ…è£¹å†…å®¹ï¼ŒSwiftUI å…è®¸çœç•¥ <code>content:</code> ä»¥ç®€åŒ–è¯­æ³•ã€‚</li>
</ul>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">VStack</span>(content: &#123;</span><br><span class="line">    <span class="type">Image</span>(systemName: <span class="string">&quot;globe&quot;</span>)</span><br><span class="line">        .imageScale(.large)</span><br><span class="line">        .foregroundStyle(.tint)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello, world!&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>@ViewBuilder</strong>ï¼š<code>VStack</code> ä½¿ç”¨ <code>@ViewBuilder</code> å±æ€§åŒ…è£…å™¨å°†å¤šä¸ªå­è§†å›¾ï¼ˆå¦‚ <code>Image</code> å’Œ <code>Text</code>ï¼‰è½¬æ¢ä¸º <code>TupleView</code>ã€‚è¿™æ„å‘³ç€ <code>VStack</code> å¯ä»¥ç»„åˆå¤šä¸ªè§†å›¾ï¼Œè€Œ SwiftUI ä¼šè‡ªåŠ¨å¤„ç†å’Œæ¸²æŸ“å®ƒä»¬ã€‚</li>
</ul>
<h4 id="1-2-5-View-Modifier"><a href="#1-2-5-View-Modifier" class="headerlink" title="1.2.5 View Modifier"></a>1.2.5 View Modifier</h4><p><strong>View Modifier</strong> æ˜¯ä¸€ç§ç”¨äºä¿®æ”¹è§†å›¾å¤–è§‚æˆ–è¡Œä¸ºçš„è½»é‡æ–¹æ³•ã€‚é€šè¿‡åœ¨è§†å›¾åé“¾å¼è°ƒç”¨æ¥è®¾ç½®å±æ€§å’Œæ ·å¼ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">Image</span>(systemName: <span class="string">&quot;globe&quot;</span>)</span><br><span class="line">	 .imageScale(.large)</span><br><span class="line">	 .foregroundStyle(.tint)</span><br></pre></td></tr></table></figure>

<ul>
<li>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œ<code>.imageScale(.large)</code> å’Œ <code>.foregroundStyle(.tint)</code> å°±æ˜¯ <strong>View Modifier</strong></li>
<li>æ”¯æŒé“¾å¼è°ƒç”¨ï¼Œå¯æ·»åŠ å¤šä¸ªæ ·å¼ä¿®æ”¹</li>
</ul>
<h4 id="1-2-6-View-Modifier-ä½œç”¨åŸŸ"><a href="#1-2-6-View-Modifier-ä½œç”¨åŸŸ" class="headerlink" title="1.2.6 View Modifier ä½œç”¨åŸŸ"></a>1.2.6 View Modifier ä½œç”¨åŸŸ</h4><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">VStack</span> &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Outer Text&quot;</span>)</span><br><span class="line">        .foregroundColor(.red)  <span class="comment">// ä»…åº”ç”¨åˆ°æ­¤ Text</span></span><br><span class="line"></span><br><span class="line">    <span class="type">HStack</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Inner Text 1&quot;</span>)</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Inner Text 2&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .foregroundColor(.blue)  <span class="comment">// åº”ç”¨äº HStack å†…çš„æ‰€æœ‰å­è§†å›¾</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>ä½œç”¨äºå®¹å™¨è§†å›¾çš„ Modifier å½±å“å…¶æ‰€æœ‰å­è§†å›¾</strong>ï¼šä¸Šè¿°ä»£ç ä¸­çš„ <code>.foregroundColor(.blue)</code> åº”ç”¨äº <code>HStack</code> çš„æ‰€æœ‰å­è§†å›¾ <code>Text</code>ã€‚</li>
<li><strong>å¹¶åˆ—å±‚çº§çš„è§†å›¾çš„ Modifier äº’ä¸å½±å“</strong>ï¼šåœ¨æ­¤ä¾‹ä¸­ï¼Œ<code>.foregroundColor(.blue)</code> åº”ç”¨äº <code>HStack</code>ï¼Œä»…å½±å“ <code>HStack</code> ä¸­çš„ <code>Text</code> è§†å›¾ï¼Œå¤–å±‚çš„ <code>Text(&quot;Outer Text&quot;)</code> è§†å›¾ä¸å—å½±å“ã€‚</li>
</ul>
<h3 id="1-3-æœ¬èŠ‚å®Œæ•´ä»£ç "><a href="#1-3-æœ¬èŠ‚å®Œæ•´ä»£ç " class="headerlink" title="1.3 æœ¬èŠ‚å®Œæ•´ä»£ç "></a>1.3 æœ¬èŠ‚å®Œæ•´ä»£ç </h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">HStack</span> &#123;</span><br><span class="line">            <span class="type">CardView</span>(isFaceUp: <span class="literal">true</span>)</span><br><span class="line">            <span class="type">CardView</span>()</span><br><span class="line">            <span class="type">CardView</span>()</span><br><span class="line">            <span class="type">CardView</span>()</span><br><span class="line">        &#125;</span><br><span class="line">        .foregroundColor(.orange)</span><br><span class="line">        .padding()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> isFaceUp: <span class="type">Bool</span> <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span>(content: &#123;</span><br><span class="line">            <span class="keyword">if</span> isFaceUp &#123;</span><br><span class="line">                <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">12</span>)</span><br><span class="line">                    .foregroundColor(.white)</span><br><span class="line">                <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">12</span>)</span><br><span class="line">                    .strokeBorder(lineWidth: <span class="number">2</span>)</span><br><span class="line">                <span class="type">Text</span>(<span class="string">&quot;ğŸ‘»&quot;</span>).font(.largeTitle)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">12</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#<span class="type">Preview</span> &#123;</span><br><span class="line">    <span class="type">ContentView</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-4-åç»­é¢„ä¹ "><a href="#1-4-åç»­é¢„ä¹ " class="headerlink" title="1.4 åç»­é¢„ä¹ "></a>1.4 åç»­é¢„ä¹ </h3><ul>
<li><strong>ç½‘æ ¼å¸ƒå±€è¿‡æ¸¡</strong></li>
<li><strong>æ¸¸æˆé€»è¾‘çš„æ•´åˆ</strong></li>
</ul>
]]></content>
      <categories>
        <category>code</category>
        <category>swift</category>
      </categories>
      <tags>
        <tag>cs193p</tag>
      </tags>
  </entry>
  <entry>
    <title>Stanford cs193p 02 | More SwiftUI</title>
    <url>/2024/11/21/Stanford-cs193p-02%EF%BD%9CMore-SwiftUI/</url>
    <content><![CDATA[<p>æœ¬æ–‡æ˜¯æ–¯å¦ç¦å¤§å­¦ cs193p å…¬å¼€è¯¾ç¨‹ç¬¬ 02 é›†çš„ç›¸å…³ç¬”è®°ã€‚</p>
<span id="more"></span>

<blockquote>
<p>æœ¬æ–‡ä¸»è¦å†…å®¹è½¬è½½äºï¼š<a href="https://nwdan.com/my-learning/stanford-cs193p-2.html">é—»è€…é€šè¾¾çš„ä¸ªäººåšå®¢</a></p>
</blockquote>
<p>cs193p è¯¾ç¨‹ä»‹ç»:</p>
<blockquote>
<p>The lectures for the Spring 2023 version of Stanford Universityâ€™s course CS193p (Developing Applications for iOS using SwiftUI) were given in person but, unfortunately, were not video recorded. However, we did capture the laptop screen of the presentations and demos as well as the associated audio. You can watch these screen captures using the links below. Youâ€™ll also find links to supporting material that was distributed to students during the quarter (homework, demo code, etc.).</p>
</blockquote>
<p>cs193p è¯¾ç¨‹ç½‘å€: <a href="https://cs193p.sites.stanford.edu/2023">https://cs193p.sites.stanford.edu/2023</a></p>
<p>ç»§ç»­ä¸Šä¸€èŠ‚è®°å¿†å¡ç‰‡çš„æ¸¸æˆåˆ¶ä½œï¼Œç¬”è®°æŒ‰ç…§è¯¾ç¨‹é¡¹ç›®åˆ¶ä½œæ­¥éª¤è¿›è¡Œæ•´ç†ï¼Œåœ¨æ¯ä¸ªæ­¥éª¤ä¾æ¬¡å¯¹æ¶‰åŠçš„è¯­æ³•ç³–è¿›è¡Œè¯´æ˜ã€‚å»ºè®®åœ¨çœ‹ç¬¬äºŒèŠ‚è§†é¢‘å‰é¢„è§ˆä¸€éï¼Œäº†è§£æ•™ç¨‹æ¡†æ¶ï¼Œä¾¿äºé’ˆå¯¹æ€§çš„å­¦ä¹ ã€‚</p>
<p>è¯¥ç¬”è®°åŸºäº <a href="https://nwdan.com/my-learning/stanford-cs193p-2.html">https://nwdan.com/my-learning/stanford-cs193p-2.html</a> åšäº†é€‚å½“ä¿®æ”¹ï¼Œæ·»åŠ äº†å¯¹äºé¡¹ç›®åˆ¶ä½œæµç¨‹æ¢³ç†ï¼Œå¹¶åœ¨ <code>some View</code>ã€<code>@State</code>ã€<code>LazyVGrid</code> ç­‰å°èŠ‚å¢åŠ äº†éƒ¨åˆ†è¯´æ˜ã€‚ï¼ˆpsï¼šç¬”è®°éåŸåˆ›ï¼ŒåŸåšä¸»çš„ç¬”è®°éå¸¸ç®€æ´æ¸…æ™°ï¼Œæ¨èé˜…è¯»ã€‚ï¼‰</p>
<h2 id="1-åˆ›å»ºä¸€ä¸ª-CardView-struct"><a href="#1-åˆ›å»ºä¸€ä¸ª-CardView-struct" class="headerlink" title="1. åˆ›å»ºä¸€ä¸ª CardView struct"></a>1. åˆ›å»ºä¸€ä¸ª CardView struct</h2><h3 id="1-1-some-View"><a href="#1-1-some-View" class="headerlink" title="1.1 some View"></a>1.1 some View</h3><p>è¯·çœ‹ä¸€æ®µæ¼”ç¤ºä»£ç ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ®µæ¼”ç¤ºä»£ç åŒæ ·å¯ä»¥è¿™æ ·å†™ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="type">Text</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬æ”¾ä¸€äº›è¿”å›å€¼ä¸ä¸º <code>Text</code> çš„ç»“æ„ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ (Cannot convert return expression of type <code>&#39;VStack&lt;TupleView&lt;(Text, Text, Text)&gt;&gt;&#39;</code> to return type <code>&#39;Text&#39;</code>)ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="type">Text</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŒæ ·ï¼Œå¦‚æœæˆ‘ä»¬æ”¾å…¥å¤šä¸ª <code>Text</code> çš„ç»“æ„ï¼Œç¼–è¯‘å™¨ä»ç„¶ä¼šæŠ¥é”™ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="type">Text</span> &#123;</span><br><span class="line">		<span class="type">Text</span>(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">		<span class="type">Text</span>(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ <code>some View</code> å¯ä»¥è®©ç¼–è¯‘å™¨è‡ªåŠ¨è¯†åˆ«ä¸åŒçš„è¿”å›ç±»å‹ã€‚</p>
<h3 id="1-2-å°¾éšé—­åŒ…-Trailing-closure-syntax"><a href="#1-2-å°¾éšé—­åŒ…-Trailing-closure-syntax" class="headerlink" title="1.2 å°¾éšé—­åŒ… (Trailing closure syntax)"></a>1.2 å°¾éšé—­åŒ… (Trailing closure syntax)</h3><p>æˆ‘ä»¬å¦‚æœä»”ç»†çœ‹çœ‹ <code>VStack</code>, æˆ‘ä»¬ä¼ å…¥äº†ä¸€ä¸ªåä¸º<code>content</code>çš„å‚æ•°ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> isFaceUp: <span class="type">Bool</span> <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span>(alignment: .top, content: &#123;</span><br><span class="line">            <span class="comment">// ZStack Code</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸€ä¸ªå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å°¾éšé—­åŒ…ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> isFaceUp: <span class="type">Bool</span> <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span>(alignment: .top) &#123;</span><br><span class="line">            <span class="comment">// ZStack Code</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-3-RoundedRectangle"><a href="#1-3-RoundedRectangle" class="headerlink" title="1.3 RoundedRectangle"></a>1.3 RoundedRectangle</h3><p>å½“æˆ‘ä»¬ä½¿ç”¨ RoundedRectangle æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ä¸æŒ‡å®šå…·ä½“çš„ä¿®æ”¹å™¨ï¼ŒSwift ä¼šé»˜è®¤å¡«å……ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">12</span>)</span><br><span class="line"><span class="comment">// These two codes are identical in terms of functionality.</span></span><br><span class="line"><span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">12</span>).fill()</span><br></pre></td></tr></table></figure>

<h3 id="1-4-å±€éƒ¨å˜é‡-Local-Variable"><a href="#1-4-å±€éƒ¨å˜é‡-Local-Variable" class="headerlink" title="1.4 å±€éƒ¨å˜é‡ (Local Variable)"></a>1.4 å±€éƒ¨å˜é‡ (Local Variable)</h3><p>æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå±€éƒ¨å˜é‡:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> isFaceUp: <span class="type">Bool</span> <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> isFaceUp &#123;</span><br><span class="line">                <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">12</span>).fill(.white)</span><br><span class="line">                <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">12</span>).strokeBorder(lineWidth: <span class="number">2</span>)</span><br><span class="line">                <span class="type">Text</span>(<span class="string">&quot;ğŸ‘»&quot;</span>).font(.largeTitle)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">12</span>).fill()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºäº†ä¸€ä¸ªå±€éƒ¨å˜é‡åä¸º <code>base</code>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> isFaceUp: <span class="type">Bool</span> <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> base: <span class="type">RoundedRectangle</span> <span class="operator">=</span> <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">12</span>)</span><br><span class="line">            <span class="keyword">if</span> isFaceUp &#123;</span><br><span class="line">                base.fill(.white)</span><br><span class="line">                base.strokeBorder(lineWidth: <span class="number">2</span>)</span><br><span class="line">                <span class="type">Text</span>(<span class="string">&quot;ğŸ‘»&quot;</span>).font(.largeTitle)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                base.fill()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>IMPORTANT:</strong> æˆ‘ä»¬ä½¿ç”¨äº†å…³é”®å­— <code>let</code> è€Œä¸æ˜¯ <code>var</code>ï¼Œå› ä¸ºè¿™ä¸ªå˜é‡ä¸€æ—¦åˆ›å»ºå°±ä¸å†èƒ½è¢«æ”¹å˜ã€‚(<code>let</code> é€šå¸¸ç”¨æ¥åˆ›å»ºå¸¸é‡)</p>
<h3 id="1-5-ç±»å‹æ¨æ–­-Type-Inference"><a href="#1-5-ç±»å‹æ¨æ–­-Type-Inference" class="headerlink" title="1.5 ç±»å‹æ¨æ–­ (Type Inference)"></a>1.5 ç±»å‹æ¨æ–­ (Type Inference)</h3><p>æˆ‘ä»¬å¯ä»¥çœç•¥å˜é‡ç±»å‹è®© Swift è‡ªåŠ¨åˆ¤å®šã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Without omit the type</span></span><br><span class="line"><span class="keyword">let</span> base: <span class="type">RoundedRectangle</span> <span class="operator">=</span> <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">12</span>)</span><br><span class="line"><span class="comment">// Omited the type (using type inference)</span></span><br><span class="line"><span class="keyword">let</span> base <span class="operator">=</span> <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">12</span>)</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥æŒ‰ä½ <code>option</code> é”®ç„¶åç‚¹å‡» <code>base</code> å˜é‡ï¼ŒSwift ä¼šæ˜¾ç¤ºè‡ªåŠ¨åˆ¤å®šçš„å˜é‡ç±»å‹ã€‚</p>
<p><img src="/2024/11/21/Stanford-cs193p-02%EF%BD%9CMore-SwiftUI/cs193p02_option.png"></p>
<blockquote>
<p>Note: æˆ‘ä»¬åœ¨ç”Ÿäº§ç¯å¢ƒå‡ ä¹éƒ½ä½¿ç”¨ç±»å‹æ¨æ–­ï¼Œä¸æ‰‹åŠ¨æŒ‡å®šå˜é‡ç±»å‹ã€‚å¦‚æœéœ€è¦å¯¹è¿”å›çš„ç±»å‹è¿›è¡Œæ£€æŸ¥ï¼Œåˆ™å¯æŒ‡å®šå˜é‡ç±»å‹ã€‚</p>
</blockquote>
<h3 id="1-6-onTapGesture"><a href="#1-6-onTapGesture" class="headerlink" title="1.6 .onTapGesture"></a>1.6 <code>.onTapGesture</code></h3><p>å•å‡»:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">var</span> isFaceUp <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="comment">// ZStack Code</span></span><br><span class="line">        &#125;</span><br><span class="line">        .onTapGesture &#123;</span><br><span class="line">            isFaceUp.toggle()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>å°¾éšé—­åŒ…</strong>ï¼šå•å‡»çš„æ–¹æ³•ä¸º <code>.onTapGesture(perform:&#123;&#125;)</code> ï¼Œæ­¤å¤„ç”±äºæœ€åä¸€ä¸ªå‚æ•°æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥ä½¿ç”¨å°¾éšé—­åŒ… <code>.onTapGesture &#123; isFaceUp.toggle() &#125;</code></li>
</ul>
<p>åŒå‡»:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">var</span> isFaceUp <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="comment">// ZStack Code</span></span><br><span class="line">        &#125;</span><br><span class="line">        .onTapGesture(count: <span class="number">2</span>) &#123;</span><br><span class="line">            isFaceUp.toggle()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-7-State"><a href="#1-7-State" class="headerlink" title="1.7 @State"></a>1.7 <code>@State</code></h3><p>è¿™ä¸€æ®µä»£ç ä¼šæŠ¥é”™ <code>Error: Cannot assign to property: &#39;self&#39; is immutable</code>ã€‚å› ä¸ºç»“æ„ä½“çš„å±æ€§é»˜è®¤æ˜¯ä¸å¯å˜çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ç»“æ„ä½“çš„å®ä¾‹æ–¹æ³•æˆ–é—­åŒ…ä¸­ä¸èƒ½ç›´æ¥ä¿®æ”¹å®ƒçš„å±æ€§ï¼Œé™¤éæ˜ç¡®æ ‡è®°ä¸º <code>mutating</code>ã€‚å› æ­¤ï¼Œå½“ä½ åœ¨ struct ä¸­ä½¿ç”¨ä¸€ä¸ªå±æ€§ï¼ˆæ¯”å¦‚ isFaceUpï¼‰ï¼Œå®ƒé»˜è®¤æ˜¯ä¸å¯å˜çš„ï¼Œåœ¨ .onTapGesture ä¸­è¯•å›¾ä¿®æ”¹ isFaceUp åˆ™ä¼šå¯¼è‡´è¿™ä¸ªé”™è¯¯ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> isFaceUp <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="comment">// ZStack Code</span></span><br><span class="line">        &#125;</span><br><span class="line">        .onTapGesture &#123;</span><br><span class="line">        	isFaceUp <span class="operator">=</span> <span class="operator">!</span>isFaceUp</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šå¸¸æ¥è¯´ï¼Œä¸€ä¸ªå˜é‡åœ¨å‡½æ•°è¢«è°ƒç”¨åå°±ä¸å¯æ”¹å˜ã€‚<code>@State</code> å…³é”®å­—å…è®¸å˜é‡æœ‰ä¸´æ—¶çš„çŠ¶æ€ï¼Œå› ä¸º <code>@State</code> ä¼šåˆ›å»ºä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å † (Heap) ä¸­ã€‚å› æ­¤ï¼ŒæŒ‡é’ˆæœ¬èº«æ²¡æœ‰è¢«æ”¹å˜ï¼Œæ”¹å˜çš„æ˜¯å †é‡Œå­˜çš„æ•°æ®ã€‚</p>
<p>åœ¨ <code>SwiftUI</code> ä¸­ï¼Œ <code>@State</code> å±æ€§åŒ…è£…å™¨ç”¨æ¥ç®¡ç†è§†å›¾ä¸­çš„å¯å˜çŠ¶æ€çš„ï¼Œå°† <code>isFaceUp</code> å£°æ˜ä¸º <code>@State</code>ï¼ŒSwiftUI ä¼šçŸ¥é“è¿™ä¸ªå±æ€§çš„å˜åŒ–ä¼šå¯¼è‡´è§†å›¾é‡æ–°æ¸²æŸ“ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> isFaceUp <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="comment">// ZStack Code</span></span><br><span class="line">        &#125;</span><br><span class="line">        .onTapGesture &#123;</span><br><span class="line">            isFaceUp.toggle()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ï¼Œ<code>isFaceUp</code> å¯ä»¥åœ¨è§†å›¾ä¸­åŠ¨æ€å¯å˜ï¼Œä¸”ä¸ä¼šè§¦å‘ä¸å¯å˜æ€§é”™è¯¯ã€‚</p>
<h2 id="2-ç”Ÿæˆä¸€ç»„-Card"><a href="#2-ç”Ÿæˆä¸€ç»„-Card" class="headerlink" title="2. ç”Ÿæˆä¸€ç»„ Card"></a>2. ç”Ÿæˆä¸€ç»„ Card</h2><h3 id="2-1-æ•°ç»„-Array"><a href="#2-1-æ•°ç»„-Array" class="headerlink" title="2.1 æ•°ç»„(Array)"></a>2.1 æ•°ç»„(Array)</h3><p>Swift æ¥å—ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ–°å»ºæ•°ç»„ï¼Œ</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// A valid array notation</span></span><br><span class="line"><span class="keyword">let</span> emojis: <span class="type">Array</span>&lt;<span class="type">String</span>&gt; <span class="operator">=</span> [<span class="string">&quot;ğŸ‘»&quot;</span>, <span class="string">&quot;ğŸƒ&quot;</span>, <span class="string">&quot;ğŸ•·ï¸&quot;</span>, <span class="string">&quot;ğŸ˜ˆ&quot;</span>]</span><br><span class="line"><span class="comment">// Alternate array notation</span></span><br><span class="line"><span class="keyword">let</span> emojis: [<span class="type">String</span>] <span class="operator">=</span> [<span class="string">&quot;ğŸ‘»&quot;</span>, <span class="string">&quot;ğŸƒ&quot;</span>, <span class="string">&quot;ğŸ•·ï¸&quot;</span>, <span class="string">&quot;ğŸ˜ˆ&quot;</span>]</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»å‹æ¨è®ºçœç•¥ç±»å‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> emojis <span class="operator">=</span> [<span class="string">&quot;ğŸ‘»&quot;</span>, <span class="string">&quot;ğŸƒ&quot;</span>, <span class="string">&quot;ğŸ•·ï¸&quot;</span>, <span class="string">&quot;ğŸ˜ˆ&quot;</span>]</span><br></pre></td></tr></table></figure>

<h3 id="2-2-ForEach-å¾ªç¯"><a href="#2-2-ForEach-å¾ªç¯" class="headerlink" title="2.2 ForEach å¾ªç¯"></a>2.2 ForEach å¾ªç¯</h3><p><strong>ForEach ä¸åŒ…å«æœ€åä¸€ä¸ªæ•°å­—</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// iterate from 0 to 3 (NOT including 4)</span></span><br><span class="line"><span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span><span class="number">4</span>, id: \.<span class="keyword">self</span>) &#123; index <span class="keyword">in</span></span><br><span class="line">    <span class="type">CardView</span>(content: emojis[index])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Noteï¼š<code>id:\.self</code> ä¼šåœ¨ cs193p åç»­è¯¾ç¨‹ä¸­è®²è§£</p>
</blockquote>
<p><strong>ForEach åŒ…å«æœ€åä¸€ä¸ªæ•°å­—</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// iterate from 0 to 4 (including 4)</span></span><br><span class="line"><span class="type">ForEach</span>(<span class="number">0</span><span class="operator">...</span><span class="number">4</span>, id: \.<span class="keyword">self</span>) &#123; index <span class="keyword">in</span></span><br><span class="line">    <span class="type">CardView</span>(content: emojis[index])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ForEach ï¼ˆåŸºäºæ•°ç»„çš„é•¿åº¦ï¼‰å¾ªç¯æ•´ä¸ªæ•°ç»„</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> emojis <span class="operator">=</span> [<span class="string">&quot;ğŸ‘»&quot;</span>, <span class="string">&quot;ğŸƒ&quot;</span>, <span class="string">&quot;ğŸ•·ï¸&quot;</span>, <span class="string">&quot;ğŸ˜ˆ&quot;</span>]</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">HStack</span> &#123;</span><br><span class="line">            <span class="type">ForEach</span>(emojis.indices, id: \.<span class="keyword">self</span>) &#123; index <span class="keyword">in</span></span><br><span class="line">                <span class="type">CardView</span>(content: emojis[index])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .foregroundColor(.orange)</span><br><span class="line">        .padding()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šå¸¸åœ¨æ•°ç»„é•¿åº¦æœªçŸ¥æ—¶ä½¿ç”¨è¯¥ <code>.indices</code> æ–¹æ³•ã€‚</p>
<h2 id="3-æ§åˆ¶-Card-ä¸ªæ•°"><a href="#3-æ§åˆ¶-Card-ä¸ªæ•°" class="headerlink" title="3. æ§åˆ¶ Card ä¸ªæ•°"></a>3. æ§åˆ¶ Card ä¸ªæ•°</h2><h3 id="3-1-æŒ‰é’®"><a href="#3-1-æŒ‰é’®" class="headerlink" title="3.1 æŒ‰é’®"></a>3.1 æŒ‰é’®</h3><h4 id="3-1-1-æ–‡æœ¬æŒ‰é’®"><a href="#3-1-1-æ–‡æœ¬æŒ‰é’®" class="headerlink" title="3.1.1 æ–‡æœ¬æŒ‰é’®"></a>3.1.1 æ–‡æœ¬æŒ‰é’®</h4><p>è¯­æ³•ç»“æ„ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">Button</span>(<span class="string">&quot;Remove card&quot;</span>) &#123;</span><br><span class="line">    <span class="comment">// action</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> emojis <span class="operator">=</span> [<span class="string">&quot;ğŸ‘»&quot;</span>, <span class="string">&quot;ğŸƒ&quot;</span>, <span class="string">&quot;ğŸ•·ï¸&quot;</span>, <span class="string">&quot;ğŸ˜ˆ&quot;</span>, <span class="string">&quot;ğŸ’©&quot;</span>, <span class="string">&quot;ğŸ‰&quot;</span>, <span class="string">&quot;ğŸ˜&quot;</span>]</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">var</span> cardCount <span class="operator">=</span> <span class="number">4</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">HStack</span> &#123;</span><br><span class="line">                <span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span>cardCount, id: \.<span class="keyword">self</span>) &#123; index <span class="keyword">in</span></span><br><span class="line">                    <span class="type">CardView</span>(content: emojis[index])</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            .foregroundColor(.orange)</span><br><span class="line">            <span class="type">HStack</span> &#123;</span><br><span class="line">                <span class="type">Button</span>(<span class="string">&quot;Remove card&quot;</span>) &#123;</span><br><span class="line">                    cardCount <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">Spacer</span>()</span><br><span class="line">                <span class="type">Button</span>(<span class="string">&quot;Add card&quot;</span>) &#123;</span><br><span class="line">                    cardCount <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .padding()</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/11/21/Stanford-cs193p-02%EF%BD%9CMore-SwiftUI/cs193p02_textButton.png"></p>
<h4 id="3-1-2-å›¾æ ‡æŒ‰é’®"><a href="#3-1-2-å›¾æ ‡æŒ‰é’®" class="headerlink" title="3.1.2 å›¾æ ‡æŒ‰é’®"></a>3.1.2 å›¾æ ‡æŒ‰é’®</h4><p>è¯­æ³•ç»“æ„ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">Button</span>(action: &#123;</span><br><span class="line">    <span class="comment">// action</span></span><br><span class="line">&#125;, label: &#123;</span><br><span class="line">    <span class="comment">// button icon, images, etc...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> emojis <span class="operator">=</span> [<span class="string">&quot;ğŸ‘»&quot;</span>, <span class="string">&quot;ğŸƒ&quot;</span>, <span class="string">&quot;ğŸ•·ï¸&quot;</span>, <span class="string">&quot;ğŸ˜ˆ&quot;</span>, <span class="string">&quot;ğŸ’©&quot;</span>, <span class="string">&quot;ğŸ‰&quot;</span>, <span class="string">&quot;ğŸ˜&quot;</span>]</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">var</span> cardCount <span class="operator">=</span> <span class="number">4</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">HStack</span> &#123;</span><br><span class="line">                <span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span>cardCount, id: \.<span class="keyword">self</span>) &#123; index <span class="keyword">in</span></span><br><span class="line">                    <span class="type">CardView</span>(content: emojis[index])</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            .foregroundColor(.orange)</span><br><span class="line">            <span class="type">HStack</span> &#123;</span><br><span class="line">                <span class="type">Button</span>(action: &#123;</span><br><span class="line">                    cardCount <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line">                &#125;, label: &#123;</span><br><span class="line">                    <span class="type">Image</span>(systemName: <span class="string">&quot;rectangle.stack.badge.minus.fill&quot;</span>)</span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="type">Spacer</span>()</span><br><span class="line">                <span class="type">Button</span>(action: &#123;</span><br><span class="line">                    cardCount <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">                &#125;, label: &#123;</span><br><span class="line">                    <span class="type">Image</span>(systemName: <span class="string">&quot;rectangle.stack.badge.plus.fill&quot;</span>)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            .imageScale(.large)</span><br><span class="line">        &#125;</span><br><span class="line">        .padding()</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/11/21/Stanford-cs193p-02%EF%BD%9CMore-SwiftUI/cs193p02_iconButton.png"></p>
<h3 id="3-2-è¶…å‡ºç´¢å¼•çš„é—®é¢˜"><a href="#3-2-è¶…å‡ºç´¢å¼•çš„é—®é¢˜" class="headerlink" title="3.2 è¶…å‡ºç´¢å¼•çš„é—®é¢˜"></a>3.2 è¶…å‡ºç´¢å¼•çš„é—®é¢˜</h3><p>å¦‚æœæˆ‘ä»¬æ·»åŠ äº†å¤ªå¤šçš„å¡ç‰‡ï¼Œç”±äºç´¢å¼•è¶…å‡ºèŒƒå›´ä¼šå¯¼è‡´ç¨‹åºå´©æºƒã€‚å…¶ä¸­ä¸€ç§é¿å…ç¨‹åºçš„æ–¹æ³•æ˜¯æ·»åŠ ä¸€ä¸ª <code>if</code> é€»è¾‘ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">Button</span>(action: &#123;</span><br><span class="line">    <span class="keyword">if</span> cardCount <span class="operator">&lt;</span> emojis.count &#123;</span><br><span class="line">        cardCount <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;, label: &#123;</span><br><span class="line">    <span class="type">Image</span>(systemName: <span class="string">&quot;rectangle.stack.badge.plus.fill&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ <code>.disabled</code> è§†å›¾ä¿®æ”¹å™¨</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">cardCountAdjuster</span>(<span class="params">by</span> <span class="params">offset</span>: <span class="type">Int</span>, <span class="params">symbol</span>: <span class="type">String</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">Button</span>(action: &#123;</span><br><span class="line">        cardCount <span class="operator">+=</span> offset</span><br><span class="line">    &#125;, label: &#123;</span><br><span class="line">        <span class="type">Image</span>(systemName: symbol)</span><br><span class="line">    &#125;)</span><br><span class="line">    .disabled(cardCount <span class="operator">+</span> offset <span class="operator">&lt;</span> <span class="number">1</span> <span class="operator">||</span> cardCount <span class="operator">+</span> offset <span class="operator">&gt;</span> emojis.count)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Note: è¿™èŠ‚è¯¾çš„ååŠéƒ¨åˆ†è®²è§£äº† Swift ä¸­çš„å‡½æ•°ã€‚</p>
</blockquote>
<h2 id="4-æ•´ç†ä»£ç "><a href="#4-æ•´ç†ä»£ç " class="headerlink" title="4. æ•´ç†ä»£ç "></a>4. æ•´ç†ä»£ç </h2><h3 id="4-1-ä¼˜åŒ–ä»£ç å¯è¯»æ€§"><a href="#4-1-ä¼˜åŒ–ä»£ç å¯è¯»æ€§" class="headerlink" title="4.1 ä¼˜åŒ–ä»£ç å¯è¯»æ€§"></a>4.1 ä¼˜åŒ–ä»£ç å¯è¯»æ€§</h3><p>æˆ‘ä»¬å…ˆçœ‹çœ‹ <code>body</code> ä¸­åŒ…å«çš„ä»£ç ï¼Œ</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> emojis <span class="operator">=</span> [<span class="string">&quot;ğŸ‘»&quot;</span>, <span class="string">&quot;ğŸƒ&quot;</span>, <span class="string">&quot;ğŸ•·ï¸&quot;</span>, <span class="string">&quot;ğŸ˜ˆ&quot;</span>, <span class="string">&quot;ğŸ’©&quot;</span>, <span class="string">&quot;ğŸ‰&quot;</span>, <span class="string">&quot;ğŸ˜&quot;</span>]</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">var</span> cardCount <span class="operator">=</span> <span class="number">4</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">HStack</span> &#123;</span><br><span class="line">                <span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span>cardCount, id: \.<span class="keyword">self</span>) &#123; index <span class="keyword">in</span></span><br><span class="line">                    <span class="type">CardView</span>(content: emojis[index])</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            .foregroundColor(.orange)</span><br><span class="line">            <span class="type">HStack</span> &#123;</span><br><span class="line">                <span class="type">Button</span>(action: &#123;</span><br><span class="line">                    <span class="keyword">if</span> cardCount <span class="operator">&gt;</span> <span class="number">1</span> &#123;</span><br><span class="line">                        cardCount <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;, label: &#123;</span><br><span class="line">                    <span class="type">Image</span>(systemName: <span class="string">&quot;rectangle.stack.badge.minus.fill&quot;</span>)</span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="type">Spacer</span>()</span><br><span class="line">                <span class="type">Button</span>(action: &#123;</span><br><span class="line">                    <span class="keyword">if</span> cardCount <span class="operator">&lt;</span> emojis.count &#123;</span><br><span class="line">                        cardCount <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;, label: &#123;</span><br><span class="line">                    <span class="type">Image</span>(systemName: <span class="string">&quot;rectangle.stack.badge.plus.fill&quot;</span>)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            .imageScale(.large)</span><br><span class="line">        &#125;</span><br><span class="line">        .padding()</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨çœ‹èµ·æ¥ååˆ†ä¸æ•´æ´ã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»ºå…¶å®ƒè§†å›¾æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> emojis <span class="operator">=</span> [<span class="string">&quot;ğŸ‘»&quot;</span>, <span class="string">&quot;ğŸƒ&quot;</span>, <span class="string">&quot;ğŸ•·ï¸&quot;</span>, <span class="string">&quot;ğŸ˜ˆ&quot;</span>, <span class="string">&quot;ğŸ’©&quot;</span>, <span class="string">&quot;ğŸ‰&quot;</span>, <span class="string">&quot;ğŸ˜&quot;</span>]</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">var</span> cardCount <span class="operator">=</span> <span class="number">4</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            cards</span><br><span class="line">            cardCountAdjusters</span><br><span class="line">        &#125;</span><br><span class="line">        .padding()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">HStack</span> &#123;</span><br><span class="line">            <span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span>cardCount, id: \.<span class="keyword">self</span>) &#123; index <span class="keyword">in</span></span><br><span class="line">                <span class="type">CardView</span>(content: emojis[index])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .foregroundColor(.orange)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> cardCountAdjusters: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">HStack</span> &#123;</span><br><span class="line">            cardRemover</span><br><span class="line">            <span class="type">Spacer</span>()</span><br><span class="line">            cardAdder</span><br><span class="line">        &#125;</span><br><span class="line">        .imageScale(.large)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> cardRemover: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Button</span>(action: &#123;</span><br><span class="line">            <span class="keyword">if</span> cardCount <span class="operator">&gt;</span> <span class="number">1</span> &#123;</span><br><span class="line">                cardCount <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, label: &#123;</span><br><span class="line">            <span class="type">Image</span>(systemName: <span class="string">&quot;rectangle.stack.badge.minus.fill&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> cardAdder: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Button</span>(action: &#123;</span><br><span class="line">            <span class="keyword">if</span> cardCount <span class="operator">&lt;</span> emojis.count &#123;</span><br><span class="line">                cardCount <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, label: &#123;</span><br><span class="line">            <span class="type">Image</span>(systemName: <span class="string">&quot;rectangle.stack.badge.plus.fill&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨æ•´ç†åï¼Œæˆ‘ä»¬ <code>body</code> ä¸­çš„ä»£ç ç°åœ¨çœ‹èµ·æ¥éå¸¸å®¹æ˜“ç†è§£ã€‚</p>
<p><img src="/2024/11/21/Stanford-cs193p-02%EF%BD%9CMore-SwiftUI/cs193p02_view.png"></p>
<h3 id="4-2-éšå¼è¿”å›å€¼-Implicit-return"><a href="#4-2-éšå¼è¿”å›å€¼-Implicit-return" class="headerlink" title="4.2 éšå¼è¿”å›å€¼ (Implicit return)"></a>4.2 éšå¼è¿”å›å€¼ (Implicit return)</h3><p>å¦‚æœä¸€ä¸ªå‡½æ•°åªæœ‰ 1 è¡Œä»£ç ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨éšå¼è¿”å›ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">HStack</span> &#123;</span><br><span class="line">        <span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span>cardCount, id: \.<span class="keyword">self</span>) &#123; index <span class="keyword">in</span></span><br><span class="line">            <span class="type">CardView</span>(content: emojis[index])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .foregroundColor(.orange)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>return</code> å…³é”®å­—æ˜¾å¼è¿”å›ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">HStack</span> &#123;</span><br><span class="line">        <span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span>cardCount, id: \.<span class="keyword">self</span>) &#123; index <span class="keyword">in</span></span><br><span class="line">            <span class="type">CardView</span>(content: emojis[index])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .foregroundColor(.orange)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-å‡½æ•°-Function"><a href="#4-3-å‡½æ•°-Function" class="headerlink" title="4.3 å‡½æ•° (Function)"></a>4.3 å‡½æ•° (Function)</h3><p>è¯­æ³•ç»“æ„ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">&lt;</span>function name<span class="operator">&gt;</span>(<span class="operator">&lt;</span>para name<span class="operator">&gt;</span>: <span class="operator">&lt;</span>data type<span class="operator">&gt;</span>) -&gt; <span class="operator">&lt;</span><span class="keyword">return</span> type<span class="operator">&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// function code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">cardCountAdjuster</span>(<span class="params">by</span> <span class="params">offset</span>: <span class="type">Int</span>, <span class="params">symbol</span>: <span class="type">String</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">Button</span>(action: &#123;</span><br><span class="line">        cardCount <span class="operator">+=</span> offset</span><br><span class="line">    &#125;, label: &#123;</span><br><span class="line">        <span class="type">Image</span>(systemName: symbol)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>IMPORTANT:</strong> <code>by offset: Int</code> æˆ‘ä»¬æœ‰æ—¶å€™ä¼šä½¿ç”¨ 2 ä¸ªæ ‡ç­¾ä»£è¡¨ä¸€ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•° <code>by</code> åœ¨è°ƒç”¨å‡½æ•°æ—¶ä½¿ç”¨ï¼Œè€Œç¬¬äºŒä¸ªæ ‡ç­¾åœ¨å‡½æ•°å†…ä½¿ç”¨ã€‚ç¬¬ä¸€ä¸ªæ ‡ç­¾è¢«ç§°ä¸º external parameter nameï¼Œç¬¬äºŒä¸ªæ ‡ç­¾è¢«ç§°ä¸º internal parameter nameã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬çš„ä»£ç çœ‹èµ·æ¥æ›´æ¼‚äº®äº†,</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">cardCountAdjuster</span>(<span class="params">by</span> <span class="params">offset</span>: <span class="type">Int</span>, <span class="params">symbol</span>: <span class="type">String</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">Button</span>(action: &#123;</span><br><span class="line">        cardCount <span class="operator">+=</span> offset</span><br><span class="line">    &#125;, label: &#123;</span><br><span class="line">        <span class="type">Image</span>(systemName: symbol)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cardRemover: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> cardCountAdjuster(by: <span class="operator">-</span><span class="number">1</span>, symbol: <span class="string">&quot;rectangle.stack.badge.minus.fill&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cardAdder: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> cardCountAdjuster(by: <span class="number">1</span>, symbol: <span class="string">&quot;rectangle.stack.badge.plus.fill&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Note: ç”±äºæˆ‘ä»¬åˆ é™¤äº† <code>if</code> é€»è¾‘ï¼Œæˆ‘ä»¬ç¨‹åºå¯èƒ½ç”±äºæ•°ç»„è¶…å‡ºç´¢å¼•èŒƒå›´è€Œå´©æºƒã€‚ä½†æ˜¯æˆ‘ä»¬åœ¨è¶…å‡ºç´¢å¼•çš„é—®é¢˜ç« èŠ‚è®²äº†å¦‚ä½•è§£å†³.</p>
</blockquote>
<p><img src="/2024/11/21/Stanford-cs193p-02%EF%BD%9CMore-SwiftUI/cs193p02_function.png"></p>
<h2 id="5-ä¼˜åŒ–å¸ƒå±€"><a href="#5-ä¼˜åŒ–å¸ƒå±€" class="headerlink" title="5. ä¼˜åŒ–å¸ƒå±€"></a>5. ä¼˜åŒ–å¸ƒå±€</h2><h3 id="5-1-LazyVGrid"><a href="#5-1-LazyVGrid" class="headerlink" title="5.1 LazyVGrid"></a>5.1 LazyVGrid</h3><p>ä¸ºäº†è®©è¿™äº›å¡ç‰‡çœ‹èµ·æ¥æ¯”è¾ƒæ­£å¸¸ï¼Œæˆ‘ä»¬éœ€è¦ç”¨<code>LazyVGrid</code>æ›¿ä»£<code>HStack</code>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">LazyVGrid</span>(columns: [<span class="type">GridItem</span>(.adaptive(minimum: <span class="number">120</span>))]) &#123;</span><br><span class="line">        <span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span>cardCount, id: \.<span class="keyword">self</span>) &#123; index <span class="keyword">in</span></span><br><span class="line">            <span class="type">CardView</span>(content: emojis[index])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .foregroundColor(.orange)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>LazyVGrid</code> å’Œ <code>LazyHGrid</code> åˆ†åˆ«æ˜¯å‚ç›´çš„ç½‘æ ¼å¸ƒå±€ã€æ°´å¹³ç½‘æ ¼å¸ƒå±€ã€‚<code>LazyVGrid</code> é€šè¿‡åˆ¶å®šåˆ—çš„æ•°é‡ç„¶åæ¥å¡«å……å¸ƒå±€ã€‚<code>GridItem</code> é€šè¿‡è®¾ç½® Size æ¥æ§åˆ¶æ ¼å­çš„å®½åº¦ï¼š</p>
<ol>
<li><code>fixed</code> é€šè¿‡æŒ‡å®šå›ºå®šå¤§å°æ¥ç¡®å®šæ ¼å­å®½åº¦</li>
<li><code>flexible </code> å¼¹æ€§å¤§å°ï¼Œä¼šå’Œå…¶ä»– flexible çš„æ ¼å­åˆ†å‰²å‰©ä½™çš„ç©ºé—´ï¼Œå¯ä»¥è®¾ç½®æœŸæœ›çš„æœ€å¤§å’Œæœ€å°å€¼ã€‚å¦‚æœæŒ‡å®šçš„æœ€å°å€¼è¿‡å¤§å¯èƒ½ä¼šè¶…å‡ºå±å¹•</li>
<li><code>adaptive</code> è‡ªé€‚åº”åˆ†å¸ƒ, è¿™ä¸ªå°ºå¯¸ä¼šæä¾›ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ ¼å­ã€‚éœ€è¦æŒ‡å®šä¸€ä¸ªæœ€å°å€¼, ä¹Ÿå¯ä»¥è®¾ç½®æœ€å¤§å€¼ï¼Œç„¶åæ ¹æ®æœ€å°å€¼åœ¨æŠŠè‡ªèº«å ç”¨çš„åŒºåŸŸå¹³åˆ†æˆè‹¥å¹²ä¸ªæ»¡è¶³æœ€å°å€¼æœ€å¤§å€¼çš„çš„æ ¼å­ã€‚å¯ä»¥ç†è§£ adaptive ä¸ºä¸€ä¸ª flexible å¤§æ ¼å­ï¼Œè·å¾—ç©ºé—´åå†æŠŠè¿™ä¸ªå¤§æ ¼å­å¹³åˆ†æˆè‹¥å¹²ä¸ªæ»¡è¶³è®¾ç½®å®šå€¼çš„å°æ ¼å­ã€‚</li>
</ol>
</blockquote>
<p>æˆ‘ä»¬éœ€è¦åœ¨<code>cards</code> å’Œ <code>cardCountAdjusters</code>ä¹‹é—´æ·»åŠ ä¸€ä¸ª<code>Spacer()</code>ï¼Œè¿™æ ·å®ƒä»¬ä¸ä¼šæŒ¤åˆ°ä¸€èµ·å»ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">VStack</span> &#123;</span><br><span class="line">        cards</span><br><span class="line">        <span class="type">Spacer</span>()</span><br><span class="line">        cardCountAdjusters</span><br><span class="line">    &#125;</span><br><span class="line">    .padding()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”±äº<code>LazyVGrid</code>ä¼šä½¿ç”¨å°½å¯èƒ½å°‘çš„ç©ºé—´ï¼Œå› æ­¤ï¼Œå½“ä¸¤å¼ å¡ç‰‡éƒ½ä¸ºèƒŒé¢æ—¶ä¼šè¢«æŒ¤å‹åˆ°ä¸€èµ·å»ã€‚</p>
<p><img src="/2024/11/21/Stanford-cs193p-02%EF%BD%9CMore-SwiftUI/cs193p02_lazyVGrid.png"></p>
<h3 id="5-2-opacity"><a href="#5-2-opacity" class="headerlink" title="5.2 .opacity"></a>5.2 <code>.opacity</code></h3><p>æˆ‘ä»¬éœ€è¦ä¿®æ”¹<code>CardView</code>çš„é€»è¾‘</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> content: <span class="type">String</span></span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">var</span> isFaceUp <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> base <span class="operator">=</span> <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">12</span>)</span><br><span class="line">            <span class="type">Group</span> &#123;</span><br><span class="line">                base.foregroundColor(.white)</span><br><span class="line">                base.strokeBorder(lineWidth: <span class="number">2</span>)</span><br><span class="line">                <span class="type">Text</span>(content).font(.largeTitle)</span><br><span class="line">            &#125;</span><br><span class="line">            .opacity(isFaceUp <span class="operator">?</span> <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line">            base.fill().opacity(isFaceUp <span class="operator">?</span> <span class="number">0</span> : <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .onTapGesture &#123;</span><br><span class="line">            isFaceUp.toggle()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é—®é¢˜è§£å†³ï¼</p>
<p><img src="/2024/11/21/Stanford-cs193p-02%EF%BD%9CMore-SwiftUI/cs193p02_opacity.png"></p>
<h3 id="5-3-aspectRatio"><a href="#5-3-aspectRatio" class="headerlink" title="5.3 .aspectRatio"></a>5.3 <code>.aspectRatio</code></h3><p>ä½¿ç”¨ <code>aspectRatio</code> æ§åˆ¶è§†å›¾çš„å®½é«˜æ¯”</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">LazyVGrid</span>(columns: [<span class="type">GridItem</span>(.adaptive(minimum: <span class="number">120</span>))]) &#123;</span><br><span class="line">        <span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span>cardCount, id: \.<span class="keyword">self</span>) &#123; index <span class="keyword">in</span></span><br><span class="line">            <span class="type">CardView</span>(content: emojis[index])</span><br><span class="line">                .aspectRatio(<span class="number">2</span><span class="operator">/</span><span class="number">3</span>, contentMode: .fit)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .foregroundColor(.orange)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/11/21/Stanford-cs193p-02%EF%BD%9CMore-SwiftUI/cs193p02_aspectRatio.png"></p>
<h3 id="5-4-ScrollView"><a href="#5-4-ScrollView" class="headerlink" title="5.4 ScrollView"></a>5.4 ScrollView</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">VStack</span> &#123;</span><br><span class="line">        <span class="type">ScrollView</span> &#123;</span><br><span class="line">            cards</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Spacer</span>()</span><br><span class="line">        cardCountAdjusters</span><br><span class="line">    &#125;</span><br><span class="line">    .padding()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>code</category>
        <category>swift</category>
      </categories>
      <tags>
        <tag>cs193p</tag>
      </tags>
  </entry>
  <entry>
    <title>Stanford cs193p 03ï½œMVVM</title>
    <url>/2024/12/06/Stanford-cs193p-03%EF%BD%9CMVVM/</url>
    <content><![CDATA[<p>æœ¬æ–‡æ˜¯æ–¯å¦ç¦å¤§å­¦ cs193p å…¬å¼€è¯¾ç¨‹ç¬¬ 03 é›†çš„ç›¸å…³ç¬”è®°ã€‚</p>
<span id="more"></span>

<blockquote>
<p>æœ¬æ–‡ä¸»è¦å†…å®¹è½¬è½½äºï¼š<a href="https://nwdan.com/my-learning/stanford-cs193p-3.html">é—»è€…é€šè¾¾çš„ä¸ªäººåšå®¢</a></p>
</blockquote>
<p>cs193p è¯¾ç¨‹ä»‹ç»:</p>
<blockquote>
<p>The lectures for the Spring 2023 version of Stanford Universityâ€™s course CS193p (Developing Applications for iOS using SwiftUI) were given in person but, unfortunately, were not video recorded. However, we did capture the laptop screen of the presentations and demos as well as the associated audio. You can watch these screen captures using the links below. Youâ€™ll also find links to supporting material that was distributed to students during the quarter (homework, demo code, etc.).</p>
</blockquote>
<p>æœ¬èŠ‚å‰è¨€ï¼š</p>
<blockquote>
<p>Conceptual overview of the architectural paradigm underlying the development of applications for iOS using SwiftUI (known as MVVM). Explanation of a fundamental component of understanding the Swift programming language: its type system. Start to apply both of these to Memorize.</p>
</blockquote>
<p>cs193p è¯¾ç¨‹ç½‘å€: <a href="https://cs193p.sites.stanford.edu/2023">https://cs193p.sites.stanford.edu/2023</a></p>
<p>æ¨èçš„æ‹“å±•ç»ƒä¹ æ•™ç¨‹ï¼štodolist MVVMï¼ˆçº¦ 130 åˆ†é’Ÿï¼‰ <a href="https://ur0.jp/jVOQG">https://ur0.jp/jVOQG</a></p>
<hr>
<h2 id="0-æœ¬èŠ‚æ¡†æ¶"><a href="#0-æœ¬èŠ‚æ¡†æ¶" class="headerlink" title="0. æœ¬èŠ‚æ¡†æ¶"></a>0. æœ¬èŠ‚æ¡†æ¶</h2><ul>
<li><p>MVVM</p>
<p>MVVM æ¶æ„ç®€ä»‹ä¸ç‰¹ç‚¹</p>
</li>
<li><p><code>swift</code> ç±»å‹</p>
<ul>
<li><code>struct</code> vs <code>class</code></li>
<li><code>protocol</code></li>
<li>â€œdonâ€™t careâ€ type (aka <code>generics</code>)</li>
<li><code>enum</code>ï¼ˆç•¥ï¼Œä½†å¾ˆé‡è¦ï¼‰</li>
<li><code>functions</code></li>
</ul>
</li>
<li><p>Demo<br>ç»­ä¸ŠèŠ‚è®°å¿†æ¸¸æˆï¼Œå›  demo å¤ªçŸ­ï¼Œå°† demo åˆå¹¶åˆ°äº†ä¸‹ä¸€ç¯‡ç¬”è®°ä¸­ã€‚</p>
</li>
</ul>
<h2 id="1-Model-and-UI"><a href="#1-Model-and-UI" class="headerlink" title="1. Model and UI"></a>1. Model and UI</h2><h3 id="1-1-å°†â€œé€»è¾‘ä¸æ•°æ®â€ä¸â€œç”¨æˆ·ç•Œé¢â€åˆ†ç¦»"><a href="#1-1-å°†â€œé€»è¾‘ä¸æ•°æ®â€ä¸â€œç”¨æˆ·ç•Œé¢â€åˆ†ç¦»" class="headerlink" title="1.1 å°†â€œé€»è¾‘ä¸æ•°æ®â€ä¸â€œç”¨æˆ·ç•Œé¢â€åˆ†ç¦»"></a>1.1 å°†â€œé€»è¾‘ä¸æ•°æ®â€ä¸â€œç”¨æˆ·ç•Œé¢â€åˆ†ç¦»</h3><ul>
<li>SwiftUI å¼ºè°ƒå°†åº”ç”¨ç¨‹åºé€»è¾‘å’Œæ•°æ®ä¸ç”¨æˆ·ç•Œé¢åˆ†ç¦»ã€‚æˆ‘ä»¬å°†è¿™äº›é€»è¾‘å’Œæ•°æ®ç§°ä¸º <strong>æ¨¡å‹ï¼ˆModelï¼‰</strong>ã€‚</li>
<li>æ¨¡å‹å¯ä»¥æ˜¯ <code>struct</code>ã€<code>SQL</code> æ•°æ®åº“ã€æœºå™¨å­¦ä¹ ä»£ç æˆ–å…¶ä»–å¤šç§å½¢å¼çš„ç»„åˆã€‚</li>
<li>ç”¨æˆ·ç•Œé¢åŸºæœ¬ä¸Šåªæ˜¯ä¸€ä¸ªâ€œå¯å‚æ•°åŒ–â€çš„å¤–å£³ï¼Œç”±æ¨¡å‹æä¾›æ•°æ®å¹¶èµ‹äºˆå…¶ç”Ÿå‘½ã€‚</li>
<li><strong>ç”¨æˆ·ç•Œé¢æ˜¯æ¨¡å‹çš„å¯è§†åŒ–è¡¨ç°</strong>ã€‚</li>
<li>æ¨¡å‹æ˜¯å­˜æ”¾åƒ <code>isFaceUp</code> å’Œ <code>cardCount</code> è¿™æ ·çš„çŠ¶æ€çš„åœ°æ–¹ï¼Œè€Œè¿™äº›çŠ¶æ€ä¸åº”è¯¥æ”¾åœ¨ UI çš„ <code>@State</code> ä¸­ã€‚</li>
<li>SwiftUI ä¼šç¡®ä¿å½“æ¨¡å‹å˜åŒ–å½±å“åˆ°ç”¨æˆ·ç•Œé¢æ—¶ï¼Œç”¨æˆ·ç•Œé¢ä¼šè¢«é‡æ–°æ„å»ºã€‚</li>
</ul>
<h3 id="1-2-å°†æ¨¡å‹è¿æ¥åˆ°ç”¨æˆ·ç•Œé¢"><a href="#1-2-å°†æ¨¡å‹è¿æ¥åˆ°ç”¨æˆ·ç•Œé¢" class="headerlink" title="1.2 å°†æ¨¡å‹è¿æ¥åˆ°ç”¨æˆ·ç•Œé¢"></a>1.2 å°†æ¨¡å‹è¿æ¥åˆ°ç”¨æˆ·ç•Œé¢</h3><p>åœ¨å°†æ¨¡å‹ä¸ç”¨æˆ·ç•Œé¢è¿æ¥æ—¶ï¼Œæœ‰å‡ ç§é€‰æ‹©ï¼š</p>
<ol>
<li><strong>å‡ ä¹ä¸åˆ†ç¦»</strong>ï¼šæå°‘æ•°æƒ…å†µä¸‹ï¼Œæ¨¡å‹å¯ä»¥ä½œä¸ºè§†å›¾ä¸­çš„ <code>@State</code></li>
<li><strong>å®Œå…¨åˆ†ç¦»</strong>ï¼šæ¨¡å‹å¯èƒ½ä»…èƒ½é€šè¿‡ä¸€ä¸ªå……å½“â€œé—¨å«â€çš„ <strong>è§†å›¾æ¨¡å‹ï¼ˆView Modelï¼‰</strong> <code>class</code> è¿›è¡Œè®¿é—®</li>
<li><strong>éƒ¨åˆ†åˆ†ç¦»</strong>ï¼šå­˜åœ¨ä¸€ä¸ªè§†å›¾æ¨¡å‹ <code>class</code>ï¼Œä½†æ¨¡å‹ä»ç„¶å¯ä»¥ç›´æ¥è®¿é—®</li>
</ol>
<p>è¿™ä¸‰ç§é€‰æ‹©ä¸»è¦å–å†³äºæ¨¡å‹çš„å¤æ‚æ€§ï¼š</p>
<ul>
<li>ä¸€ä¸ªç”± SQL + <code>struct</code> + å…¶ä»–å…ƒç´ ç»„æˆçš„æ¨¡å‹ï¼Œå¯èƒ½ä¼šé€‰æ‹©ç¬¬äºŒç§æ–¹æ¡ˆ</li>
<li>å¦‚æœæ¨¡å‹åªæ˜¯ä¸€å°æ®µç®€å•æ•°æ®ä¸”æ¶‰åŠçš„é€»è¾‘å¾ˆå°‘ï¼Œå¯èƒ½ä¼šé€‰æ‹©ç¬¬ä¸€ç§æ–¹æ¡ˆ</li>
<li>ä»‹äºä¸¤è€…ä¹‹é—´çš„æƒ…å†µå¯èƒ½ä¼šè€ƒè™‘ç¬¬ä¸‰ç§æ–¹æ¡ˆ</li>
</ul>
<p>æœ¬èŠ‚å°†é‡ç‚¹è®¨è®ºç¬¬äºŒç§æ–¹æ¡ˆï¼ˆå®Œå…¨åˆ†ç¦»ï¼‰ã€‚æˆ‘ä»¬å°†è¿™ç§è¿æ¥æ¨¡å‹ä¸ç”¨æˆ·ç•Œé¢çš„æ¶æ„ç§°ä¸º <strong>MVVM</strong> ï¼ˆæ¨¡å‹-è§†å›¾-è§†å›¾æ¨¡å‹ï¼‰ã€‚</p>
<ul>
<li><strong>MVVM</strong> æ˜¯ç›¸å¯¹å¤æ‚çš„ SwiftUI åº”ç”¨çš„ä¸»è¦æ¶æ„</li>
<li>ç¬¬ä¸‰ç§æ–¹æ¡ˆï¼ˆéƒ¨åˆ†åˆ†ç¦»ï¼‰æ˜¯å¯¹ MVVM çš„ç»†å¾®è°ƒæ•´</li>
</ul>
<h2 id="2-MVVM"><a href="#2-MVVM" class="headerlink" title="2. MVVM"></a>2. MVVM</h2><h3 id="2-1-MVVM-ç®€ä»‹"><a href="#2-1-MVVM-ç®€ä»‹" class="headerlink" title="2.1 MVVM ç®€ä»‹"></a>2.1 MVVM ç®€ä»‹</h3><p><strong>MVVM (Model-View-ViewModel)</strong> æ˜¯ä¸€ç§æ¶æ„æ¨¡å¼ï¼Œå°†è§†å›¾ï¼ˆUIï¼‰å’Œä¸šåŠ¡é€»è¾‘åˆ†ç¦»ï¼Œä»è€Œæé«˜ä»£ç å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§ã€‚å®ƒå°†ä»£ç åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li><strong>Modelï¼ˆæ¨¡å‹å±‚ï¼‰ï¼š</strong> è´Ÿè´£ç®¡ç†æ•°æ®å’Œä¸šåŠ¡é€»è¾‘ã€‚é€šå¸¸æ˜¯æ•°æ®æ¨¡å‹ï¼Œå¯èƒ½åŒ…å«ä»æœåŠ¡å™¨æˆ–æœ¬åœ°æ•°æ®åº“è·å–çš„å†…å®¹ã€‚</li>
<li><strong>Viewï¼ˆè§†å›¾å±‚ï¼‰ï¼š</strong> è´Ÿè´£å±•ç¤º UIï¼Œå£°æ˜å¼åœ°æè¿°ç•Œé¢å¦‚ä½•å“åº”æ•°æ®å˜åŒ–ã€‚è§†å›¾åªä¸ ViewModel äº¤äº’ï¼Œè€Œä¸ç›´æ¥æ“ä½œ Modelã€‚</li>
<li><strong>ViewModelï¼ˆè§†å›¾æ¨¡å‹å±‚ï¼‰ï¼š</strong> è´Ÿè´£è¿æ¥ View å’Œ Modelã€‚ViewModel é€šè¿‡å¤„ç†æ•°æ®å’Œä¸šåŠ¡é€»è¾‘ï¼Œå°†æ•°æ®è½¬æ¢ä¸ºè§†å›¾éœ€è¦çš„å½¢å¼ï¼Œå¹¶é€šè¿‡ç»‘å®šçš„æ–¹å¼é€šçŸ¥è§†å›¾æ›´æ–°ã€‚</li>
</ul>
<h3 id="2-2-MVVM-ç‰¹ç‚¹"><a href="#2-2-MVVM-ç‰¹ç‚¹" class="headerlink" title="2.2 MVVM ç‰¹ç‚¹"></a>2.2 MVVM ç‰¹ç‚¹</h3><ul>
<li>è§£è€¦ï¼šView å’Œ Model ç›¸äº’ç‹¬ç«‹ï¼ŒViewModel æ‰¿æ‹…æ•°æ®è½¬æ¢ä»»åŠ¡ï¼Œå‡å°‘ UI å’Œä¸šåŠ¡é€»è¾‘çš„è€¦åˆã€‚</li>
<li>æ•°æ®é©±åŠ¨ï¼šViewModel ä¸­çš„å±æ€§é€šå¸¸æ˜¯å¯è§‚å¯Ÿçš„ï¼ˆä¾‹å¦‚ SwiftUI ä¸­çš„ @Published å±æ€§ï¼‰ï¼Œä½¿å¾—æ•°æ®å˜åŒ–æ—¶è‡ªåŠ¨è§¦å‘ UI æ›´æ–°ã€‚</li>
<li>å•å‘æ•°æ®æµï¼šModel æ›´æ–°æ—¶ï¼Œé€šçŸ¥ ViewModelï¼Œè¿›è€Œé€šçŸ¥ Viewï¼›ç”¨æˆ·æ“ä½œä» View ä¼ é€’åˆ° ViewModel è¿›è¡Œå¤„ç†ã€‚</li>
</ul>
<p><img src="/2024/12/06/Stanford-cs193p-03%EF%BD%9CMVVM/cs193p03_MVVM.png"></p>
<h3 id="2-3-æ•°æ®æµåœ¨-MVVM-ä¸­çš„è¿ä½œ"><a href="#2-3-æ•°æ®æµåœ¨-MVVM-ä¸­çš„è¿ä½œ" class="headerlink" title="2.3 æ•°æ®æµåœ¨ MVVM ä¸­çš„è¿ä½œ"></a>2.3 æ•°æ®æµåœ¨ MVVM ä¸­çš„è¿ä½œ</h3><ul>
<li><p><strong>ä» Model åˆ° View</strong></p>
<ol>
<li>ViewModel ä» Model è·å–æ•°æ®ï¼ˆå¦‚ä»ç½‘ç»œæˆ–æœ¬åœ°åŠ è½½ï¼‰ã€‚</li>
<li>ViewModel é€šè¿‡ @Published å±æ€§å°†æ•°æ®æš´éœ²ç»™è§†å›¾ã€‚</li>
<li>è§†å›¾è§‚å¯Ÿ ViewModelï¼Œå½“æ•°æ®æ›´æ–°æ—¶ï¼Œè‡ªåŠ¨é‡æ–°æ¸²æŸ“ã€‚</li>
</ol>
</li>
<li><p><strong>ä» View åˆ° Model</strong></p>
<ol>
<li>ç”¨æˆ·åœ¨è§†å›¾ä¸­è¿›è¡Œäº¤äº’</li>
<li>äº¤äº’äº‹ä»¶è§¦å‘ ViewModel çš„æ–¹æ³•</li>
<li>ViewModel ä¿®æ”¹ Model æˆ–å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œæ›´æ–°æ•°æ®åé€šçŸ¥è§†å›¾ã€‚</li>
</ol>
</li>
</ul>
<h3 id="2-4-è¡¥å……ä¸¾ä¾‹ï¼ˆéè§†é¢‘å†…å®¹ï¼‰"><a href="#2-4-è¡¥å……ä¸¾ä¾‹ï¼ˆéè§†é¢‘å†…å®¹ï¼‰" class="headerlink" title="2.4 è¡¥å……ä¸¾ä¾‹ï¼ˆéè§†é¢‘å†…å®¹ï¼‰"></a>2.4 è¡¥å……ä¸¾ä¾‹ï¼ˆéè§†é¢‘å†…å®¹ï¼‰</h3><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•åœ¨ SwiftUI ä¸­å®ç° MVVM æ¶æ„ã€‚</p>
<blockquote>
<p>è¿™ä¸€éƒ¨åˆ†æ˜¯ä¸ºäº†è¾…åŠ©ç†è§£ MVVM æ¶æ„ï¼Œä¸ç”¨å®ç°ã€‚</p>
</blockquote>
<h4 id="2-4-1-æ¨¡å‹å±‚ï¼ˆModelï¼‰"><a href="#2-4-1-æ¨¡å‹å±‚ï¼ˆModelï¼‰" class="headerlink" title="2.4.1 æ¨¡å‹å±‚ï¼ˆModelï¼‰"></a>2.4.1 æ¨¡å‹å±‚ï¼ˆModelï¼‰</h4><p>æ¨¡å‹è´Ÿè´£è¡¨ç¤ºåº”ç”¨çš„æ•°æ®ç»“æ„ã€‚é€šå¸¸æ˜¯ç®€å•çš„æ•°æ®ç±»å‹ï¼Œå¯èƒ½ä»æœåŠ¡å™¨æˆ–æœ¬åœ°æ•°æ®åº“åŠ è½½ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Habit</span>: <span class="title class_ inherited__">Identifiable</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> id: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> isCompleted: <span class="type">Bool</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-4-2-è§†å›¾æ¨¡å‹å±‚ï¼ˆViewModelï¼‰"><a href="#2-4-2-è§†å›¾æ¨¡å‹å±‚ï¼ˆViewModelï¼‰" class="headerlink" title="2.4.2 è§†å›¾æ¨¡å‹å±‚ï¼ˆViewModelï¼‰"></a>2.4.2 è§†å›¾æ¨¡å‹å±‚ï¼ˆViewModelï¼‰</h4><p><code>ViewModel</code> è´Ÿè´£ç®¡ç†ä¸šåŠ¡é€»è¾‘å’ŒçŠ¶æ€ï¼Œå¹¶é€šè¿‡æ•°æ®ç»‘å®šå°†æ•°æ®æš´éœ²ç»™è§†å›¾ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HabitViewModel</span>: <span class="title class_ inherited__">ObservableObject</span> &#123;</span><br><span class="line">    <span class="comment">// å¯è§‚å¯Ÿçš„å±æ€§ï¼Œè§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°</span></span><br><span class="line">    <span class="meta">@Published</span> <span class="keyword">var</span> habits: [<span class="type">Habit</span>] <span class="operator">=</span> [</span><br><span class="line">        <span class="type">Habit</span>(id: <span class="number">1</span>, name: <span class="string">&quot;Exercise&quot;</span>, isCompleted: <span class="literal">false</span>),</span><br><span class="line">        <span class="type">Habit</span>(id: <span class="number">2</span>, name: <span class="string">&quot;Read a Book&quot;</span>, isCompleted: <span class="literal">true</span>)</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°ä¹ æƒ¯å®ŒæˆçŠ¶æ€</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">toggleHabitCompletion</span>(<span class="keyword">_</span> <span class="params">habit</span>: <span class="type">Habit</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> index <span class="operator">=</span> habits.firstIndex(where: &#123; <span class="variable">$0</span>.id <span class="operator">==</span> habit.id &#125;) &#123;</span><br><span class="line">            habits[index].isCompleted.toggle()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>@Published</code>ï¼šä½¿å¾— <code>habits</code> çš„å˜åŒ–å¯ä»¥è¢« SwiftUI çš„ <code>View</code> è§‚å¯Ÿåˆ°ï¼Œä»è€Œè§¦å‘ UI æ›´æ–°ã€‚</li>
<li><strong>æ–¹æ³•</strong>ï¼šå°è£…äº†ä¸šåŠ¡é€»è¾‘ï¼Œä¾‹å¦‚åˆ‡æ¢ä¹ æƒ¯å®ŒæˆçŠ¶æ€ã€‚</li>
</ul>
<h4 id="2-4-3-è§†å›¾å±‚ï¼ˆViewï¼‰"><a href="#2-4-3-è§†å›¾å±‚ï¼ˆViewï¼‰" class="headerlink" title="2.4.3 è§†å›¾å±‚ï¼ˆViewï¼‰"></a>2.4.3 è§†å›¾å±‚ï¼ˆViewï¼‰</h4><p>è§†å›¾æ˜¯å®Œå…¨å£°æ˜å¼çš„ï¼Œåªå…³æ³¨ UI å’Œæ•°æ®çš„ç»‘å®šï¼Œä¸ç›´æ¥æ“ä½œ <code>Model</code>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">HabitListView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="meta">@StateObject</span> <span class="keyword">private</span> <span class="keyword">var</span> viewModel <span class="operator">=</span> <span class="type">HabitViewModel</span>() <span class="comment">// åˆ›å»º ViewModel å®ä¾‹</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">NavigationView</span> &#123;</span><br><span class="line">            <span class="type">List</span>(viewModel.habits) &#123; habit <span class="keyword">in</span></span><br><span class="line">                <span class="type">HStack</span> &#123;</span><br><span class="line">                    <span class="type">Text</span>(habit.name)</span><br><span class="line">                    <span class="type">Spacer</span>()</span><br><span class="line">                    <span class="type">Button</span>(action: &#123;</span><br><span class="line">                        viewModel.toggleHabitCompletion(habit) <span class="comment">// ç”¨æˆ·æ“ä½œé€šçŸ¥ ViewModel</span></span><br><span class="line">                    &#125;) &#123;</span><br><span class="line">                        <span class="type">Image</span>(systemName: habit.isCompleted <span class="operator">?</span> <span class="string">&quot;checkmark.circle.fill&quot;</span> : <span class="string">&quot;circle&quot;</span>)</span><br><span class="line">                            .foregroundColor(habit.isCompleted <span class="operator">?</span> .green : .gray)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            .navigationTitle(<span class="string">&quot;My Habits&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>@StateObject</code>ï¼šç”¨äºåˆå§‹åŒ– <code>ViewModel</code>ï¼Œä½¿è§†å›¾èƒ½å¤Ÿè§‚å¯Ÿå…¶çŠ¶æ€å˜åŒ–ã€‚</li>
<li><strong>æ•°æ®ç»‘å®š</strong>ï¼š<code>viewModel.habits</code> ä¸åˆ—è¡¨å†…å®¹ç»‘å®šï¼Œ<code>@Published</code> å±æ€§å˜åŒ–æ—¶è‡ªåŠ¨æ›´æ–°è§†å›¾ã€‚</li>
<li><strong>ç”¨æˆ·æ“ä½œ</strong>ï¼šé€šè¿‡æŒ‰é’®æ“ä½œè°ƒç”¨ <code>ViewModel</code> æ–¹æ³•ï¼Œè€Œä¸ç›´æ¥æ“ä½œ <code>Model</code>ã€‚</li>
</ul>
<h2 id="3-Varieties-of-Types"><a href="#3-Varieties-of-Types" class="headerlink" title="3. Varieties of Types"></a>3. Varieties of Types</h2><h3 id="3-1-struct-and-class"><a href="#3-1-struct-and-class" class="headerlink" title="3.1 struct and class"></a>3.1 struct and class</h3><h4 id="3-1-1-struct-class-å…±åŒç‚¹"><a href="#3-1-1-struct-class-å…±åŒç‚¹" class="headerlink" title="3.1.1 struct &amp; class å…±åŒç‚¹"></a>3.1.1 struct &amp; class å…±åŒç‚¹</h4><p>åœ¨ Swift ä¸­ï¼Œ<code>struct</code> å’Œ <code>class</code> å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p>
<ul>
<li><p><strong>è¯­æ³•ç›¸ä¼¼</strong>ï¼šå®ƒä»¬çš„è¯­æ³•å‡ ä¹å®Œå…¨ç›¸åŒã€‚</p>
</li>
<li><p><strong>å­˜å‚¨å±æ€§</strong>ï¼ˆstored varsï¼‰ï¼šç±»ä¼¼äºä½ ç†Ÿæ‚‰çš„é‚£ç§å­˜å‚¨åœ¨å†…å­˜ä¸­çš„å±æ€§ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isFaceUp: <span class="type">Bool</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>è®¡ç®—å±æ€§</strong>ï¼ˆcomputed varsï¼‰ï¼šå…¶å€¼æ˜¯é€šè¿‡è¯„ä¼°ä¸€äº›ä»£ç å¾—å‡ºçš„å±æ€§ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å¸¸é‡</strong>ï¼ˆconstant letsï¼‰ï¼šå…¶å€¼ä¸ä¼šæ”¹å˜çš„å±æ€§ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> defaultColor <span class="operator">=</span> <span class="type">Color</span>.orange</span><br><span class="line"><span class="operator">...</span></span><br><span class="line"><span class="type">CardView</span>().foregroundColor(defaultColor)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å‡½æ•°</strong>ï¼ˆfunctionsï¼‰ï¼šå¯ä»¥å®šä¹‰è¡Œä¸ºï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">multiply</span>(<span class="params">operand</span>: <span class="type">Int</span>, <span class="params">by</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> operand <span class="operator">*</span> by</span><br><span class="line">&#125;</span><br><span class="line">multiply(operand: <span class="number">5</span>, by: <span class="number">6</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">multiply</span>(<span class="keyword">_</span> <span class="params">operand</span>: <span class="type">Int</span>, <span class="params">by</span> <span class="params">otherOperand</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> operand <span class="operator">*</span> otherOperand</span><br><span class="line">&#125;</span><br><span class="line">multiply(<span class="number">5</span>, by: <span class="number">6</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>åˆå§‹åŒ–å™¨</strong>ï¼ˆinitializersï¼‰ï¼šåœ¨åˆ›å»º <code>struct</code> æˆ– <code>class</code> æ—¶è°ƒç”¨çš„ç‰¹æ®Šå‡½æ•°ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">RoundedRectangle</span> &#123;</span><br><span class="line">	<span class="keyword">init</span>(<span class="params">cornerRadius</span>: <span class="type">CGFloat</span>) &#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ cornerRadius åˆå§‹åŒ–çŸ©å½¢</span></span><br><span class="line">&#125;</span><br><span class="line">	<span class="keyword">init</span>(<span class="params">cornerSize</span>: <span class="type">CGSize</span>) &#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ cornerSize åˆå§‹åŒ–çŸ©å½¢</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="3-1-2-struct-vs-class-åŒºåˆ«"><a href="#3-1-2-struct-vs-class-åŒºåˆ«" class="headerlink" title="3.1.2 struct vs class åŒºåˆ«"></a>3.1.2 struct vs class åŒºåˆ«</h4><table>
<thead>
<tr>
<th>struct</th>
<th>class</th>
</tr>
</thead>
<tbody><tr>
<td>å€¼ç±»å‹</td>
<td>å¼•ç”¨ç±»å‹</td>
</tr>
<tr>
<td>ä¼ é€’æˆ–èµ‹å€¼æ—¶ä¼šè¢«å¤åˆ¶</td>
<td>é€šè¿‡æŒ‡é’ˆä¼ é€’</td>
</tr>
<tr>
<td>å¤åˆ¶æ—¶å†™å…¥ï¼ˆåªæœ‰åœ¨è¢«ä¿®æ”¹æ—¶æ‰çœŸæ­£å¤åˆ¶ï¼‰</td>
<td>è‡ªåŠ¨å¼•ç”¨è®¡æ•°</td>
</tr>
<tr>
<td>å‡½æ•°å¼ç¼–ç¨‹</td>
<td>é¢å‘å¯¹è±¡ç¼–ç¨‹</td>
</tr>
<tr>
<td>ä¸æ”¯æŒç»§æ‰¿</td>
<td>æ”¯æŒå•ç»§æ‰¿</td>
</tr>
<tr>
<td>â€œå…è´¹çš„â€ <strong>init</strong>åˆå§‹åŒ–æ‰€æœ‰çš„ <strong>var</strong></td>
<td>â€œå…è´¹çš„â€ <strong>init</strong> ä¸åˆå§‹åŒ–ä»»ä½• <strong>var</strong></td>
</tr>
<tr>
<td>å¯å˜æ€§æ˜¯æ˜¾å¼çš„ï¼ˆ<strong>var</strong> ä¸ <strong>let</strong> çš„åŒºåˆ†ï¼‰</td>
<td>å§‹ç»ˆå¯å˜</td>
</tr>
<tr>
<td>å¸¸ç”¨çš„æ•°æ®ç»“æ„</td>
<td>åœ¨ç‰¹å®šæƒ…å†µä¸‹ä½¿ç”¨</td>
</tr>
</tbody></table>
<ul>
<li><p><strong>å€¼ç±»å‹ vs å¼•ç”¨ç±»å‹</strong>ï¼š<code>struct</code> æ˜¯å€¼ç±»å‹ï¼Œè¿™æ„å‘³ç€å½“å®ƒä»¬è¢«ä¼ é€’æˆ–èµ‹å€¼æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å‰¯æœ¬ï¼›è€Œ <code>class</code> æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¼ é€’æˆ–èµ‹å€¼æ—¶åªæ˜¯å°†å¼•ç”¨æŒ‡å‘åŒä¸€å®ä¾‹ã€‚</p>
</li>
<li><p><strong>å¤åˆ¶æ—¶å†™å…¥</strong>ï¼šå¯¹äº <code>struct</code>ï¼Œåªæœ‰åœ¨å®ƒä»¬è¢«ä¿®æ”¹æ—¶ï¼Œæ‰ä¼šç”Ÿæˆæ–°çš„å‰¯æœ¬ï¼ˆå†™æ—¶å¤åˆ¶ï¼‰ï¼Œè¿™é€šå¸¸ç”¨äºä¼˜åŒ–å†…å­˜ä½¿ç”¨ã€‚</p>
</li>
<li><p><strong>è‡ªåŠ¨å¼•ç”¨è®¡æ•°</strong>ï¼š<code>class</code> çš„å®ä¾‹ä¼šè¢« Swift çš„å†…å­˜ç®¡ç†ç³»ç»Ÿè‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼Œè¿™æ„å‘³ç€å½“æ²¡æœ‰å¼ºå¼•ç”¨æŒ‡å‘æŸä¸ªå®ä¾‹æ—¶ï¼Œå®ƒä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ã€‚</p>
</li>
<li><p><strong>å‡½æ•°å¼ç¼–ç¨‹ vs é¢å‘å¯¹è±¡ç¼–ç¨‹</strong>ï¼š<code>struct</code> å¸¸ç”¨äºå‡½æ•°å¼ç¼–ç¨‹èŒƒå¼ï¼Œè€Œ <code>class</code> åˆ™å¹¿æ³›ç”¨äºé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œåè€…å¼ºè°ƒå¯¹è±¡çš„å°è£…å’Œç»§æ‰¿ã€‚</p>
</li>
<li><p><strong>ç»§æ‰¿</strong>ï¼š<code>struct</code> ä¸æ”¯æŒç»§æ‰¿ï¼Œå› æ­¤å®ƒä¸èƒ½ä»å…¶å®ƒç»“æ„ä½“æ´¾ç”Ÿï¼›è€Œ <code>class</code> æ”¯æŒå•å±‚ç»§æ‰¿ï¼Œå…è®¸å­ç±»ä»çˆ¶ç±»ç»§æ‰¿å±æ€§å’Œæ–¹æ³•ã€‚</p>
</li>
<li><p><strong>åˆå§‹åŒ–å™¨</strong>ï¼šå¯¹äº <code>struct</code>ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒSwift ä¼šç”Ÿæˆä¸€ä¸ªåˆå§‹åŒ–å™¨ï¼Œç¡®ä¿æ‰€æœ‰å±æ€§éƒ½æœ‰é»˜è®¤å€¼ï¼›è€Œ <code>class</code> çš„é»˜è®¤åˆå§‹åŒ–å™¨ä¸ä¼šåˆå§‹åŒ–ä»»ä½•å±æ€§ï¼Œé™¤éä½ è‡ªå·±å®šä¹‰ã€‚</p>
</li>
<li><p><strong>å¯å˜æ€§</strong>ï¼šåœ¨ä½¿ç”¨ <code>struct</code> æ—¶ï¼Œå˜é‡ï¼ˆ<code>var</code>ï¼‰å’Œå¸¸é‡ï¼ˆ<code>let</code>ï¼‰çš„å®šä¹‰å½±å“å…¶å¯å˜æ€§ï¼Œå› æ­¤ä½ éœ€è¦æ˜¾å¼å£°æ˜ï¼›è€Œ <code>class</code> å®ä¾‹çš„å±æ€§é»˜è®¤æ˜¯å¯å˜çš„ï¼Œä¸è®ºæ˜¯ç”¨ <code>var</code> è¿˜æ˜¯ <code>let</code>ã€‚</p>
</li>
<li><p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šåœ¨å¼€å‘ä¸­ï¼Œ<code>struct</code> é€šå¸¸æ˜¯æ›´å¸¸ç”¨çš„é€‰æ‹©ï¼Œè¿™æ˜¯å› ä¸ºå®ƒä»¬æä¾›äº†æ›´å¥½çš„å†…å­˜ç®¡ç†å’Œæ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦å€¼ä¼ é€’çš„åœºæ™¯ï¼›è€Œ <code>class</code> åˆ™é€‚åˆéœ€è¦å…±äº«çŠ¶æ€æˆ–éœ€è¦ç»§æ‰¿çš„æƒ…å†µã€‚</p>
</li>
</ul>
<blockquote>
<p>æˆªæ­¢ç›®å‰è¯¾ç¨‹æ‰€çœ‹åˆ°çš„éƒ½æ˜¯ <code>struct</code>ï¼ŒMVVM æ¶æ„ä¸­çš„ ViewModel æ˜¯ <code>class</code>ã€‚</p>
</blockquote>
<h3 id="3-2-Generics-æ³›å‹"><a href="#3-2-Generics-æ³›å‹" class="headerlink" title="3.2 Generics æ³›å‹"></a>3.2 Generics æ³›å‹</h3><ul>
<li>æœ‰æ—¶æˆ‘ä»¬ä¸å…³å¿ƒå…·ä½“ç±»å‹ï¼Œæƒ³æ“ä½œç±»å‹æ— å…³çš„æ•°æ®ç»“æ„ã€‚</li>
<li>Swift æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨æ— ç±»å‹çš„å˜é‡ã€‚è§£å†³åŠæ³•æ˜¯ä½¿ç”¨â€œæ³›å‹â€ã€‚</li>
</ul>
<h4 id="3-2-1-Generics-ç¤ºä¾‹ï¼šArray"><a href="#3-2-1-Generics-ç¤ºä¾‹ï¼šArray" class="headerlink" title="3.2.1 Generics ç¤ºä¾‹ï¼šArray"></a>3.2.1 Generics ç¤ºä¾‹ï¼š<code>Array</code></h4><ul>
<li><p><code>Array</code> å¯ä»¥åŒ…å«å¤šç§ç±»å‹çš„å…ƒç´ è€Œä¸å…³å¿ƒå…·ä½“ç±»å‹ã€‚</p>
</li>
<li><p><code>Array</code> çš„å£°æ˜å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Array</span>&lt;<span class="type">Element</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">func</span> <span class="title function_">append</span>(<span class="keyword">_</span> <span class="params">element</span>: <span class="type">Element</span>) &#123; <span class="operator">...</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>append</code> çš„å‚æ•°æ˜¯ <code>Element</code>ï¼Œè¡¨ç¤ºä¸€ç§â€œæ— æ‰€è°“â€ç±»å‹ã€‚</p>
</li>
<li><p>ä½¿ç”¨ <code>Array</code> æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šå…·ä½“ç±»å‹ï¼Œå¦‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ­¤æ—¶ Element ä¸º Int ç±»å‹</span></span><br><span class="line"><span class="keyword">var</span> a <span class="operator">=</span> <span class="type">Array</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line">a.append(<span class="number">5</span>)</span><br><span class="line">a.append(<span class="number">22</span>)</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ­¤æ—¶ Element ä¸º String ç±»å‹</span></span><br><span class="line"><span class="keyword">var</span> a <span class="operator">=</span> <span class="type">Array</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line">a.append(<span class="string">&quot;ğŸŒ¼&quot;</span>)</span><br><span class="line">a.append(<span class="string">&quot;ğŸ‰&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Element</code> çš„ç±»å‹åœ¨ä½¿ç”¨ <code>Array</code> æ—¶ç¡®å®šã€‚</p>
</li>
<li><p>æ³›å‹å…è®¸åŒæ—¶ä½¿ç”¨å¤šä¸ªç±»å‹å‚æ•°ï¼ˆå¦‚ <code>&lt;Element, Foo&gt;</code>ï¼‰ã€‚</p>
</li>
<li><p>â€œæ— æ‰€è°“â€ç±»å‹ç§°ä¸º <strong>ç±»å‹å‚æ•°</strong>ã€‚</p>
</li>
</ul>
<p>æ€»ä¹‹ï¼Œæ³›å‹èƒ½è®©æˆ‘ä»¬åœ¨ä¸çŸ¥é“å…·ä½“ç±»å‹çš„æƒ…å†µä¸‹çµæ´»æ“ä½œæ•°æ®ç»“æ„ã€‚</p>
<h3 id="3-3-protocol-åè®®"><a href="#3-3-protocol-åè®®" class="headerlink" title="3.3 protocol åè®®"></a>3.3 protocol åè®®</h3><h4 id="3-3-1-protocol-åè®®çš„ç‰¹ç‚¹"><a href="#3-3-1-protocol-åè®®çš„ç‰¹ç‚¹" class="headerlink" title="3.3.1 protocol åè®®çš„ç‰¹ç‚¹"></a>3.3.1 protocol åè®®çš„ç‰¹ç‚¹</h4><h5 id="1-protocol-æœ‰å‡½æ•°å’Œæ–¹æ³•ï¼Œä½†ä¸èƒ½å…·ä½“å®ç°æˆ–å­˜å‚¨"><a href="#1-protocol-æœ‰å‡½æ•°å’Œæ–¹æ³•ï¼Œä½†ä¸èƒ½å…·ä½“å®ç°æˆ–å­˜å‚¨" class="headerlink" title="1. protocol æœ‰å‡½æ•°å’Œæ–¹æ³•ï¼Œä½†ä¸èƒ½å…·ä½“å®ç°æˆ–å­˜å‚¨"></a><strong>1. protocol æœ‰å‡½æ•°å’Œæ–¹æ³•ï¼Œä½†ä¸èƒ½å…·ä½“å®ç°æˆ–å­˜å‚¨</strong></h5><p>å£°æ˜ä¸€ä¸ªåè®®çš„è¯­æ³•ä¸ struct æˆ– class å¾ˆç›¸ä¼¼ï¼Œåªæ˜¯æ²¡æœ‰å…·ä½“å®ç°ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">protocol</span> <span class="title class_">Moveable</span> &#123;</span><br><span class="line"><span class="keyword">func</span> <span class="title function_">move</span>(<span class="params">by</span>: <span class="type">Int</span>)</span><br><span class="line"><span class="keyword">var</span> hasMoved: <span class="type">Bool</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line"><span class="keyword">var</span> distanceFromStart: <span class="type">Int</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><code>&#123; &#125;</code> ä¸­çš„å†…å®¹ç”¨äºè¯´æ˜è¯¥åè®®çš„å˜é‡æ˜¯åªè¯»ï¼ˆgetï¼‰è¿˜æ˜¯å¯è¯»å†™ï¼ˆget setï¼‰ã€‚</p>
<p><strong>ä¸¾ä¾‹è¯´æ˜</strong></p>
<p>ä»»æ„ç±»å‹éƒ½å¯ä»¥å®ç° Moveable åè®®ï¼Œåªéœ€è¦åœ¨ struct å†…éƒ¨å®ç° <code>move(by)</code> ã€<code>hasMoved</code> å’Œ <code>distanceFromStart</code> æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">PortableThing</span>: <span class="title class_ inherited__">Moveable</span> &#123;</span><br><span class="line">  <span class="comment">// åœ¨è¿™é‡Œå¿…é¡»å®ç° move(by:)ã€hasMoved å’Œ distanceFromStart</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶ <code>PortableThing</code> ç»“æ„ä½“ä¾¿ç¬¦åˆ <code>Moveable</code> åè®®ã€‚</p>
<h5 id="2-protocol-åè®®å¯ä»¥ç»§æ‰¿å…¶ä»–-protocol"><a href="#2-protocol-åè®®å¯ä»¥ç»§æ‰¿å…¶ä»–-protocol" class="headerlink" title="2. protocol åè®®å¯ä»¥ç»§æ‰¿å…¶ä»– protocol"></a>2. <strong>protocol</strong> åè®®å¯ä»¥ç»§æ‰¿å…¶ä»– protocol</h5><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protocol</span> <span class="title class_">Vehicle</span>: <span class="title class_ inherited__">Moveable</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> passengerCount: <span class="type">Int</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span>: <span class="title class_ inherited__">Vehicle</span> &#123;</span><br><span class="line">  <span class="comment">// åœ¨è¿™é‡Œå¿…é¡»å®ç° move(by:)ã€hasMovedã€distanceFromStart å’Œ passengerCount</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-ä¸€ä¸ªç±»å¯ä»¥åŒæ—¶å®ç°å¤šä¸ªåè®®"><a href="#3-ä¸€ä¸ªç±»å¯ä»¥åŒæ—¶å®ç°å¤šä¸ªåè®®" class="headerlink" title="3. ä¸€ä¸ªç±»å¯ä»¥åŒæ—¶å®ç°å¤šä¸ªåè®®"></a>3. ä¸€ä¸ªç±»å¯ä»¥åŒæ—¶å®ç°å¤šä¸ªåè®®</h5><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span>: <span class="title class_ inherited__">Vehicle</span>, <span class="title class_ inherited__">Impoundable</span>, <span class="title class_ inherited__">Leasable</span> &#123;</span><br><span class="line">  <span class="comment">// åœ¨è¿™é‡Œå¿…é¡»å®ç°æ‰€æœ‰åè®®ä¸­çš„å‡½æ•°å’Œå˜é‡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-2-protocol-åè®®çš„ç”¨é€”"><a href="#3-3-2-protocol-åè®®çš„ç”¨é€”" class="headerlink" title="3.3.2 protocol åè®®çš„ç”¨é€”"></a>3.3.2 protocol åè®®çš„ç”¨é€”</h4><ol>
<li><p><strong>ç»Ÿä¸€è¡Œä¸ºå®šä¹‰</strong></p>
<p>åè®®å¯ä»¥ç”¨äºå®šä¹‰ä¸€ç»„ç±»å‹çš„å…±åŒè¡Œä¸ºï¼Œè€Œæ— éœ€å…³å¿ƒè¿™äº›ç±»å‹çš„å…·ä½“å®ç°ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protocol</span> <span class="title class_">Flyable</span> &#123;</span><br><span class="line">  <span class="keyword">func</span> <span class="title function_">fly</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Bird</span>: <span class="title class_ inherited__">Flyable</span> &#123;</span><br><span class="line">  <span class="keyword">func</span> <span class="title function_">fly</span>() &#123;</span><br><span class="line">	  <span class="built_in">print</span>(<span class="string">&quot;Bird is flying!&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Airplane</span>: <span class="title class_ inherited__">Flyable</span> &#123;</span><br><span class="line">  <span class="keyword">func</span> <span class="title function_">fly</span>() &#123;</span><br><span class="line">	  <span class="built_in">print</span>(<span class="string">&quot;Airplane is flying!&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> flyer: [<span class="type">Flyable</span>] <span class="operator">=</span> [<span class="type">Bird</span>(), <span class="type">Airplane</span>()]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> flyer &#123;</span><br><span class="line">  item.fly()  <span class="comment">// ä¸åŒç±»å‹çš„å¯¹è±¡éƒ½å¯ä»¥é£</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Flyable å®šä¹‰äº†æ‰€æœ‰å¯é£è¡Œçš„ç±»å‹åº”å…·å¤‡çš„è¡Œä¸ºã€‚</li>
<li>é€šè¿‡åè®®ï¼Œå¯ä»¥ç»Ÿä¸€å¤„ç† Bird å’Œ Airplane ç­‰ç¬¦åˆåè®®çš„ç±»å‹ã€‚</li>
</ul>
<p>å¦å¤–ï¼Œæ¯”å¦‚ï¼Œ<code>struct ContentView: View</code>Â  ä½¿å¾— Â <code>ContentView</code>Â  æˆä¸ºä¸€ä¸ªå¼ºå¤§çš„ç»“æ„ä½“ï¼Œè™½ç„¶éœ€è¦å®ç° Â <code>var body</code>Â  æ¥æ»¡è¶³ Â <code>View</code>Â  åè®®ã€‚</p>
</li>
<li><p><strong>åè®®ä¸æ³›å‹</strong></p>
<p>åè®®å¯ä»¥ä¸æ³›å‹ç»“åˆï¼Œçº¦æŸæ³›å‹å‚æ•°å¿…é¡»ç¬¦åˆæŸäº›åè®®ï¼Œä»è€Œæå‡ä»£ç çš„ç±»å‹å®‰å…¨æ€§ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">printDetails</span>&lt;<span class="type">T</span>: <span class="type">CustomStringConvertible</span>&gt;(<span class="keyword">_</span> <span class="params">item</span>: <span class="type">T</span>) &#123;</span><br><span class="line">  <span class="built_in">print</span>(item.description)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">printDetails(<span class="number">42</span>)            <span class="comment">// è¾“å‡ºï¼š42</span></span><br><span class="line">printDetails(<span class="string">&quot;Swift Rocks&quot;</span>) <span class="comment">// è¾“å‡ºï¼šSwift Rocks</span></span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li>æ³›å‹å‚æ•° T å¿…é¡»ç¬¦åˆ CustomStringConvertible åè®®ã€‚</li>
<li>è¿™ç§çº¦æŸç¡®ä¿å‡½æ•°å¯ä»¥ä½¿ç”¨ description å±æ€§ï¼Œè€Œä¸ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚</li>
</ul>
<h4 id="3-3-3-å¸¸è§åè®®ç¤ºä¾‹"><a href="#3-3-3-å¸¸è§åè®®ç¤ºä¾‹" class="headerlink" title="3.3.3 å¸¸è§åè®®ç¤ºä¾‹"></a>3.3.3 å¸¸è§åè®®ç¤ºä¾‹</h4><p>å¸¸è§åè®®åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>Identifiable</strong></li>
<li><strong>Hashable</strong></li>
<li><strong>Equatable</strong></li>
<li><strong>CustomStringConvertible</strong></li>
<li>ç‰¹å®šçš„åè®®å¦‚ <strong>Animatable</strong>ã€‚</li>
</ul>
<h4 id="3-3-4-åè®®çš„ä¼˜ç‚¹"><a href="#3-3-4-åè®®çš„ä¼˜ç‚¹" class="headerlink" title="3.3.4 åè®®çš„ä¼˜ç‚¹"></a>3.3.4 åè®®çš„ä¼˜ç‚¹</h4><ol>
<li><strong>å®šä¹‰è¡Œä¸ºçš„è“å›¾</strong>ï¼šç”¨äºç»Ÿä¸€å®šä¹‰ä¸€ç»„è¡Œä¸ºï¼ˆæ–¹æ³•ã€å±æ€§ï¼‰ã€‚</li>
<li><strong>å®ç°å¤šæ€æ€§</strong>ï¼šä½¿ä¸åŒç±»å‹å¯ä»¥é€šè¿‡ç»Ÿä¸€æ¥å£äº¤äº’ã€‚</li>
<li><strong>æ³›å‹çº¦æŸ</strong>ï¼šæå‡ä»£ç çš„ç±»å‹å®‰å…¨æ€§å’Œå¤ç”¨æ€§ã€‚</li>
<li><strong>åè®®æ‰©å±•</strong>ï¼šå‡å°‘é‡å¤ä»£ç ï¼Œä¸ºåè®®æä¾›é»˜è®¤å®ç°ã€‚</li>
<li><strong>çµæ´»ç»„åˆ</strong>ï¼šé€šè¿‡åè®®ç»„åˆæ„å»ºæ›´å¼ºå¤§çš„æ¥å£ã€‚</li>
</ol>
<h3 id="3-4-enum"><a href="#3-4-enum" class="headerlink" title="3.4 enum"></a>3.4 <code>enum</code></h3><blockquote>
<p>æœ¬èŠ‚ç•¥è¿‡ï¼Œä½†å¾ˆé‡è¦ã€‚</p>
</blockquote>
<h3 id="3-5-Functions"><a href="#3-5-Functions" class="headerlink" title="3.5 Functions"></a>3.5 Functions</h3><p>å‡½æ•°ç±»å‹å¯ä»¥åƒå…¶ä»–ç±»å‹ä¸€æ ·ä½¿ç”¨ï¼Œç”±å‚æ•°ç±»å‹åˆ—è¡¨å’Œè¿”å›ç±»å‹ç»„æˆã€‚è¯­æ³•ä¸ºï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">(å‚æ•°ç±»å‹åˆ—è¡¨) -&gt; è¿”å›ç±»å‹</span><br></pre></td></tr></table></figure>

<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">square</span>(<span class="params">operand</span>: <span class="type">Double</span>) -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">     <span class="keyword">return</span> operand <span class="operator">*</span> operand</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> operation <span class="operator">=</span> square <span class="comment">// just assigning a value to the operation vars, nothing more</span></span><br><span class="line"><span class="keyword">let</span> result1 <span class="operator">=</span> operation(<span class="number">4</span>) <span class="comment">// result1 would equal 16</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>square</code> å‡½æ•°çš„ç±»å‹ï¼š<code>(Double) -&gt; Double</code>ï¼Œè¡¨ç¤ºæ¥æ”¶ä¸€ä¸ª <code>Double</code> å‚æ•°å¹¶è¿”å›ä¸€ä¸ª <code>Doubel</code> å€¼ã€‚</li>
<li><code>operation</code> æ˜¯ä¸€ä¸ªå˜é‡ï¼šå­˜å‚¨äº†å‡½æ•° <code>square</code>ï¼Œå¯ä»¥é€šè¿‡å˜é‡è°ƒç”¨ã€‚</li>
</ul>
<p><strong>å‡½æ•°ç±»å‹ç¤ºä¾‹</strong>ï¼š</p>
<ul>
<li><code>(Int, Int) -&gt; Bool</code>ï¼šæ¥å—ä¸¤ä¸ª Int ç±»å‹å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª Bool å€¼ã€‚</li>
<li><code>(Double) -&gt; Void</code>ï¼šæ¥å—ä¸€ä¸ª Double ç±»å‹å‚æ•°ï¼Œæ— è¿”å›å€¼ã€‚</li>
<li><code>() -&gt; Array&lt;String&gt;</code>ï¼šä¸æ¥å—å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª String æ•°ç»„ã€‚</li>
<li><code>() -&gt; Void</code>ï¼šä¸æ¥å—å‚æ•°ï¼Œæ— è¿”å›å€¼ï¼ˆè¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„ç”¨æ³•ï¼‰ã€‚</li>
</ul>
<p>åœ¨ Swift ä¸­ï¼Œå‡½æ•°ç±»å‹å¯ä»¥åƒå…¶ä»–ç±»å‹ä¸€æ ·ä½¿ç”¨ï¼Œå¯ä»¥å­˜å‚¨å‡½æ•°å¹¶é€šè¿‡å˜é‡è°ƒç”¨ã€‚</p>
<h4 id="3-5-1-é—­åŒ…ç±»å‹ï¼ˆFunction-as-typeï¼‰"><a href="#3-5-1-é—­åŒ…ç±»å‹ï¼ˆFunction-as-typeï¼‰" class="headerlink" title="3.5.1 é—­åŒ…ç±»å‹ï¼ˆFunction as typeï¼‰"></a>3.5.1 é—­åŒ…ç±»å‹ï¼ˆFunction as typeï¼‰</h4><p>å‡½æ•°ç±»å‹ä¹Ÿé€‚ç”¨äºé—­åŒ…ã€‚é—­åŒ…æ˜¯æœªå‘½åçš„å‡½æ•°ï¼Œå®ƒçš„è¯­æ³•æ›´åŠ ç®€æ´ã€‚ä½ å¯ä»¥å°†é—­åŒ…å­˜å‚¨åœ¨å˜é‡ä¸­ï¼Œæˆ–ç›´æ¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œé€šå¸¸è¢«ç§°ä¸ºâ€œå†…è”å‡½æ•°â€ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> operation: (<span class="type">Int</span>, <span class="type">Int</span>) -&gt; <span class="type">Int</span> <span class="operator">=</span> &#123; (a: <span class="type">Int</span>, b: <span class="type">Int</span>) -&gt; <span class="type">Int</span> <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">return</span> a <span class="operator">+</span> b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(operation(<span class="number">4</span>, <span class="number">6</span>))  <span class="comment">// è¾“å‡ºï¼š10</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ Swift ä¸­ï¼Œè®¸å¤š SwiftUI çš„åŠŸèƒ½ï¼ˆå¦‚@ViewBuilders å’Œ onTapGesture çš„åŠ¨ä½œï¼‰éƒ½æ˜¯é€šè¿‡é—­åŒ…å®ç°çš„ã€‚</p>
<h2 id="4-Demo"><a href="#4-Demo" class="headerlink" title="4. Demo"></a>4. Demo</h2><p>ç”±äº demo å¤ªçŸ­ï¼ˆå¤§çº¦åªæœ‰ 15 åˆ†é’Ÿï¼‰ï¼Œå°†è¿™èŠ‚è¯¾çš„ demo åˆå¹¶åˆ°ä¸‹ä¸€ç¯‡ç¬”è®°ä¸­ã€‚</p>
]]></content>
      <categories>
        <category>code</category>
        <category>swift</category>
      </categories>
      <tags>
        <tag>cs193p</tag>
      </tags>
  </entry>
  <entry>
    <title>Stanford cs193p 04ï½œMVVM åº”ç”¨</title>
    <url>/2024/12/09/Stanford-cs193p-04%EF%BD%9CMVVM-%E5%BA%94%E7%94%A8/</url>
    <content><![CDATA[<p>æœ¬æ–‡æ˜¯æ–¯å¦ç¦å¤§å­¦ cs193p å…¬å¼€è¯¾ç¨‹ç¬¬ 04 é›†çš„ç›¸å…³ç¬”è®°ã€‚</p>
<span id="more"></span>

<blockquote>
<p>æœ¬æ–‡ä¸»è¦å†…å®¹è½¬è½½äºï¼š<a href="https://nwdan.com/my-learning/stanford-cs193p-4.html">é—»è€…é€šè¾¾çš„ä¸ªäººåšå®¢</a></p>
</blockquote>
<p>cs193p è¯¾ç¨‹ä»‹ç»:</p>
<blockquote>
<p>The lectures for the Spring 2023 version of Stanford Universityâ€™s course CS193p (Developing Applications for iOS using SwiftUI) were given in person but, unfortunately, were not video recorded. However, we did capture the laptop screen of the presentations and demos as well as the associated audio. You can watch these screen captures using the links below. Youâ€™ll also find links to supporting material that was distributed to students during the quarter (homework, demo code, etc.).</p>
</blockquote>
<p>cs193p è¯¾ç¨‹ç½‘å€: <a href="https://cs193p.sites.stanford.edu/2023">https://cs193p.sites.stanford.edu/2023</a></p>
<p>ä¸ºä¾¿äºæ¢³ç†ï¼Œæœ¬èŠ‚ç¬”è®°åŒ…å«äº†ç¬¬ä¸‰èŠ‚è¯¾æœ€å 15 åˆ†é’Ÿã€ç¬¬å››èŠ‚è¯¾ä»¥åŠç¬¬äº”èŠ‚è¯¾å‰å››åˆ†é’Ÿçš„å†…å®¹ã€‚</p>
<hr>
<h2 id="1-ç¬¬ä¸‰èŠ‚è¯¾æœ€å-15-åˆ†é’Ÿ"><a href="#1-ç¬¬ä¸‰èŠ‚è¯¾æœ€å-15-åˆ†é’Ÿ" class="headerlink" title="1. ç¬¬ä¸‰èŠ‚è¯¾æœ€å 15 åˆ†é’Ÿ"></a>1. ç¬¬ä¸‰èŠ‚è¯¾æœ€å 15 åˆ†é’Ÿ</h2><h3 id="1-1-æ•´ç†ä»£ç "><a href="#1-1-æ•´ç†ä»£ç " class="headerlink" title="1.1 æ•´ç†ä»£ç "></a>1.1 æ•´ç†ä»£ç </h3><p>æˆ‘ä»¬åœ¨åº”ç”¨ MVVM è®¾è®¡æ€æƒ³å‰éœ€è¦æ¸…ç†ä¸€ä¸‹ä»£ç ã€‚</p>
<p>ç§»é™¤ä»¥ä¸‹éƒ¨åˆ†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="meta">@State</span> <span class="keyword">var</span> cardCount: <span class="type">Int</span> <span class="operator">=</span> <span class="number">4</span></span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> cardCountAdjsters: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">HStack</span> &#123;</span><br><span class="line">        cardRemover</span><br><span class="line">        <span class="type">Spacer</span>()</span><br><span class="line">        cardAdder</span><br><span class="line">    &#125;</span><br><span class="line">    .imageScale(.large)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">cardCountAdjsters</span>(<span class="params">by</span> <span class="params">offset</span>: <span class="type">Int</span>, <span class="params">symbol</span>: <span class="type">String</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">Button</span>(action: &#123;</span><br><span class="line">        cardCount <span class="operator">+=</span> offset</span><br><span class="line">    &#125;, label: &#123;</span><br><span class="line">        <span class="type">Image</span>(systemName: symbol)</span><br><span class="line">    &#125;)</span><br><span class="line">    .disabled(cardCount <span class="operator">+</span> offset <span class="operator">&lt;</span> <span class="number">1</span> <span class="operator">||</span> cardCount <span class="operator">+</span> offset <span class="operator">&gt;</span> emojis.count)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cardRemover: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> cardCountAdjsters(by: <span class="operator">-</span><span class="number">1</span>, symbol: <span class="string">&quot;rectangle.stack.badge.minus.fill&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cardAdder: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> cardCountAdjsters(by: <span class="number">1</span>, symbol: <span class="string">&quot;rectangle.stack.badge.plus.fill&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ”¹æˆä»¥ä¸‹éƒ¨åˆ†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="operator">...</span></span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">ScrollView</span> &#123;</span><br><span class="line">                cards</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">Spacer</span>()</span><br><span class="line">            cardCountAdjsters</span><br><span class="line">        &#125;</span><br><span class="line"><span class="operator">...</span></span><br><span class="line"><span class="comment">// change to</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">        <span class="type">ScrollView</span> &#123;</span><br><span class="line">            cards</span><br><span class="line">        &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">            <span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span>cardCount, id: \.<span class="keyword">self</span>) &#123; index <span class="keyword">in</span></span><br><span class="line"><span class="comment">// change to</span></span><br><span class="line">            <span class="type">ForEach</span>(emojis.indices, id: \.<span class="keyword">self</span>) &#123; index <span class="keyword">in</span></span><br></pre></td></tr></table></figure>

<h3 id="1-2-æ–°å»ºä¸€ä¸ª-Model-æ–‡ä»¶"><a href="#1-2-æ–°å»ºä¸€ä¸ª-Model-æ–‡ä»¶" class="headerlink" title="1.2 æ–°å»ºä¸€ä¸ª Model æ–‡ä»¶"></a>1.2 æ–°å»ºä¸€ä¸ª Model æ–‡ä»¶</h3><p><code>File</code> -&gt; <code>New</code> -&gt; <code>File</code> -&gt; <code>Swift File</code>, å¹¶å°†æ–‡ä»¶å‘½åä¸º MemorizeGame</p>
<p><img src="/2024/12/09/Stanford-cs193p-04%EF%BD%9CMVVM-%E5%BA%94%E7%94%A8/cs193p04_newFile.png"></p>
<p><strong>å®ç°ï¼ˆå†™ï¼‰ä¸€ä¸ª MemorizeGame (Model):</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MemoryGame</span>&lt;<span class="type">CardContent</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">var</span> cards: <span class="type">Array</span>&lt;<span class="type">Card</span>&gt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">choose</span>(<span class="params">card</span>: <span class="type">Card</span>) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Card</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> isFaceUp: <span class="type">Bool</span></span><br><span class="line">        <span class="keyword">var</span> isMatched: <span class="type">Bool</span></span><br><span class="line">        <span class="keyword">var</span> content: <span class="type">CardContent</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-3-æ–°å»ºä¸€ä¸ª-ViewModel-æ–‡ä»¶"><a href="#1-3-æ–°å»ºä¸€ä¸ª-ViewModel-æ–‡ä»¶" class="headerlink" title="1.3 æ–°å»ºä¸€ä¸ª ViewModel æ–‡ä»¶"></a>1.3 æ–°å»ºä¸€ä¸ª ViewModel æ–‡ä»¶</h3><p><code>File</code> -&gt; <code>New</code> -&gt; <code>File</code> -&gt; <code>Swift File</code>, then named as EmojiMemoryGame</p>
<p><strong>å®ç°ï¼ˆå†™ï¼‰ä¸€ä¸ª MemorizeGame (ViewModel):</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiMemoryGame</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> model: <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-ç¬¬å››èŠ‚è¯¾"><a href="#2-ç¬¬å››èŠ‚è¯¾" class="headerlink" title="2. ç¬¬å››èŠ‚è¯¾"></a>2. ç¬¬å››èŠ‚è¯¾</h2><h3 id="2-1-è®¿é—®æ§åˆ¶ï¼šå®ç°ç”±éƒ¨åˆ†åˆ†ç¦»è½¬ä¸ºå…¨éƒ¨åˆ†ç¦»"><a href="#2-1-è®¿é—®æ§åˆ¶ï¼šå®ç°ç”±éƒ¨åˆ†åˆ†ç¦»è½¬ä¸ºå…¨éƒ¨åˆ†ç¦»" class="headerlink" title="2.1 è®¿é—®æ§åˆ¶ï¼šå®ç°ç”±éƒ¨åˆ†åˆ†ç¦»è½¬ä¸ºå…¨éƒ¨åˆ†ç¦»"></a>2.1 è®¿é—®æ§åˆ¶ï¼šå®ç°ç”±éƒ¨åˆ†åˆ†ç¦»è½¬ä¸ºå…¨éƒ¨åˆ†ç¦»</h3><h4 id="2-1-1-éƒ¨åˆ†åˆ†ç¦»"><a href="#2-1-1-éƒ¨åˆ†åˆ†ç¦»" class="headerlink" title="2.1.1 éƒ¨åˆ†åˆ†ç¦»"></a>2.1.1 éƒ¨åˆ†åˆ†ç¦»</h4><p>æˆ‘ä»¬æ¥çœ‹çœ‹ MVVM æ–‡ä»¶:</p>
<p><strong>View:</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ContentView.swift</span></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> viewModel: <span class="type">EmojiMemoryGame</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> emojis <span class="operator">=</span> [<span class="string">&quot;ğŸ‘»&quot;</span>, <span class="string">&quot;ğŸƒ&quot;</span>, <span class="string">&quot;ğŸ•·ï¸&quot;</span>, <span class="string">&quot;ğŸ‰&quot;</span>,<span class="string">&quot;ğŸ˜„&quot;</span>, <span class="string">&quot;ğŸ˜&quot;</span>, <span class="string">&quot;ğŸ’©&quot;</span>]</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Model:</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// MemoryGame.swift</span></span><br><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MemoryGame</span>&lt;<span class="type">CardContent</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">var</span> cards: <span class="type">Array</span>&lt;<span class="type">Card</span>&gt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">choose</span>(<span class="params">card</span>: <span class="type">Card</span>) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ViewModel:</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// EmojiMemoryGame.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiMemoryGame</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> model: <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”±äºæˆ‘ä»¬ç°åœ¨ä»ç„¶å¯ä»¥åœ¨ <code>View</code> ä¸­é€šè¿‡ <code>viewModel.model.xxx</code> ç›´æ¥ä» View è®¿é—® Modelï¼Œå› æ­¤è¿™æ˜¯éƒ¨åˆ†åˆ†ç¦»æ¨¡å¼ã€‚</p>
<h4 id="2-1-2-å®Œå…¨åˆ†ç¦»"><a href="#2-1-2-å®Œå…¨åˆ†ç¦»" class="headerlink" title="2.1.2 å®Œå…¨åˆ†ç¦»"></a>2.1.2 å®Œå…¨åˆ†ç¦»</h4><p>å¦‚æœæˆ‘ä»¬æƒ³é¿å… View ç›´æ¥è®¿é—® Modelï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å…³é”®å­— <code>private</code> æ¥å®ç°ã€‚è¿™è¢«ç§°ä¸ºå®Œå…¨åˆ†ç¦»ã€‚</p>
<p>ä¿®æ”¹ <strong>ViewModel</strong>:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// EmojiMemoryGame.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiMemoryGame</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> model: <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‚£æˆ‘ä»¬ç°åœ¨å¦‚ä½•è®¿é—® model å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦ä¿®æ”¹ ViewModel è®©å®ƒå¯ä»¥è¢«è®¿é—®ã€‚</p>
<p>è¿™æ˜¯ä¿®æ”¹è¿‡åçš„ <strong>ViewModel</strong>:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//EmojiMemoryGame.swift</span></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiMemoryGame</span> &#123;</span><br><span class="line">	<span class="comment">// private ä½¿å¾— View æ— æ³•ç›´æ¥è®¿é—® modelï¼›è¿™é‡Œæ„å‘³ç€åœ¨ ViewModel ä¸­ä½¿ç”¨ Model</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> model: <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// åœ¨ ViewModel ä¸­è®¿é—® model ä¸­çš„æ•°æ® cards</span></span><br><span class="line">    <span class="keyword">var</span> cards: <span class="type">Array</span>&lt;<span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;.<span class="type">Card</span>&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> model.cards</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// åœ¨ ViewModel ä¸­å®ç°å¯¹ model ä¸­çš„ card çš„ choose æ“ä½œ</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">choose</span>(<span class="params">card</span>: <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;.<span class="type">Card</span>) &#123;</span><br><span class="line">        model.choose(card: card)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="private-set"><a href="#private-set" class="headerlink" title="private(set)"></a>private(set)</h5><p>å¯¹åº”çš„åœ¨ <code>Model</code> ä¸­åº”è¯¥æ€ä¹ˆä¿®æ”¹å‘¢ï¼Ÿ</p>
<p><code>private(set)</code> å…³é”®å­—å…è®¸å…¶ä»–å‡½æ•°åªèƒ½è¯»ï¼Œä½†ä¸å¯ä»¥ä¿®æ”¹ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// MemoryGame.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MemoryGame</span>&lt;<span class="type">CardContent</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">private(set)</span> <span class="keyword">var</span> cards: <span class="type">Array</span>&lt;<span class="type">Card</span>&gt;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-ViewModel-æ–¹æ³•è¡¥å……å’Œ-Model-å¯¹åº”ä¿®æ”¹"><a href="#2-2-ViewModel-æ–¹æ³•è¡¥å……å’Œ-Model-å¯¹åº”ä¿®æ”¹" class="headerlink" title="2.2 ViewModel æ–¹æ³•è¡¥å……å’Œ Model å¯¹åº”ä¿®æ”¹"></a>2.2 ViewModel æ–¹æ³•è¡¥å……å’Œ Model å¯¹åº”ä¿®æ”¹</h3><h4 id="2-2-1-Model-çš„-choose-å‡½æ•°å£°æ˜å’Œ-ViewModel-çš„-choose-å‡½æ•°å£°æ˜è°ƒç”¨"><a href="#2-2-1-Model-çš„-choose-å‡½æ•°å£°æ˜å’Œ-ViewModel-çš„-choose-å‡½æ•°å£°æ˜è°ƒç”¨" class="headerlink" title="2.2.1 Model çš„ choose å‡½æ•°å£°æ˜å’Œ ViewModel çš„ choose å‡½æ•°å£°æ˜è°ƒç”¨"></a>2.2.1 <code>Model</code> çš„ choose å‡½æ•°å£°æ˜å’Œ <code>ViewModel</code> çš„ choose å‡½æ•°å£°æ˜è°ƒç”¨</h4><h5 id="å¿½ç•¥å‡½æ•°æ ‡ç­¾-No-External-Name"><a href="#å¿½ç•¥å‡½æ•°æ ‡ç­¾-No-External-Name" class="headerlink" title="å¿½ç•¥å‡½æ•°æ ‡ç­¾ (No External Name)"></a>å¿½ç•¥å‡½æ•°æ ‡ç­¾ (No External Name)</h5><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// MemoryGame.swift</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">choose</span>(<span class="keyword">_</span> <span class="params">card</span>: <span class="type">Card</span>) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// EmojiMemoryGame.swift</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">choose</span>(<span class="keyword">_</span> <span class="params">card</span>: <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;.<span class="type">Card</span>) &#123;</span><br><span class="line">        model.choose(card)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><code>choose</code>å‡½æ•°åœ¨è¢«å¤–éƒ¨è°ƒç”¨åä¸éœ€è¦æœ‰å¤–éƒ¨ç§°å‘¼ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬åœ¨ä¸€äº›æƒ…å†µä¸‹ä¸éœ€è¦çœç•¥å¤–éƒ¨ç§°å‘¼ï¼š</p>
<ol>
<li>æ•°æ®ç±»å‹æ˜¯å­—ç¬¦ä¸²ï¼Œæ•´æ•°ï¼Œæˆ–ä¸ç¡®å®šçš„ã€‚</li>
<li>æ·»åŠ å¤–éƒ¨ç§°å‘¼å¯ä»¥å¢åŠ ä»£ç çš„å¯è¯»æ€§ã€‚</li>
</ol>
<h4 id="2-2-2-Model-ç»“æ„ä½“çš„åˆå§‹åŒ–å™¨å’Œ-ViewModel-ç±»åˆå§‹åŒ–"><a href="#2-2-2-Model-ç»“æ„ä½“çš„åˆå§‹åŒ–å™¨å’Œ-ViewModel-ç±»åˆå§‹åŒ–" class="headerlink" title="2.2.2 Model ç»“æ„ä½“çš„åˆå§‹åŒ–å™¨å’Œ ViewModel ç±»åˆå§‹åŒ–"></a>2.2.2 <code>Model</code> ç»“æ„ä½“çš„åˆå§‹åŒ–å™¨å’Œ <code>ViewModel</code> ç±»åˆå§‹åŒ–</h4><p>ç±»åˆå§‹å€¼è®¾å®šé¡¹æ²¡æœ‰å‚æ•°ï¼Œå¹¶ä¸”ä»…å½“æ‰€æœ‰å˜é‡éƒ½æœ‰é»˜è®¤å€¼æ—¶æ‰èµ·ä½œç”¨ã€‚ æˆ‘ä»¬æ¥ä¸‹æ¥å¼€å§‹å†™ <strong>ViewModel</strong> (EmojiMemoryGame.swift) åˆå§‹åŒ–å‡½æ•°ã€‚</p>
<p>å¦å¤–ï¼Œæˆ‘ä»¬æƒ³è¦é€šè¿‡ç”¨ <code>numberOfPairsOfCards</code> å’Œ <code>cardContentFactory</code> æ¥åˆå§‹åŒ– <strong>Model</strong> (MemoryGame.swift)ã€‚å› æ­¤æˆ‘ä»¬å…ˆéœ€è¦è‡ªå®šä¹‰ <strong>Model</strong> çš„åˆå§‹åŒ–å‡½æ•°ã€‚ï¼ˆè¿™ä¸¤ä¸ªå‚æ•°åˆ†åˆ«ä»£è¡¨å¡ç‰‡æ•°ï¼Œä»¥åŠé€šè¿‡å¡ç‰‡ç´¢å¼•è·å–å¡ç‰‡å†…å®¹çš„å‡½æ•°ï¼‰</p>
<h5 id="Model-åˆå§‹åŒ–å™¨"><a href="#Model-åˆå§‹åŒ–å™¨" class="headerlink" title="Model åˆå§‹åŒ–å™¨"></a><code>Model</code> åˆå§‹åŒ–å™¨</h5><h6 id="1-For-å¾ªç¯"><a href="#1-For-å¾ªç¯" class="headerlink" title="1. For å¾ªç¯"></a><strong>1. For å¾ªç¯</strong></h6><p>æˆ‘ä»¬æƒ³è¦å¯¹æ¯å¼ åŸå¡ç‰‡ï¼Œå¡ç‰‡ç»„ä¸­éƒ½ä¼šæœ‰ä¸¤å¼ å­˜åœ¨ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>_</code> æ¥å¿½ç•¥å¾ªç¯çš„ç´¢å¼•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// MemoryGame.swift</span></span><br><span class="line"><span class="keyword">for</span> pairIndex <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>numberOfPairsOfCards &#123;</span><br><span class="line">    cards.append(<span class="type">XXXX</span>)</span><br><span class="line">    cards.append(<span class="type">XXXX</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Use _ to ignore the pairIndex</span></span><br><span class="line"><span class="keyword">for</span> <span class="keyword">_</span> <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>numberOfPairsOfCards &#123;</span><br><span class="line">    cards.append(<span class="type">XXXX</span>)</span><br><span class="line">    cards.append(<span class="type">XXXX</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>XXXX</code> ä»£è¡¨çš„æ˜¯ <code>cardContentFactory</code> é€šè¿‡ <code>pairIndex</code> ç´¢å¼•è·å–åˆ°çš„å¡ç‰‡å†…å®¹ã€‚ä¸‹è¾¹ä¼šè®²å¦‚ä½•ä½¿ç”¨é—­åŒ…æ¥å®ç°è¯¥å‡½æ•°ã€‚</p>
<h6 id="2-é—­åŒ…è¯­æ³•"><a href="#2-é—­åŒ…è¯­æ³•" class="headerlink" title="2. é—­åŒ…è¯­æ³•"></a><strong>2. é—­åŒ…è¯­æ³•</strong></h6><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// MemoryGame.swift</span></span><br><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MemoryGame</span>&lt;<span class="type">CardContent</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">private(set)</span> <span class="keyword">var</span> cards: <span class="type">Array</span>&lt;<span class="type">Card</span>&gt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">numberOfPairsOfCards</span>: <span class="type">Int</span>, <span class="params">cardContentFactory</span>: (<span class="type">Int</span>) -&gt; <span class="type">CardContent</span>) &#123;</span><br><span class="line">        cards <span class="operator">=</span> []</span><br><span class="line"></span><br><span class="line">        <span class="comment">// add numberOfParisOfCards x 2 cards</span></span><br><span class="line">        <span class="keyword">for</span> pairIndex <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>numberOfPairsOfCards &#123;</span><br><span class="line">            <span class="keyword">let</span> content <span class="operator">=</span> cardContentFactory(pairIndex)</span><br><span class="line">            cards.append(<span class="type">Card</span>(content: content))</span><br><span class="line">            cards.append(<span class="type">Card</span>(content: content))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="åœ¨-ViewModel-ä¸­åˆå§‹åŒ–-Model-å˜é‡"><a href="#åœ¨-ViewModel-ä¸­åˆå§‹åŒ–-Model-å˜é‡" class="headerlink" title="åœ¨ ViewModel ä¸­åˆå§‹åŒ– Model å˜é‡"></a>åœ¨ <code>ViewModel</code> ä¸­åˆå§‹åŒ– <code>Model</code> å˜é‡</h5><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åˆå§‹åŒ– <code>model</code> å˜é‡ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// EmojiMemoryGame.swift</span></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">func</span> <span class="title function_">createCardContent</span>(<span class="params">forPairAtIndex</span> <span class="params">index</span>: <span class="type">Int</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="string">&quot;ğŸ‘»&quot;</span>, <span class="string">&quot;ğŸƒ&quot;</span>, <span class="string">&quot;ğŸ•·ï¸&quot;</span>, <span class="string">&quot;ğŸ‰&quot;</span>,<span class="string">&quot;ğŸ˜„&quot;</span>, <span class="string">&quot;ğŸ˜&quot;</span>, <span class="string">&quot;ğŸ’©&quot;</span>][index]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiMemoryGame</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> model <span class="operator">=</span> <span class="type">MemoryGame</span>(</span><br><span class="line">        numberOfPairsOfCards: <span class="number">4</span>,</span><br><span class="line">        cardContentFactory: createCardContent</span><br><span class="line">    )</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>MemoryGame</code> åˆå§‹åŒ–å™¨çš„ç¬¬äºŒä¸ªå‚æ•°éœ€è¦ä¼ å…¥ä¸€ä¸ªæ¥å—æ•´æ•°å¹¶è¿”å›å­—ç¬¦ä¸²çš„å‡½æ•°ã€‚<code>createCardContent</code> æ˜¯ä¸€ä¸ªæ¥å—æ•´æ•°å¹¶è¿”å›å­—ç¬¦ä¸²çš„å‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†å®ƒä¼ å…¥ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong>é—­åŒ…è¯­æ³•</strong>è®©å®ƒæ›´å˜å¾—æ›´ç®€æ´ä¸€äº›ï¼šå°† <code>createCardContent</code> å‡½æ•°å†…å®¹ç§»å…¥ç±»åˆå§‹åŒ–å‚æ•° <code>cardContentFactory</code> åï¼Œå¹¶å°†å‡½æ•°å¤§æ‹¬å· <code>&#123;&#125;</code> æ›¿æ¢ä¸º <code>in</code>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// EmojiMemoryGame.swift</span></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiMemoryGame</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> model <span class="operator">=</span> <span class="type">MemoryGame</span>(</span><br><span class="line">        numberOfPairsOfCards: <span class="number">4</span>,</span><br><span class="line">        cardContentFactory: &#123; (index: <span class="type">Int</span>) -&gt; <span class="type">String</span> <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">return</span> [<span class="string">&quot;ğŸ‘»&quot;</span>, <span class="string">&quot;ğŸƒ&quot;</span>, <span class="string">&quot;ğŸ•·ï¸&quot;</span>, <span class="string">&quot;ğŸ‰&quot;</span>,<span class="string">&quot;ğŸ˜„&quot;</span>, <span class="string">&quot;ğŸ˜&quot;</span>, <span class="string">&quot;ğŸ’©&quot;</span>][index]</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line"><span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”±äº<strong>ç±»å‹æ¨æ–­</strong>ï¼Œè¾“å…¥å‚æ•°ä¸º <code>Int</code> ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥çœç•¥ç±»å‹å£°æ˜ï¼Œå¦‚ä¸‹ï¼š</p>
<blockquote>
<p>å¯æŒ‰ä½ optionï¼Œå¹¶ click æŸ¥çœ‹ <code>Index</code> æ¨æ–­çš„ç±»å‹ä¸º <code>Int</code>ã€‚ç±»å‹æ¨æ–­åœ¨ç¬¬äºŒèŠ‚æœ‰è¯´æ˜ï¼š<a href="/2024/11/21/Stanford-cs193p-02%EF%BD%9CMore-SwiftUI/" title="Stanford cs193p 02 | More SwiftUI">Stanford cs193p 02 | More SwiftUI</a></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// EmojiMemoryGame.swift</span></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiMemoryGame</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> model <span class="operator">=</span> <span class="type">MemoryGame</span>(</span><br><span class="line">        numberOfPairsOfCards: <span class="number">4</span>,</span><br><span class="line">        cardContentFactory: &#123; index <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">return</span> [<span class="string">&quot;ğŸ‘»&quot;</span>, <span class="string">&quot;ğŸƒ&quot;</span>, <span class="string">&quot;ğŸ•·ï¸&quot;</span>, <span class="string">&quot;ğŸ‰&quot;</span>,<span class="string">&quot;ğŸ˜„&quot;</span>, <span class="string">&quot;ğŸ˜&quot;</span>, <span class="string">&quot;ğŸ’©&quot;</span>][index]</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line"><span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŒæ—¶ï¼Œç”±äº <code>cardContentFactory</code> æ˜¯è¿™ä¸ªå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong>å°¾éšé—­åŒ…</strong>ï¼š</p>
<blockquote>
<p>å°¾éšé—­åŒ…åœ¨ç¬¬äºŒèŠ‚ç¬”è®°ä¸­æœ‰è¯´æ˜ï¼š<a href="/2024/11/21/Stanford-cs193p-02%EF%BD%9CMore-SwiftUI/" title="Stanford cs193p 02 | More SwiftUI">Stanford cs193p 02 | More SwiftUI</a></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// EmojiMemoryGame.swift</span></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiMemoryGame</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> model <span class="operator">=</span> <span class="type">MemoryGame</span>(numberOfPairsOfCards: <span class="number">4</span>) &#123; index <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">return</span> [<span class="string">&quot;ğŸ‘»&quot;</span>, <span class="string">&quot;ğŸƒ&quot;</span>, <span class="string">&quot;ğŸ•·ï¸&quot;</span>, <span class="string">&quot;ğŸ‰&quot;</span>,<span class="string">&quot;ğŸ˜„&quot;</span>, <span class="string">&quot;ğŸ˜&quot;</span>, <span class="string">&quot;ğŸ’©&quot;</span>][index]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="1-0"><a href="#1-0" class="headerlink" title="1. $0"></a><strong>1. $0</strong></h6><p>$0 æ˜¯ä¸€ä¸ªç”¨äºè¡¨ç¤ºç¬¬ä¸€ä¸ªå‚æ•°çš„ç‰¹æ®Šå ä½ç¬¦ï¼Œè¿™é‡Œå¯ä½¿ç”¨ <code>$0</code> æ›¿ä»£ <code>index</code>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// EmojiMemoryGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> model <span class="operator">=</span> <span class="type">MemoryGame</span>(numberOfPairsOfCards: <span class="number">4</span>) &#123; index <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">return</span> [<span class="string">&quot;ğŸ‘»&quot;</span>, <span class="string">&quot;ğŸƒ&quot;</span>, <span class="string">&quot;ğŸ•·ï¸&quot;</span>, <span class="string">&quot;ğŸ‰&quot;</span>,<span class="string">&quot;ğŸ˜„&quot;</span>, <span class="string">&quot;ğŸ˜&quot;</span>, <span class="string">&quot;ğŸ’©&quot;</span>][index]</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br><span class="line"><span class="comment">// If we use $0</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> model <span class="operator">=</span> <span class="type">MemoryGame</span>(numberOfPairsOfCards: <span class="number">4</span>) &#123; <span class="variable">$0</span></span><br><span class="line">        <span class="keyword">return</span> [<span class="string">&quot;ğŸ‘»&quot;</span>, <span class="string">&quot;ğŸƒ&quot;</span>, <span class="string">&quot;ğŸ•·ï¸&quot;</span>, <span class="string">&quot;ğŸ‰&quot;</span>,<span class="string">&quot;ğŸ˜„&quot;</span>, <span class="string">&quot;ğŸ˜&quot;</span>, <span class="string">&quot;ğŸ’©&quot;</span>][<span class="variable">$0</span>]</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<h6 id="2-é™æ€å˜é‡å’Œå‡½æ•°"><a href="#2-é™æ€å˜é‡å’Œå‡½æ•°" class="headerlink" title="2. é™æ€å˜é‡å’Œå‡½æ•°"></a><strong>2. é™æ€å˜é‡å’Œå‡½æ•°</strong></h6><p>å€˜è‹¥ï¼Œæˆ‘ä»¬è¿˜æƒ³ç®€åŒ–è¿™ä¸ªç±»çš„åˆå§‹åŒ–ï¼Œæƒ³å°†è¿™ä¸ªè¡¨æƒ…æ•°ç»„æå–ä¸ºä¸€ä¸ªå˜é‡ <code>emojis</code> ä½¿ç”¨ï¼Œ ä»¥ä¸‹ä»£ç  XCode ä¼šæŠ¥é”™ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGame.swift</span></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiMemoryGame</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> emojis <span class="operator">=</span> [<span class="string">&quot;ğŸ‘»&quot;</span>, <span class="string">&quot;ğŸƒ&quot;</span>, <span class="string">&quot;ğŸ•·ï¸&quot;</span>, <span class="string">&quot;ğŸ‰&quot;</span>,<span class="string">&quot;ğŸ˜„&quot;</span>, <span class="string">&quot;ğŸ˜&quot;</span>, <span class="string">&quot;ğŸ’©&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> model <span class="operator">=</span> <span class="type">MemoryGame</span>(numberOfPairsOfCards: <span class="number">4</span>) &#123; pairIndex <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">return</span> emojis[pairIndex]</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>é”™è¯¯ä¿¡æ¯æ˜¯ â€œCannot use instance member â€˜emojisâ€™ within property initializer; property initializers run before â€˜selfâ€™ is availableâ€. <code>emojis</code> å’Œ <code>model</code> è¢«ç§°ä¸º property initializerã€‚<strong>ç”±äº property initialized çš„è¿è¡Œé¡ºåºæ˜¯ä¸ç¡®å®šçš„ (ä¸æ˜¯æºä»£ç çš„é¡ºåº)ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå…ˆåˆå§‹åŒ– modelï¼Œä½†æ­¤æ—¶ emojis è¿˜æœªè¢«åˆå§‹åŒ–ï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨ä¸€ä¸ªåˆå§‹åŒ–å˜é‡å»åˆå§‹åŒ–å¦ä¸€ä¸ªã€‚</strong></p>
<p>é‚£ä¹ˆæ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</p>
<p><strong>ç¬¬ä¸€ç§æ–¹æ³•ï¼šå°† emojis è®¾ç½®ä¸ºä¸€ä¸ªå…¨å±€å˜é‡</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// EmojiMemoryGame.swift</span></span><br><span class="line"><span class="keyword">let</span> emojis <span class="operator">=</span> [<span class="string">&quot;ğŸ‘»&quot;</span>, <span class="string">&quot;ğŸƒ&quot;</span>, <span class="string">&quot;ğŸ•·ï¸&quot;</span>, <span class="string">&quot;ğŸ‰&quot;</span>,<span class="string">&quot;ğŸ˜„&quot;</span>, <span class="string">&quot;ğŸ˜&quot;</span>, <span class="string">&quot;ğŸ’©&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiMemoryGame</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> model <span class="operator">=</span> <span class="type">MemoryGame</span>(numberOfPairsOfCards: <span class="number">4</span>) &#123; pairIndex <span class="keyword">in</span></span><br><span class="line">        <span class="comment">// EmojiMemoryGame.emojis[pairIndex]</span></span><br><span class="line">        <span class="keyword">return</span> emojis[pairIndex]</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>ä½†è¿™ä¼šæ±¡æŸ“å‘½åç©ºé—´ï¼Œå¯èƒ½ä¼šä¸å…¶ä»–å˜é‡æˆ–å¸¸é‡å‘ç”Ÿå‘½åå†²çªï¼Œéš¾ä»¥è°ƒè¯•ã€‚è€Œä¸”å…¨å±€å˜é‡å¯ä»¥åœ¨ä»»æ„ä½ç½®è¢«ä¿®æ”¹ï¼Œ<code>View</code> å’Œ <code>Model</code> ä¸­éƒ½å¯ä»¥ä¿®æ”¹ï¼Œå¯¼è‡´ä»£ç å¾ˆéš¾ç†è§£ï¼Œå› ä¸ºå˜é‡çš„çŠ¶æ€å¯èƒ½åœ¨ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹è¢«ä¿®æ”¹ã€‚</p>
<p>æ‰€ä»¥ä¸ºäº†ä½¿å®ƒå…·æœ‰å¯å°è£…æ€§ï¼Œè¿˜æ˜¯å¾—å°†å®ƒæ”¾å›ç±» <code>class</code> ä¸­ã€‚</p>
<p><strong>ç¬¬äºŒç§æ–¹æ³•ï¼šä½¿ç”¨å…³é”®å­— <code>static</code> æ¥è§£å†³</strong></p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…³é”®å­— <code>static</code> æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¿™ä¸ªå…³é”®å­—å¯ä»¥è®© <code>emojis</code> å˜ä¸ºå…¨å±€å˜é‡ (äº‹å®ä¸Šè¢«ç§°ä¸º type variable) ä½†ä»…é™äºè¿™ä¸ªç±»çš„å†…éƒ¨è®¿é—®ã€‚è€Œä¸”å…¨å±€å˜é‡ä¼šè¢«ä¼˜å…ˆåˆå§‹åŒ–ï¼Œä¸ç”¨æ‹…å¿ƒåˆå§‹åŒ–å˜é‡çš„é¡ºåºé—®é¢˜ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// EmojiMemoryGame.swift</span></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiMemoryGame</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> emojis <span class="operator">=</span> [<span class="string">&quot;ğŸ‘»&quot;</span>, <span class="string">&quot;ğŸƒ&quot;</span>, <span class="string">&quot;ğŸ•·ï¸&quot;</span>, <span class="string">&quot;ğŸ‰&quot;</span>,<span class="string">&quot;ğŸ˜„&quot;</span>, <span class="string">&quot;ğŸ˜&quot;</span>, <span class="string">&quot;ğŸ’©&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> model <span class="operator">=</span> <span class="type">MemoryGame</span>(numberOfPairsOfCards: <span class="number">4</span>) &#123; pairIndex <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">return</span> <span class="type">EmojiMemoryGame</span>.emojis[pairIndex]</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p><code>private</code> åˆ™å¯ä»¥è®²è¿™ä¸ªå˜é‡é™åˆ¶åœ¨ <code>class</code> å†…éƒ¨ä½¿ç”¨ï¼Œå¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®æˆ–ä¿®æ”¹ã€‚æ­¤æ—¶ä¸å†éœ€è¦ <code>EmojiMemoryGame</code> æ¥è°ƒç”¨ <code>emojis</code>ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGame.swift</span></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiMemoryGame</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">let</span> emojis <span class="operator">=</span> [<span class="string">&quot;ğŸ‘»&quot;</span>, <span class="string">&quot;ğŸƒ&quot;</span>, <span class="string">&quot;ğŸ•·ï¸&quot;</span>, <span class="string">&quot;ğŸ‰&quot;</span>,<span class="string">&quot;ğŸ˜„&quot;</span>, <span class="string">&quot;ğŸ˜&quot;</span>, <span class="string">&quot;ğŸ’©&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> model <span class="operator">=</span> <span class="type">MemoryGame</span>(numberOfPairsOfCards: <span class="number">4</span>) &#123; pairIndex <span class="keyword">in</span></span><br><span class="line">        <span class="comment">// EmojiMemoryGame.emojis[pairIndex]</span></span><br><span class="line">        <span class="keyword">return</span> emojis[pairIndex]</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„ï¼šç°åœ¨ <code>emojis</code> çš„å…¨åå…¶å®æ˜¯ <code>EmojiMemoryGame.emojis</code>.</p>
</blockquote>
<p>æˆ‘ä»¬ç°åœ¨å°†ä¸Šé¢çš„å˜é‡å˜æˆä¸€ä¸ªå‡½æ•°ï¼Œç„¶åå­˜åœ¨ model é‡Œï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> model <span class="operator">=</span> createMemoryGame()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">createMemoryGame</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">MemoryGame</span>(numberOfPairsOfCards: <span class="number">4</span>) &#123; pairIndex <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">return</span> emojis[pairIndex]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>ä¼šæœ‰ä¸€å †é”™è¯¯ä¿¡æ¯ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦å°†å‡½æ•°æ ‡è®°ä¸º <code>static</code> å¹¶å¢åŠ è¿”å›ç±»å‹ã€‚<strong>Swift æ˜¯ä¸å¯ä»¥æ¨æ–­è¿”å›ç±»å‹çš„ã€‚</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">createMemoryGame</span>() -&gt; <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">MemoryGame</span>(numberOfPairsOfCards: <span class="number">4</span>) &#123; pairIndex <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">return</span> emojis[pairIndex]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> model <span class="operator">=</span> createMemoryGame()</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<h6 id="3-â€œ-thingâ€"><a href="#3-â€œ-thingâ€" class="headerlink" title="3. â€œ.thingâ€"></a><strong>3. â€œ.thingâ€</strong></h6><blockquote>
<p>æ­¤å¤„ <code>.thing</code> æ˜¯è¡¥å……è¯´æ˜ <code>privat static</code>ï¼Œå¹¶ä¸æ¶‰åŠ <code>ViewModel</code> å’Œ <code>Model</code> çš„å®ç°</p>
</blockquote>
<p>å½“æˆ‘ä»¬çœ‹åˆ° â€œ.ä¸€ä¸ªä¸œè¥¿â€æ—¶, å®ƒåªæœ‰å¯èƒ½æ˜¯é™æ€å˜é‡æˆ–è€…æšä¸¾ç±»å‹ <code>enum</code>ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ContentView.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line"><span class="type">LazyVGrid</span>(columns: [<span class="type">GridItem</span>(.adaptive(minimum: <span class="number">85</span>))]) &#123;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">&#125;</span><br><span class="line">.foregroundColor(.orange)</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åœ¨ä»£ç ä¸­å‘ç°äº†ä¸€ä¸ª <code>.orange</code> ï¼Œå®ƒå®é™…ä¸ <code>Color.orange</code> çš„å«ä¹‰å®Œå…¨ç›¸åŒã€‚æˆ‘ä»¬å†æ‰“å¼€ Swift çš„å¼€å‘è€…æ–‡æ¡£ï¼š<br><img src="/2024/12/09/Stanford-cs193p-04%EF%BD%9CMVVM-%E5%BA%94%E7%94%A8/cs193p04_static-let-orange.jpg"></p>
<p><code>.orange</code>ã€<code>.pink</code> å’Œ <code>.purple</code> éƒ½æ˜¯é™æ€ <code>static</code> å˜é‡ã€‚</p>
<h4 id="2-2-3-é—®é¢˜è§£å†³ï¼šæ•°ç»„ä¸èƒ½è¶…å‡ºç´¢å¼•"><a href="#2-2-3-é—®é¢˜è§£å†³ï¼šæ•°ç»„ä¸èƒ½è¶…å‡ºç´¢å¼•" class="headerlink" title="2.2.3 é—®é¢˜è§£å†³ï¼šæ•°ç»„ä¸èƒ½è¶…å‡ºç´¢å¼•"></a>2.2.3 é—®é¢˜è§£å†³ï¼šæ•°ç»„ä¸èƒ½è¶…å‡ºç´¢å¼•</h4><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">createMemoryGame</span>() -&gt; <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">MemoryGame</span>(numberOfPairsOfCards: <span class="number">4</span>) &#123; pairIndex <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">return</span> emojis[pairIndex]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬è®¿é—®æ•°ç»„æ—¶ä¸èƒ½è¶…å‡ºç´¢å¼•ï¼Œå› æ­¤éœ€è¦æ–°å¢ä¸€äº›é€»è¾‘ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">createMemoryGame</span>() -&gt; <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">MemoryGame</span>(numberOfPairsOfCards: <span class="number">4</span>) &#123; pairIndex <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">if</span> emojis.indices.contains(pairIndex) &#123;</span><br><span class="line">                <span class="keyword">return</span> emojis[pairIndex]</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;â‰ï¸&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åŒæ—¶å¸Œæœ›æœ‰è‡³å°‘ 4 å¼ å¡ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  MemorizeGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">numberOfPairsOfCards</span>: <span class="type">Int</span>, <span class="params">cardContentFactory</span>: (<span class="type">Int</span>) -&gt; <span class="type">CardContent</span>) &#123;</span><br><span class="line">        cards <span class="operator">=</span> []</span><br><span class="line">        <span class="comment">// add numberOfParisOfCards x 2 cards</span></span><br><span class="line">        <span class="keyword">for</span> pairIndex <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span><span class="built_in">max</span>(<span class="number">2</span>, numberOfPairsOfCards) &#123;</span><br><span class="line">            <span class="keyword">let</span> content <span class="operator">=</span> cardContentFactory(pairIndex)</span><br><span class="line">            cards.append(<span class="type">Card</span>(content: content))</span><br><span class="line">            cards.append(<span class="type">Card</span>(content: content))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-åœ¨-View-ä¸­ä½¿ç”¨-ViewModel"><a href="#2-3-åœ¨-View-ä¸­ä½¿ç”¨-ViewModel" class="headerlink" title="2.3 åœ¨ View ä¸­ä½¿ç”¨ ViewModel"></a>2.3 åœ¨ View ä¸­ä½¿ç”¨ ViewModel</h3><blockquote>
<p>æ³¨æ„: æˆ‘ä»¬å°† ContentView.swift æ–‡ä»¶é‡å‘½åä¸ºäº† EmojiMemoryGameView.swift</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">LazyVGrid</span>(columns: [<span class="type">GridItem</span>(.adaptive(minimum: <span class="number">85</span>))]) &#123;</span><br><span class="line">            <span class="type">ForEach</span>(emojis.indices, id: \.<span class="keyword">self</span>) &#123; index <span class="keyword">in</span></span><br><span class="line">                <span class="type">CardView</span>(content: emojis[index])</span><br><span class="line">                    .aspectRatio(<span class="number">2</span><span class="operator">/</span><span class="number">3</span>, contentMode: .fit)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .foregroundColor(.orange)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> content: <span class="type">String</span></span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">var</span> isFaceUp <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> base <span class="operator">=</span> <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">12</span>)</span><br><span class="line">            <span class="type">Group</span> &#123;</span><br><span class="line">                base.fill(.white)</span><br><span class="line">                base.strokeBorder(lineWidth: <span class="number">2</span>)</span><br><span class="line">                <span class="type">Text</span>(content).font(.largeTitle)</span><br><span class="line">            &#125;</span><br><span class="line">            .opacity(isFaceUp <span class="operator">?</span> <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line">            base.fill().opacity(isFaceUp <span class="operator">?</span> <span class="number">0</span> : <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .onTapGesture &#123;</span><br><span class="line">            isFaceUp.toggle()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>ç°åœ¨éœ€è¦å¾ªç¯å¡ç‰‡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">LazyVGrid</span>(columns: [<span class="type">GridItem</span>(.adaptive(minimum: <span class="number">85</span>))]) &#123;</span><br><span class="line">            <span class="type">ForEach</span>(viewModel.cards.indices, id: \.<span class="keyword">self</span>) &#123; index <span class="keyword">in</span></span><br><span class="line">                <span class="type">CardView</span>(card: viewModel.cards[index])</span><br><span class="line">                    .aspectRatio(<span class="number">2</span><span class="operator">/</span><span class="number">3</span>, contentMode: .fit)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .foregroundColor(.orange)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> card: <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;.<span class="type">Card</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> base <span class="operator">=</span> <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">12</span>)</span><br><span class="line">            <span class="type">Group</span> &#123;</span><br><span class="line">                base.fill(.white)</span><br><span class="line">                base.strokeBorder(lineWidth: <span class="number">2</span>)</span><br><span class="line">                <span class="type">Text</span>(card.content).font(.largeTitle)</span><br><span class="line">            &#125;</span><br><span class="line">            .opacity(card.isFaceUp <span class="operator">?</span> <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line">            base.fill().opacity(card.isFaceUp <span class="operator">?</span> <span class="number">0</span> : <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘ä»¬ç°åœ¨æƒ³è¦æŸ¥çœ‹å¡ç‰‡çš„æ­£é¢ï¼Œåªéœ€è¦æ›´æ”¹ Model å³å¯ã€‚ï¼ˆ<code>MemorizeGame.swift</code> æ–‡ä»¶ï¼‰</p>
<h4 id="2-3-1-CardView-Struct-ä¼˜åŒ–"><a href="#2-3-1-CardView-Struct-ä¼˜åŒ–" class="headerlink" title="2.3.1 CardView Struct ä¼˜åŒ–"></a>2.3.1 CardView Struct ä¼˜åŒ–</h4><p>æˆ‘ä»¬è¿˜å¯ä»¥ä¼˜åŒ–ä¸€ä¸‹ CardViewã€‚è°ƒç”¨æ—¶éœ€è¦å†™ <code>card:</code> å¾ˆéº»çƒ¦ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">CardView</span>(card: viewModel.cards[index])</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥åˆ›å»ºè‡ªå·±çš„åˆå§‹åŒ–å‡½æ•°<code>init</code>å¿½ç•¥å‡½æ•°æ ‡ç­¾ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">LazyVGrid</span>(columns: [<span class="type">GridItem</span>(.adaptive(minimum: <span class="number">85</span>))]) &#123;</span><br><span class="line">            <span class="type">ForEach</span>(viewModel.cards.indices, id: \.<span class="keyword">self</span>) &#123; index <span class="keyword">in</span></span><br><span class="line">                <span class="type">CardView</span>(viewModel.cards[index])</span><br><span class="line">                    .aspectRatio(<span class="number">2</span><span class="operator">/</span><span class="number">3</span>, contentMode: .fit)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .foregroundColor(.orange)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> card: <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;.<span class="type">Card</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(<span class="keyword">_</span> <span class="params">card</span>: <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;.<span class="type">Card</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.card <span class="operator">=</span> card</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<h4 id="2-3-2-æ”¾å¤§-Emoji"><a href="#2-3-2-æ”¾å¤§-Emoji" class="headerlink" title="2.3.2 æ”¾å¤§ Emoji"></a>2.3.2 æ”¾å¤§ Emoji</h4><p><img src="/2024/12/09/Stanford-cs193p-04%EF%BD%9CMVVM-%E5%BA%94%E7%94%A8/cs193p04_biggerEmoji.png"></p>
<h3 id="2-4-View-å’Œ-ViewModel-å…³è”ä¼˜åŒ–"><a href="#2-4-View-å’Œ-ViewModel-å…³è”ä¼˜åŒ–" class="headerlink" title="2.4 View å’Œ ViewModel å…³è”ä¼˜åŒ–"></a>2.4 <code>View</code> å’Œ <code>ViewModel</code> å…³è”ä¼˜åŒ–</h3><h4 id="2-4-1-MARK-Intents"><a href="#2-4-1-MARK-Intents" class="headerlink" title="2.4.1 MARK: - Intents"></a>2.4.1 <code>MARK: - Intents</code></h4><p>å½“æˆ‘ä»¬ä½¿ç”¨ <code>MAKR: - XXX</code> æ—¶ï¼Œ <code>-</code> å¯ä»¥åœ¨ Swift ä¸­çœ‹èµ·æ¥æœ‰ä¸€æ¡çº¿ä¸€æ ·ï¼Œå¦‚ä¸‹å›¾ã€‚</p>
<p><img src="/2024/12/09/Stanford-cs193p-04%EF%BD%9CMVVM-%E5%BA%94%E7%94%A8/cs193p04_mark.png"></p>
<h4 id="2-4-2-æ´—ç‰Œ"><a href="#2-4-2-æ´—ç‰Œ" class="headerlink" title="2.4.2 æ´—ç‰Œ"></a>2.4.2 æ´—ç‰Œ</h4><h5 id="ä¿®æ”¹-View-å’Œ-ViewModel"><a href="#ä¿®æ”¹-View-å’Œ-ViewModel" class="headerlink" title="ä¿®æ”¹ View å’Œ ViewModel"></a>ä¿®æ”¹ View å’Œ ViewModel</h5><p>å®ç°ï¼ˆä¿®æ”¹ï¼‰ ViewModel:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiMemoryGame</span> &#123;</span><br><span class="line">        <span class="operator">...</span></span><br><span class="line">      <span class="operator">...</span></span><br><span class="line">    <span class="comment">// MARK: - Intents</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">shuffle</span>() &#123;</span><br><span class="line">        model.shuffle()</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="operator">...</span></span><br><span class="line">      <span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®ç°ï¼ˆä¿®æ”¹ï¼‰View:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">ScrollView</span> &#123;</span><br><span class="line">                cards</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">Button</span>(<span class="string">&quot;Shuffle&quot;</span>) &#123;</span><br><span class="line">                viewModel.shuffle()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .padding()</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<h5 id="mutating"><a href="#mutating" class="headerlink" title="mutating"></a>mutating</h5><p>æˆ‘ä»¬éœ€è¦è®© Model æ”¯æŒæ´—ç‰Œçš„æ“ä½œã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  MemorizeGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">shuffle</span>() &#123;</span><br><span class="line">        cards.shuffle()</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ï¼Œ<code>self (Model)</code> æ˜¯ä¸å¯æ›´æ”¹çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  MemorizeGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">shuffle</span>() &#123;</span><br><span class="line">        cards.shuffle()</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>ä»»ä½•å‡½æ•°éœ€è¦ä¿®æ”¹ Model å¿…é¡»è¦è¢«æ ‡è®° <strong>mutating</strong> å…³é”®å­—ï¼Œå› ä¸ºè¿™ä¼šé€ æˆå†™æ—¶å¤åˆ¶ï¼ˆcopy on writeï¼‰ã€‚</p>
<h5 id="Reactive-UI"><a href="#Reactive-UI" class="headerlink" title="Reactive UI"></a>Reactive UI</h5><p><code>@ObservableObject</code></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiMemoryGame</span>: <span class="title class_ inherited__">ObservableObject</span> &#123;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">      <span class="meta">@Published</span> <span class="keyword">private</span> <span class="keyword">var</span> model <span class="operator">=</span> createMemoryGame()</span><br><span class="line">      <span class="operator">...</span></span><br><span class="line">    <span class="comment">// MARK: - Intents</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">shuffle</span>() &#123;</span><br><span class="line">        model.shuffle()</span><br><span class="line">        objectWillChange.send()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>objectWillChange.send()</code> ä¼šé€šçŸ¥ UI (View)ï¼Œæœ‰äº›ä¸œè¥¿å°†è¦å˜äº†ã€‚ <code>@Published</code> åˆ™åœ¨ä¸€äº›ä¸œè¥¿å˜åŠ¨å, è¯´ä¸€äº›ä¸œè¥¿å·²ç»å˜äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="meta">@ObservedObject</span> <span class="keyword">var</span> viewModel: <span class="type">EmojiMemoryGame</span> <span class="operator">=</span> <span class="type">EmojiMemoryGame</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">ScrollView</span> &#123;</span><br><span class="line">                cards</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">Button</span>(<span class="string">&quot;Shuffle&quot;</span>) &#123;</span><br><span class="line">                viewModel.shuffle()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .padding()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä¹Ÿéœ€è¦ç»™æˆ‘ä»¬çš„ <code>viewModel</code> å˜é‡æ·»åŠ  <code>@ObservedObject</code> ã€‚æ­¤å¤„ <code>@ObservedObject</code> çš„ä½œç”¨ä¼šè§‚å¯Ÿ <code>EmojiMemoryGame</code> ä¸­çš„ <code>@Published</code> å˜é‡å˜åŒ–ï¼Œå¦‚æœå‘ç”Ÿå˜åŒ–äº†ï¼Œåˆ™ä¼šé‡æ–°æ¸²æŸ“ UIã€‚</p>
<p><strong>é‡è¦æç¤ºï¼š</strong> æœ‰ä¸€ä¸ª <code>@ObservedObject</code> ç„¶åèµ‹å€¼ä¸€äº›ä¸œè¥¿æ˜¯<strong>éå¸¸ä¸å¥½</strong>çš„ä¹ æƒ¯ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ObservedObject</span> <span class="keyword">var</span> viewModel: <span class="type">EmojiMemoryGame</span> <span class="operator">=</span> <span class="type">EmojiMemoryGame</span>()</span><br></pre></td></tr></table></figure>

<p><strong>æ­£ç¡®</strong> çš„æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="meta">@ObservedObject</span> <span class="keyword">var</span> viewModel: <span class="type">EmojiMemoryGame</span></span><br><span class="line">        <span class="operator">...</span></span><br><span class="line">        <span class="operator">...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#<span class="type">Preview</span> &#123;</span><br><span class="line">	<span class="comment">//æ­¤å¤„åˆå§‹åŒ– viewModel å˜é‡ï¼Œæ¥è¿›è¡Œé¢„è§ˆ</span></span><br><span class="line">    <span class="type">EmojiMemoryGameView</span>(viewModel: <span class="type">EmojiMemoryGame</span>())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹ Appï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  MemorizeApp.swift</span></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">@main</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MemorizeApp</span>: <span class="title class_ inherited__">App</span> &#123;</span><br><span class="line">	<span class="comment">// åˆå§‹åŒ– viewModel å¯¹è±¡</span></span><br><span class="line">    <span class="meta">@StateObject</span> <span class="keyword">var</span> game <span class="operator">=</span> <span class="type">EmojiMemoryGame</span>()</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">Scene</span> &#123;</span><br><span class="line">        <span class="type">WindowGroup</span> &#123;</span><br><span class="line">            <span class="type">EmojiMemoryGameView</span>(viewModel: game)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>@StateObject</code> æ„æ€æ˜¯ä½ ä¸èƒ½å’Œå…¶ä»– <code>View</code> å…±äº«è¿™ä¸ªå¯¹è±¡ã€‚</p>
<h5 id="ç»­ç¬¬äº”èŠ‚è¯¾ï¼š-ObservedObject-å’Œ-StateObject-åŒºåˆ«"><a href="#ç»­ç¬¬äº”èŠ‚è¯¾ï¼š-ObservedObject-å’Œ-StateObject-åŒºåˆ«" class="headerlink" title="ç»­ç¬¬äº”èŠ‚è¯¾ï¼š@ObservedObject å’Œ @StateObject åŒºåˆ«"></a>ç»­ç¬¬äº”èŠ‚è¯¾ï¼š<code>@ObservedObject</code> å’Œ <code>@StateObject</code> åŒºåˆ«</h5><p><strong>1. ç¤ºä¾‹ï¼ˆéè¯¾ä»¶å†…å®¹ï¼‰</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Counter</span>: <span class="title class_ inherited__">ObservableObject</span> &#123;</span><br><span class="line">    <span class="meta">@Published</span> <span class="keyword">var</span> value <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ParentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="meta">@StateObject</span> <span class="keyword">private</span> <span class="keyword">var</span> counter <span class="operator">=</span> <span class="type">Counter</span>() <span class="comment">// ç”±çˆ¶è§†å›¾è´Ÿè´£åˆ›å»ºå’Œç®¡ç†</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ChildView</span>(counter: counter) <span class="comment">// å°† ObservableObject ä¼ é€’ç»™å­è§†å›¾</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ChildView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="meta">@ObservedObject</span> <span class="keyword">var</span> counter: <span class="type">Counter</span> <span class="comment">// è§‚å¯Ÿçˆ¶è§†å›¾ä¼ é€’è¿‡æ¥çš„å®ä¾‹</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;Counter: <span class="subst">\(counter.value)</span>&quot;</span>)</span><br><span class="line">            <span class="type">Button</span>(<span class="string">&quot;Increment&quot;</span>) &#123;</span><br><span class="line">                counter.value <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong><code>ParentView</code></strong> åˆ›å»ºå¹¶ç®¡ç† <code>Counter</code> çš„ç”Ÿå‘½å‘¨æœŸã€‚</li>
<li><strong><code>ChildView</code></strong> ä½¿ç”¨ <code>@ObservedObject</code> è§‚å¯Ÿä¼ å…¥çš„ <code>Counter</code> å®ä¾‹ï¼Œä½†ä¸è´Ÿè´£ç®¡ç†å…¶ç”Ÿå‘½å‘¨æœŸã€‚</li>
</ul>
<p>ä½¿ç”¨ <code>@StateObject</code> å’Œ <code>@ObservedObject</code> çš„æ ¸å¿ƒåœ¨äºå¯¹<strong>ç”Ÿå‘½å‘¨æœŸçš„ç†è§£</strong>ï¼Œç¡®ä¿åœ¨åˆé€‚çš„ä¸Šä¸‹æ–‡ä¸­ç®¡ç†å’Œè§‚å¯Ÿæ•°æ®ã€‚</p>
<p><strong>2. æ€»ç»“</strong></p>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th><code>@ObservedObject</code></th>
<th><code>@StateObject</code></th>
</tr>
</thead>
<tbody><tr>
<td><strong>è´Ÿè´£å®ä¾‹åˆ›å»º</strong></td>
<td>å¦ï¼šåªè§‚å¯Ÿä¼ å…¥çš„ <code>ObservableObject</code></td>
<td>æ˜¯ï¼šè´Ÿè´£åˆ›å»ºå¹¶ç®¡ç† <code>ObservableObject</code> çš„ç”Ÿå‘½å‘¨æœŸ</td>
</tr>
<tr>
<td><strong>ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong></td>
<td>ä¸ç®¡ç†ï¼Œä¾èµ–äºå¤–éƒ¨å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸ</td>
<td>è‡ªåŠ¨ç®¡ç†ï¼Œå½“è§†å›¾é”€æ¯æ—¶ï¼Œ<code>ObservableObject</code> ä¹Ÿé”€æ¯</td>
</tr>
<tr>
<td><strong>åˆå§‹åŒ–æ—¶æœº</strong></td>
<td>å¤–éƒ¨ä¼ å…¥å®ä¾‹ï¼Œå¿…é¡»åœ¨å¤–éƒ¨å·²åˆ›å»º</td>
<td>ä»…åœ¨è§†å›¾é¦–æ¬¡åˆå§‹åŒ–æ—¶åˆ›å»ºä¸€æ¬¡</td>
</tr>
<tr>
<td><strong>ä½¿ç”¨åœºæ™¯</strong></td>
<td>å­è§†å›¾ï¼šè§‚å¯Ÿç”±çˆ¶è§†å›¾ä¼ é€’çš„ <code>ObservableObject</code> å®ä¾‹</td>
<td>çˆ¶è§†å›¾ï¼šåˆ›å»ºå¹¶ç®¡ç†è‡ªå·±çš„ <code>ObservableObject</code> å®ä¾‹</td>
</tr>
<tr>
<td><strong>é‡å¤æ¸²æŸ“</strong></td>
<td>æ¯æ¬¡è§†å›¾åˆ·æ–°æ—¶ï¼Œè§‚å¯Ÿç›¸åŒçš„å®ä¾‹</td>
<td>ä¸ä¼šåœ¨è§†å›¾åˆ·æ–°æ—¶é‡å¤åˆ›å»º <code>ObservableObject</code></td>
</tr>
</tbody></table>
<ul>
<li><code>@StateObject</code> é€‚ç”¨äºå½“å‰è§†å›¾éœ€è¦è‡ªå·±åˆ›å»ºå¹¶ç®¡ç† <code>ObservableObject</code> å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¸¸ç”¨äºçˆ¶è§†å›¾æˆ–ç‹¬ç«‹è§†å›¾ã€‚</li>
<li><code>@ObservedObject</code>é€‚ç”¨äºè§‚å¯Ÿç”±å¤–éƒ¨ä¼ é€’çš„ <code>ObservableObject</code>ï¼Œå¸¸ç”¨äºå­è§†å›¾ã€‚</li>
<li><code>@ObservedObject</code> å’Œ <code>@StateObject</code> éƒ½æ˜¯ç”¨äºè§‚å¯Ÿ <code>ObservableObject</code> çš„å±æ€§åŒ…è£…å™¨ï¼Œä½†å®ƒä»¬æœ‰ä¸åŒçš„ä½¿ç”¨åœºæ™¯å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†æ–¹å¼ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>code</category>
        <category>swift</category>
      </categories>
      <tags>
        <tag>cs193p</tag>
      </tags>
  </entry>
  <entry>
    <title>Stanford cs193p 05 | Protocol Enum Optional</title>
    <url>/2024/12/20/Stanford-cs193p-05%EF%BD%9CProtocol-Enum-Optional/</url>
    <content><![CDATA[<p>æœ¬æ–‡æ˜¯æ–¯å¦ç¦å¤§å­¦ cs193p å…¬å¼€è¯¾ç¨‹ç¬¬ 05 é›†çš„ç›¸å…³ç¬”è®°ã€‚</p>
<span id="more"></span>

<blockquote>
<p>æœ¬æ–‡ä¸»è¦å†…å®¹è½¬è½½äºï¼š<a href="https://nwdan.com/my-learning/stanford-cs193p-5.html">é—»è€…é€šè¾¾çš„ä¸ªäººåšå®¢</a></p>
</blockquote>
<p>cs193p è¯¾ç¨‹ä»‹ç»:</p>
<blockquote>
<p>The lectures for the Spring 2023 version of Stanford Universityâ€™s course CS193p (Developing Applications for iOS using SwiftUI) were given in person but, unfortunately, were not video recorded. However, we did capture the laptop screen of the presentations and demos as well as the associated audio. You can watch these screen captures using the links below. Youâ€™ll also find links to supporting material that was distributed to students during the quarter (homework, demo code, etc.).</p>
</blockquote>
<p>cs193p è¯¾ç¨‹ç½‘å€: <a href="https://cs193p.sites.stanford.edu/2023">https://cs193p.sites.stanford.edu/2023</a></p>
<hr>
<h2 id="1-Equatable-Protocol"><a href="#1-Equatable-Protocol" class="headerlink" title="1. Equatable Protocol"></a>1. Equatable Protocol</h2><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="meta">@ObservedObject</span> <span class="keyword">var</span> viewModel: <span class="type">EmojiMemoryGame</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">ScrollView</span> &#123;</span><br><span class="line">                cards</span><br><span class="line">                    .animation(.default, value: )</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">Button</span>(<span class="string">&quot;Shuffle&quot;</span>) &#123;</span><br><span class="line">                viewModel.shuffle()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .padding()</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ  <code>.animation</code> è§†å›¾ä¿®é¥°ç¬¦æ¥åˆ¶ä½œåŠ¨ç”»ã€‚<code>value</code> è¡¨ç¤ºå®ƒåªä¼šåœ¨æ­¤å€¼æ›´æ”¹æ—¶è¿›è¡ŒåŠ¨ç”»å¤„ç†ã€‚</p>
<p>ä½†æ˜¯ï¼Œè¿™ä¼šå¯¼è‡´é”™è¯¯ â€œReferencing instance method â€˜animation(:value:)â€™ on â€˜Arrayâ€™ requires that â€˜MemoryGame&lt;String&gt;.Cardâ€™ conform to â€˜Equatableâ€™â€ã€‚è¿™è¡¨æ˜ï¼Œå¦‚æœæŸäº›å†…å®¹å‘ç”Ÿæ›´æ”¹ï¼ŒåŠ¨ç”»å°†å¤åˆ¶è¯¥æ›´æ”¹ã€‚å½“æŸäº›å†…å®¹ä¹Ÿå‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒéœ€è¦å¦ä¸€ä¸ªå‰¯æœ¬ã€‚ä»…å½“ä¸¤ä¸ªå‰¯æœ¬ä¸ç›¸ç­‰æ—¶ï¼ŒåŠ¨ç”»æ‰ä¼šè¿›è¡ŒåŠ¨ç”»å¤„ç†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ <code>Card</code> éµå¾ª <code>Equatable</code> åè®®ï¼ˆprotocolï¼‰ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  MemorizeGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Card</span>: <span class="title class_ inherited__">Equatable</span> &#123;</span><br><span class="line">    	<span class="comment">// ä¸ºäº†å®ç° Equatable åè®®ï¼Œæ­¤å¤„éœ€è¦ç¼–å†™ä¸€ä¸ªé™æ€å‡½æ•°å¦‚ä¸‹ï¼š</span></span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">==</span> (<span class="params">lhs</span>: <span class="type">Card</span>, <span class="params">rhs</span>: <span class="type">Card</span>) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> lhs.isFaceUp <span class="operator">==</span> rhs.isFaceUp <span class="operator">&amp;&amp;</span></span><br><span class="line">            lhs.isMatched <span class="operator">==</span> rhs.isMatched <span class="operator">&amp;&amp;</span></span><br><span class="line">            lhs.content <span class="operator">==</span> rhs.content</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> isFaceUp <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        <span class="keyword">var</span> isMatched <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">let</span> content: <span class="type">CardContent</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†å®ç° <code>Equatable</code> åè®®ï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªé™æ€å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°å¹¶è¿”å›ä¸€ä¸ª <code>Bool</code>ã€‚è¯¥å‡½æ•°éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªå·¦ä¾§ <code>Card</code> å’Œä¸€ä¸ªå³ä¾§ <code>Card</code>ã€‚</p>
<p>ä½†æ˜¯ï¼Œé”™è¯¯ä¿¡æ¯ <code>â€œReferencing operator function &#39;==&#39; on &#39;Equatable&#39; requires that &#39;CardContent&#39; conform to &#39;Equatable&#39;â€</code> è¡¨ç¤ºæˆ‘ä»¬éœ€è¦ä½¿ <code>CardContent</code> ç›¸ç­‰ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  MemorizeGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MemoryGame</span>&lt;<span class="type">CardContent</span>&gt; <span class="keyword">where</span> <span class="type">CardContent</span>: <span class="type">Equatable</span> &#123;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">    <span class="operator">...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Card</span>: <span class="title class_ inherited__">Equatable</span> &#123;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">==</span> (<span class="params">lhs</span>: <span class="type">Card</span>, <span class="params">rhs</span>: <span class="type">Card</span>) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> lhs.isFaceUp <span class="operator">==</span> rhs.isFaceUp <span class="operator">&amp;&amp;</span></span><br><span class="line">            lhs.isMatched <span class="operator">==</span> rhs.isMatched <span class="operator">&amp;&amp;</span></span><br><span class="line">            lhs.content <span class="operator">==</span> rhs.content</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> isFaceUp <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        <span class="keyword">var</span> isMatched <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">let</span> content: <span class="type">CardContent</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†ä½¿æˆ‘ä»¬çš„ <code>CardContent</code> ç›¸ç­‰ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>where CardContent: Equatable</code> æ¥å®ç°å®ƒã€‚è¿™æ„å‘³ç€ï¼Œæˆ‘ä»¬å¯¹ <code>Card</code> è¿˜æ˜¯æœ‰æ‰€é™åˆ¶çš„ã€‚å¦å¤–ï¼ŒSwift ä¸­å¦ä¸€ä¸ªå¾ˆé…·çš„ç‰¹æ€§æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬åƒä¸Šé¢è¿™æ ·å¯¹ <code>CardContent</code> æ¯”è¾ƒæ¯ä»¶äº‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åˆ é™¤ä¹‹å‰åœ¨ <code>Card</code> ç»“æ„ä½“ä¸­æ·»åŠ çš„é™æ€å‡½æ•°ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">MemoryGame</span>&lt;<span class="type">CardContent</span>&gt; <span class="keyword">where</span> <span class="type">CardContent</span>: <span class="type">Equatable</span> &#123;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">      <span class="operator">...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Card</span>: <span class="title class_ inherited__">Equatable</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> isFaceUp <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        <span class="keyword">var</span> isMatched <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">let</span> content: <span class="type">CardContent</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®ƒç¡®å®æœ‰æ•ˆï¼Œä½†å¡ç‰‡çš„åŠ¨ç”»æ•ˆæœä¸ºæ·¡å…¥æ·¡å‡ºï¼Œçœ‹èµ·æ¥ä¸åƒæ´—ç‰Œã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">LazyVGrid</span>(columns: [<span class="type">GridItem</span>(.adaptive(minimum: <span class="number">85</span>), spacing: <span class="number">0</span>)], spacing: <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">ForEach</span>(viewModel.cards.indices, id: \.<span class="keyword">self</span>) &#123; index <span class="keyword">in</span></span><br><span class="line">                <span class="type">CardView</span>(viewModel.cards[index])</span><br><span class="line">                    .aspectRatio(<span class="number">2</span><span class="operator">/</span><span class="number">3</span>, contentMode: .fit)</span><br><span class="line">                    .padding(<span class="number">4</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .foregroundColor(.orange)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>å› ä¸ºæˆ‘ä»¬çš„ ForEach è¿­ä»£æ•°ç»„çš„ç´¢å¼•ã€‚å®ƒä»å¡ 0ã€1ã€2ã€3 â€¦å¹¶ä¸ºæ¯ä¸ª API åˆ›å»º Card è§†å›¾ã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬æ´—ç‰Œæ—¶ï¼Œæˆ‘ä»¬ä¼šå°†ç‰Œä» 0 å·ç§»åŠ¨åˆ° 7 å·ã€‚ä½†æ˜¯ ForEach ä»ç„¶æ˜¾ç¤ºä» 0ã€1ã€2â€¦</p>
<p>æˆ‘ä»¬æƒ³è¦ç§»åŠ¨å¡ç‰‡æœ¬èº«ï¼Œå³ Card è§†å›¾ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">LazyVGrid</span>(columns: [<span class="type">GridItem</span>(.adaptive(minimum: <span class="number">85</span>), spacing: <span class="number">0</span>)], spacing: <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">ForEach</span>(viewModel.cards, id: \.<span class="keyword">self</span>) &#123; card <span class="keyword">in</span></span><br><span class="line">                <span class="type">CardView</span>(card)</span><br><span class="line">                    .aspectRatio(<span class="number">2</span><span class="operator">/</span><span class="number">3</span>, contentMode: .fit)</span><br><span class="line">                    .padding(<span class="number">4</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .foregroundColor(.orange)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯¹ <code>ForEach</code> åšäº†ä¸€äº›æ”¹å˜ã€‚ä¸Šé¢çš„ä»£ç å°†äº§ç”Ÿé”™è¯¯ <code>&quot;Referencing initializer &#39;init(\_:id:content:)&#39; on &#39;ForEach&#39; requires that &#39;MemoryGame\\&lt;String\\&gt;.Card&#39; conform to &#39;Hashable&#39;&quot;</code>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">LazyVGrid</span>(columns: [<span class="type">GridItem</span>(.adaptive(minimum: <span class="number">85</span>), spacing: <span class="number">0</span>)], spacing: <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">ForEach</span>(viewModel.cards) &#123; card <span class="keyword">in</span></span><br><span class="line">                <span class="type">CardView</span>(card)</span><br><span class="line">                    .aspectRatio(<span class="number">2</span><span class="operator">/</span><span class="number">3</span>, contentMode: .fit)</span><br><span class="line">                    .padding(<span class="number">4</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .foregroundColor(.orange)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œæ˜¯æ—¶å€™è°ˆè°ˆ <code>id: \.self</code> äº†ï¼Œç”¨æ¥è¯†åˆ«è¿™äº› <code>cards</code>ã€‚</p>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æƒ³è®© <code>id</code> å”¯ä¸€ï¼Œå³å¯¹æŸå¼  <code>Card</code> å…·æœ‰å”¯ä¸€ <code>id</code> ä¸”ä¸ä¼šå˜åŒ–ï¼Œä½†é€šè¿‡ <code>id:\.self</code> æ— æ³•å®ç°ï¼Œå› ä¸º <code>Card</code> åŒ…æ‹¬ <code>isFaceUp</code> ã€<code>isMatch</code> å±æ€§ï¼Œå½“æˆ‘ä»¬å•å‡»å¡ç‰‡æ—¶ï¼Œè¿™äº›å±æ€§ä¼šå‘ç”Ÿå˜åŒ–ï¼Œ<code>id</code> å°±ä¼šå‘ç”Ÿå˜åŒ–ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦ä¸€äº›å…¶ä»–ä¸œè¥¿æ¥è¯†åˆ« <code>Card</code>ã€‚</p>
<h2 id="2-Identifiable-Protocol"><a href="#2-Identifiable-Protocol" class="headerlink" title="2. Identifiable Protocol"></a>2. Identifiable Protocol</h2><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  MemorizeGame.swift</span></span><br><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MemoryGame</span>&lt;<span class="type">CardContent</span>&gt; <span class="keyword">where</span> <span class="type">CardContent</span>: <span class="type">Equatable</span> &#123;</span><br><span class="line">    <span class="keyword">private(set)</span> <span class="keyword">var</span> cards: <span class="type">Array</span>&lt;<span class="type">Card</span>&gt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">numberOfPairsOfCards</span>: <span class="type">Int</span>, <span class="params">cardContentFactory</span>: (<span class="type">Int</span>) -&gt; <span class="type">CardContent</span>) &#123;</span><br><span class="line">        cards <span class="operator">=</span> []</span><br><span class="line">        <span class="comment">// add numberOfParisOfCards x 2 cards</span></span><br><span class="line">        <span class="keyword">for</span> pairIndex <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span><span class="built_in">max</span>(<span class="number">2</span>, numberOfPairsOfCards) &#123;</span><br><span class="line">            <span class="keyword">let</span> content <span class="operator">=</span> cardContentFactory(pairIndex)</span><br><span class="line">            cards.append(<span class="type">Card</span>(content: content, id: <span class="string">&quot;<span class="subst">\(pairIndex<span class="operator">+</span><span class="number">1</span>)</span>a&quot;</span>))</span><br><span class="line">            cards.append(<span class="type">Card</span>(content: content, id: <span class="string">&quot;<span class="subst">\(pairIndex<span class="operator">+</span><span class="number">1</span>)</span>b&quot;</span>))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">      <span class="operator">...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Card</span>: <span class="title class_ inherited__">Equatable</span>, <span class="title class_ inherited__">Identifiable</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> isFaceUp <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        <span class="keyword">var</span> isMatched <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">let</span> content: <span class="type">CardContent</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> id: <span class="type">String</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªé”®å…¥ä¸º String çš„ idï¼Œå¹¶åœ¨åˆ›å»ºæ–°å¡æ—¶åˆ†é…è¯¥ idã€‚id çœ‹èµ·æ¥åƒ 1aã€1bã€2aã€2bã€3aã€3b ç­‰â€¦â€¦</p>
<h2 id="3-CustomDebugStringConvertible"><a href="#3-CustomDebugStringConvertible" class="headerlink" title="3. CustomDebugStringConvertible"></a>3. CustomDebugStringConvertible</h2><p><img src="/2024/12/20/Stanford-cs193p-05%EF%BD%9CProtocol-Enum-Optional/cs193p05-1.png"></p>
<p>æˆ‘ä»¬å½“å‰çš„å°åˆ·ä¿¡æ¯ç›¸å½“å¤æ‚ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥è®©å®ƒå˜å¾—æ›´å¥½ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  MemorizeGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Card</span>: <span class="title class_ inherited__">Equatable</span>, <span class="title class_ inherited__">Identifiable</span>, <span class="title class_ inherited__">CustomDebugStringConvertible</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> isFaceUp <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        <span class="keyword">var</span> isMatched <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">let</span> content: <span class="type">CardContent</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> id: <span class="type">String</span></span><br><span class="line">        <span class="keyword">var</span> debugDescription: <span class="type">String</span> &#123;</span><br><span class="line">            <span class="string">&quot;<span class="subst">\(id)</span>: <span class="subst">\(content)</span> <span class="subst">\(isFaceUp <span class="operator">?</span> <span class="string">&quot;up&quot;</span> : <span class="string">&quot;down&quot;</span>)</span> <span class="subst">\(isMatched <span class="operator">?</span> <span class="string">&quot;matched&quot;</span>: <span class="string">&quot;&quot;</span>)</span>&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä¸º Card å®æ–½ <code>CustomDebugStringConvertible</code> protocol åè®®ï¼Œå¹¶å®šä¹‰ debugDescriptionã€‚</p>
<p>ç°åœ¨ï¼Œå®ƒå˜å¾—æ›´ç®€æ´äº†ã€‚</p>
<p><img src="/2024/12/20/Stanford-cs193p-05%EF%BD%9CProtocol-Enum-Optional/cs193p05-2.jpg"></p>
<h2 id="4-ViewModel-Intent-Part-1ï¼šç¿»è½¬å¡ç‰‡"><a href="#4-ViewModel-Intent-Part-1ï¼šç¿»è½¬å¡ç‰‡" class="headerlink" title="4. ViewModel Intent - Part 1ï¼šç¿»è½¬å¡ç‰‡"></a>4. ViewModel Intent - Part 1ï¼šç¿»è½¬å¡ç‰‡</h2><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">LazyVGrid</span>(columns: [<span class="type">GridItem</span>(.adaptive(minimum: <span class="number">85</span>), spacing: <span class="number">0</span>)], spacing: <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">ForEach</span>(viewModel.cards) &#123; card <span class="keyword">in</span></span><br><span class="line">                <span class="type">CardView</span>(card)</span><br><span class="line">                    .aspectRatio(<span class="number">2</span><span class="operator">/</span><span class="number">3</span>, contentMode: .fit)</span><br><span class="line">                    .padding(<span class="number">4</span>)</span><br><span class="line">                    .onTapGesture &#123;</span><br><span class="line">                        viewModel.choose(card)</span><br><span class="line">                    &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .foregroundColor(.orange)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  MemorizeGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">choose</span>(<span class="keyword">_</span> <span class="params">card</span>: <span class="type">Card</span>) &#123;</span><br><span class="line">        card.isFaceUp.toggle()</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¼€å§‹å®ç°ç”¨æˆ·çš„æ„å›¾ï¼ˆç¿»è½¬å¡ç‰‡ï¼‰ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>.onTapGesture</code> å’Œ <code>.toggle()</code> æ¥åœ¨ç”¨æˆ·è§¦æ‘¸å±å¹•æ—¶ç¿»è½¬å¡ç‰‡ã€‚ä½†æ˜¯ï¼Œç”±äºå¡ç‰‡æ˜¯å€¼ç±»å‹ï¼Œå½“ choose å‡½æ•°è·å–å¡ç‰‡çš„å‰¯æœ¬æ—¶ï¼Œæˆ‘ä»¬æ— æ³•ç›´æ¥ä½¿ç”¨ <code>.toggle()</code> æ¥ç¿»è½¬å®ƒã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  MemorizeGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">choose</span>(<span class="keyword">_</span> <span class="params">card</span>: <span class="type">Card</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> chosenIndex <span class="operator">=</span> index(of: card)</span><br><span class="line">        cards[chosenIndex].isFaceUp.toggle()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">index</span>(<span class="params">of</span> <span class="params">card</span>: <span class="type">Card</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> index <span class="keyword">in</span> cards.indices &#123;</span><br><span class="line">            <span class="keyword">if</span> cards[index].id <span class="operator">==</span> card.id &#123;</span><br><span class="line">                <span class="keyword">return</span> index</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span> <span class="comment">// <span class="doctag">FIXME:</span> bogus!</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å°†ç›´æ¥ä½¿ç”¨å¡ç‰‡çš„ç´¢å¼•æ¥ä¿®æ”¹å¡ç‰‡æ•°ç»„ã€‚æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªåä¸º index çš„å‡½æ•°ï¼Œç”¨äºæŸ¥æ‰¾å¡ç‰‡çš„ç´¢å¼•ã€‚</p>
<p>ç›®å‰ï¼Œå¦‚æœæ‰¾ä¸åˆ°å¡ç‰‡ï¼Œæˆ‘ä»¬å°†è¿”å›ç´¢å¼•ä¸º 0 çš„å¡ç‰‡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„ç¬¬ä¸€å¼ å¡ç‰‡ã€‚</p>
<p>åœ¨è¿™ä¹‹å‰ï¼Œéœ€è¦å…ˆäº†è§£ä¸€ä¸‹æšä¸¾ï¼ˆenumï¼‰ã€‚</p>
<h2 id="5-Enum"><a href="#5-Enum" class="headerlink" title="5. Enum"></a>5. Enum</h2><h3 id="5-1-Enum-ç®€ä»‹"><a href="#5-1-Enum-ç®€ä»‹" class="headerlink" title="5.1 Enum ç®€ä»‹"></a>5.1 Enum ç®€ä»‹</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">FastFoodMenuItem</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> hamburger</span><br><span class="line">	<span class="keyword">case</span> fries</span><br><span class="line">	<span class="keyword">case</span> drink</span><br><span class="line">	<span class="keyword">case</span> cookie</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong><code>Enum</code> æ˜¯é™¤äº† <code>struct</code> å’Œ <code>class</code> ä»¥å¤–çš„å¦ä¸€ç§æ•°æ®ç»“æ„ã€‚</strong></p>
</li>
<li><p>å®ƒåªèƒ½åŒ…å«ç¦»æ•£çš„çŠ¶æ€ã€‚</p>
</li>
<li><p>æšä¸¾æ˜¯ä¸€ç§å€¼ç±»å‹ï¼ˆå¦‚ <code>struct</code>ï¼‰ï¼Œå› æ­¤å®ƒä¼šåœ¨ä¼ é€’æ—¶è¢«å¤åˆ¶ã€‚</p>
</li>
<li><p>æ¯ä¸ªçŠ¶æ€éƒ½å¯ä»¥(ä½†ä¸æ˜¯å¿…é¡») æœ‰è‡ªå·±çš„â€œå…³è”æ•°æ®â€</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">FastFoodMenuItem</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> hamburger(numberOfPatties: <span class="type">Int</span>)</span><br><span class="line">  	<span class="keyword">case</span> fries(size: <span class="type">FryOrderSize</span>)</span><br><span class="line">  	<span class="keyword">case</span> drink(<span class="type">String</span>, ounces: <span class="type">Int</span>) <span class="comment">// the unnamed String is the brand, e.g. &quot;Coke&quot;</span></span><br><span class="line">  	<span class="keyword">case</span> cookie</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œé¥®æ–™æ¡ˆä¾‹æœ‰ 2 æ¡å…³è”æ•°æ®ï¼ˆå…¶ä¸­ä¸€æ¡æ˜¯â€œæœªå‘½åçš„â€ï¼‰<br>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ <code>FryOrderSize</code> ä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªæšä¸¾ï¼Œä¾‹å¦‚ â€¦</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">FryOrderSize</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> large</span><br><span class="line">  <span class="keyword">case</span> small</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="5-2-è®¾ç½®æšä¸¾çš„å€¼"><a href="#5-2-è®¾ç½®æšä¸¾çš„å€¼" class="headerlink" title="5.2 è®¾ç½®æšä¸¾çš„å€¼"></a>5.2 è®¾ç½®æšä¸¾çš„å€¼</h3><p>è®¾ç½®æšä¸¾çš„å€¼æ—¶ï¼Œå¦‚æœæœ‰å…³è”æ•°æ®ï¼Œå¿…é¡»æä¾›å…³è”çš„æ•°æ®å€¼ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> menuItem: <span class="type">FastFoodMenuItem</span> <span class="operator">=</span> <span class="type">FastFoodMenuItem</span>.hamburger(patties: <span class="number">2</span>)</span><br><span class="line"><span class="keyword">var</span> otherItem: <span class="type">FastFoodMenuItem</span> <span class="operator">=</span> <span class="type">FastFoodMenuItem</span>.cookie</span><br></pre></td></tr></table></figure>

<p>Swift å¯ä»¥åœ¨èµ‹å€¼å·¦ä¾§æˆ–å¦ä¸€ä¾§æ¨æ–­ç±»å‹ï¼Œä½†ä¸èƒ½åŒæ—¶ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> menuItem <span class="operator">=</span> <span class="type">FastFoodMenuItem</span>.hamburger(patties: <span class="number">2</span>)</span><br><span class="line"><span class="keyword">var</span> otherItem: <span class="type">FastFoodMenuItem</span> <span class="operator">=</span> .cookie</span><br><span class="line"></span><br><span class="line"><span class="comment">// Swift can&#x27;t figure this out</span></span><br><span class="line"><span class="keyword">var</span> yetAnotherItem <span class="operator">=</span> .cookie</span><br></pre></td></tr></table></figure>

<h3 id="5-3-æ£€æŸ¥æšä¸¾çš„çŠ¶æ€"><a href="#5-3-æ£€æŸ¥æšä¸¾çš„çŠ¶æ€" class="headerlink" title="5.3 æ£€æŸ¥æšä¸¾çš„çŠ¶æ€"></a>5.3 æ£€æŸ¥æšä¸¾çš„çŠ¶æ€</h3><p>é€šå¸¸ä½¿ç”¨ <code>switch</code> æ¥æ£€æŸ¥æšä¸¾çš„çŠ¶æ€ï¼Œå°½ç®¡æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>if</code> è¯­å¥ï¼Œä½†å¦‚æœæœ‰å…³è”æ•°æ®ï¼Œåˆ™è¿™ç§æƒ…å†µä¸å¸¸è§ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> menuItem <span class="operator">=</span> <span class="type">FastFoodMenuItem</span>.hamburger(patties: <span class="number">2</span>)</span><br><span class="line"><span class="keyword">switch</span> menuItem &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="type">FastFoodMenuItem</span>.hamburger: <span class="built_in">print</span>(<span class="string">&quot;burger&quot;</span>)</span><br><span class="line">  <span class="keyword">case</span> <span class="type">FastFoodMenuItem</span>.fries: <span class="built_in">print</span>(<span class="string">&quot;fries&quot;</span>)</span><br><span class="line">  <span class="keyword">case</span> <span class="type">FastFoodMenuItem</span>.drink: <span class="built_in">print</span>(<span class="string">&quot;drink&quot;</span>)</span><br><span class="line">  <span class="keyword">case</span> <span class="type">FastFoodMenuItem</span>.cookie: <span class="built_in">print</span>(<span class="string">&quot;cookie&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä»£ç å°†åœ¨æ§åˆ¶å°ä¸Šæ‰“å° â€œburgerâ€ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> menuItem <span class="operator">=</span> <span class="type">FastFoodMenuItem</span>.hamburger(patties: <span class="number">2</span>)</span><br><span class="line"><span class="keyword">switch</span> menuItem &#123;</span><br><span class="line">  <span class="keyword">case</span> .hamburger: <span class="built_in">print</span>(<span class="string">&quot;burger&quot;</span>)</span><br><span class="line">  <span class="keyword">case</span> .fries: <span class="built_in">print</span>(<span class="string">&quot;fries&quot;</span>)</span><br><span class="line">  <span class="keyword">case</span> .drink: <span class="built_in">print</span>(<span class="string">&quot;drink&quot;</span>)</span><br><span class="line">  <span class="keyword">case</span> .cookie: <span class="built_in">print</span>(<span class="string">&quot;cookie&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ²¡æœ‰å¿…è¦ä½¿ç”¨å®Œå…¨è¡¨ç¤ºçš„ <code>FastFoodMenuItem.fries</code> ï¼ˆå› ä¸º Swift å¯ä»¥æ¨æ–­å‡º <code>FastFoodMenuItem</code> ï¼‰</p>
<h3 id="5-4-break"><a href="#5-4-break" class="headerlink" title="5.4 break"></a>5.4 <code>break</code></h3><p>å¦‚æœæ‚¨ä¸æƒ³åœ¨ç»™å®šçš„æƒ…å†µä¸‹æ‰§è¡Œä»»ä½•æ“ä½œï¼Œè¯·ä½¿ç”¨ <code>break</code></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> menuItem <span class="operator">=</span> <span class="type">FastFoodMenuItem</span>.hamburger(patties: <span class="number">2</span>)</span><br><span class="line"><span class="keyword">switch</span> menuItem &#123;</span><br><span class="line">  <span class="keyword">case</span> .hamburger: <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">case</span> .fries: <span class="built_in">print</span>(<span class="string">&quot;fries&quot;</span>)</span><br><span class="line">  <span class="keyword">case</span> .drink: <span class="built_in">print</span>(<span class="string">&quot;drink&quot;</span>)</span><br><span class="line">  <span class="keyword">case</span> .cookie: <span class="built_in">print</span>(<span class="string">&quot;cookie&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯¥ä»£ç ä¸ä¼šåœ¨æ§åˆ¶å°ä¸Šæ‰“å°ä»»ä½•å†…å®¹ã€‚</p>
<h3 id="5-5-Default"><a href="#5-5-Default" class="headerlink" title="5.5 Default"></a>5.5 <code>Default</code></h3><p><code>switch</code> å¿…é¡»å¤„ç†æ‰€æœ‰å¯èƒ½çš„æƒ…å†µï¼Œå› æ­¤é€šå¸¸ä½¿ç”¨ <code>default</code> æ¥ç®¡ç†ä¸æ„Ÿå…´è¶£çš„çŠ¶æ€ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> menuItem <span class="operator">=</span> <span class="type">FastFoodMenuItem</span>.cookie</span><br><span class="line"><span class="keyword">switch</span> menuItem &#123;</span><br><span class="line">  <span class="keyword">case</span> .hamburger: <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">case</span> .fries: <span class="built_in">print</span>(<span class="string">&quot;fries&quot;</span>)</span><br><span class="line">  <span class="keyword">default</span>: <span class="built_in">print</span>(<span class="string">&quot;other&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ menuItem æ˜¯ä¸€ä¸ª cookieï¼Œåˆ™ä¸Šé¢çš„ä»£ç å°†åœ¨æ§åˆ¶å°ä¸Šæ‰“å° â€œotherâ€ã€‚</p>
<p>é¡ºä¾¿è¯´ä¸€å¥ï¼Œä½ å¯ä»¥ <code>switch</code> ä»»ä½•ç±»å‹ï¼ˆä¸ä»…ä»…æ˜¯ enumï¼‰ï¼Œä¾‹å¦‚ <code>string</code></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> s: <span class="type">String</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="keyword">switch</span> s &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;goodbye&quot;</span>: <span class="operator">...</span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;hello&quot;</span>: <span class="operator">...</span></span><br><span class="line">  	<span class="keyword">default</span>: <span class="operator">...</span> <span class="comment">// gotta have this for String because switch has to cover ALL cases</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-6-å…è®¸å¤šè¡Œ"><a href="#5-6-å…è®¸å¤šè¡Œ" class="headerlink" title="5.6 å…è®¸å¤šè¡Œ"></a>5.6 å…è®¸å¤šè¡Œ</h3><p><code>switch</code> ä¸­çš„æ¯ä¸ª case éƒ½å¯ä»¥æ˜¯å¤šè¡Œï¼Œå¹¶ä¸”ä¸ä¼šè½å…¥ä¸‹ä¸€ä¸ª case â€¦</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> menuItem <span class="operator">=</span> <span class="type">FastFoodMenuItem</span>.fries(size: <span class="type">FryOrderSize</span>.large)</span><br><span class="line"><span class="keyword">switch</span> menuItem &#123;</span><br><span class="line">  <span class="keyword">case</span> .hamburger: <span class="built_in">print</span>(<span class="string">&quot;burger&quot;</span>)</span><br><span class="line">  <span class="keyword">case</span> .fries:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;yummy&quot;</span>)</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;fries&quot;</span>)</span><br><span class="line">  <span class="keyword">case</span> .drink:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;drink&quot;</span>)</span><br><span class="line">  <span class="keyword">case</span> .cookie: <span class="built_in">print</span>(<span class="string">&quot;cookie&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä»£ç ä¼šåœ¨æ§åˆ¶å°ä¸Šæ‰“å° â€œyummyâ€ å’Œ â€œfriesâ€ï¼Œè€Œä¸æ˜¯ â€œé¥®æ–™â€ã€‚</p>
<p>å¦‚æœæ‚¨å°†å…³é”®å­— <code>fallthrough</code> æ”¾åœ¨æŸä¸ª <code>case</code> çš„æœ€åä¸€è¡Œï¼Œé‚£ä¹ˆå®ƒå°†ä¼šç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ª <code>case</code>ã€‚</p>
<p>å…³äºå…³è”æ•°æ®ï¼Œæ‚¨å¯ä»¥é€šè¿‡ <code>switch</code> è¯­å¥è®¿é—®è¿™äº›æ•°æ®ï¼Œä½¿ç”¨ <code>let</code>è¯­æ³•è¿›è¡Œè§£æ„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> menuItem <span class="operator">=</span> <span class="type">FastFoodMenuItem</span>.drink(<span class="string">&quot;Coke&quot;</span>, ounces: <span class="number">32</span>)</span><br><span class="line"><span class="keyword">switch</span> menuItem &#123;</span><br><span class="line">  <span class="keyword">case</span> .hamburger(<span class="keyword">let</span> pattyCount): <span class="built_in">print</span>(<span class="string">&quot;a burger with <span class="subst">\(pattyCount)</span> patties&quot;</span>)</span><br><span class="line">  <span class="keyword">case</span> .fries(<span class="keyword">let</span> size): <span class="built_in">print</span>(<span class="string">&quot;a <span class="subst">\(size)</span> order of fries!&quot;</span>)</span><br><span class="line">  <span class="keyword">case</span> .drink(<span class="keyword">let</span> brand, <span class="keyword">let</span> ounces): <span class="built_in">print</span>(<span class="string">&quot;a <span class="subst">\(ounces)</span>oz <span class="subst">\(brand)</span>&quot;</span>)</span><br><span class="line">  <span class="keyword">case</span> .cookie: <span class="built_in">print</span>(<span class="string">&quot;a cookie!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯·æ³¨æ„ï¼Œæ£€ç´¢å…³è”æ•°æ®çš„å±€éƒ¨å˜é‡å¯ä»¥å…·æœ‰ä¸åŒçš„åç§°</p>
<p>ï¼ˆä¾‹å¦‚ <code>pattyCount</code> ä¸ enum å£°æ˜ä¸­çš„ patties çš„æ¯”è¾ƒï¼‰</p>
<p>ï¼ˆä¾‹å¦‚ï¼Œä¸Šé¢çš„ <code>brand</code> åœ¨æšä¸¾å£°æ˜ä¸­ç”šè‡³æ²¡æœ‰åç§°ï¼‰</p>
<h3 id="5-7-æœ‰-Method-ï¼Œä¸èƒ½æœ‰å­˜å‚¨å±æ€§"><a href="#5-7-æœ‰-Method-ï¼Œä¸èƒ½æœ‰å­˜å‚¨å±æ€§" class="headerlink" title="5.7 æœ‰ Method ï¼Œä¸èƒ½æœ‰å­˜å‚¨å±æ€§"></a>5.7 æœ‰ <code>Method</code> ï¼Œä¸èƒ½æœ‰å­˜å‚¨å±æ€§</h3><p>æšä¸¾å¯ä»¥æœ‰æ–¹æ³•ï¼ˆå’Œè®¡ç®—å±æ€§ï¼‰ï¼Œä½†ä¸èƒ½æœ‰å­˜å‚¨å±æ€§ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">FastFoodMenuItem</span> &#123;</span><br><span class="line">  <span class="keyword">case</span> hamburger(numberOfPatties: <span class="type">Int</span>)</span><br><span class="line">  <span class="keyword">case</span> fries(size: <span class="type">FryOrderSize</span>)</span><br><span class="line">  <span class="keyword">case</span> drink(<span class="type">String</span>, ounces: <span class="type">Int</span>)</span><br><span class="line">  <span class="keyword">case</span> cookie</span><br><span class="line"></span><br><span class="line">  <span class="keyword">func</span> <span class="title function_">isIncludedInSpecialOrder</span>(<span class="params">number</span>: <span class="type">Int</span>) -&gt; <span class="type">Bool</span> &#123; &#125;</span><br><span class="line">  <span class="keyword">var</span> colories: <span class="type">Int</span> &#123; <span class="comment">// switch on self and calculate caloric value here &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ï¼Œ<code>colories</code> å’Œ <code>isIncludedInSpecialOrder</code> åˆ†åˆ«ä¸ºè®¡ç®—å±æ€§å’Œæ–¹æ³•ã€‚</p>
<p>æšä¸¾çš„çŠ¶æ€ä»…å–å†³äºå®ƒæ‰€å¤„çš„ <code>case</code> ä»¥åŠè¯¥ <code>case</code> çš„å…³è”æ•°æ®.</p>
<p>åœ¨æšä¸¾è‡ªå·±çš„æ–¹æ³•ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ self â€¦</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">FastFoodMenuItem</span> &#123;</span><br><span class="line">  <span class="operator">...</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">func</span> <span class="title function_">isIncludedInSpecialOrder</span>(<span class="params">number</span>: <span class="type">Int</span>) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> .hamburger(<span class="keyword">let</span> pettyCount): <span class="keyword">return</span> pettyCount <span class="operator">==</span> number</span><br><span class="line">      <span class="keyword">case</span> .fries, .cookie: <span class="keyword">return</span> <span class="literal">true</span> <span class="comment">// a drink and cookie in every special order</span></span><br><span class="line">      <span class="keyword">case</span> .drink(<span class="keyword">_</span>, <span class="keyword">let</span> ounces): <span class="keyword">return</span> ounces <span class="operator">==</span> <span class="number">16</span> <span class="comment">// &amp; 16oz drink of any kind</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-8-è·å–æšä¸¾çš„æ‰€æœ‰æˆå‘˜"><a href="#5-8-è·å–æšä¸¾çš„æ‰€æœ‰æˆå‘˜" class="headerlink" title="5.8 è·å–æšä¸¾çš„æ‰€æœ‰æˆå‘˜"></a>5.8 è·å–æšä¸¾çš„æ‰€æœ‰æˆå‘˜</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">TeslaModel</span>: <span class="title class_ inherited__">CaseIterable</span> &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="type">X</span></span><br><span class="line">  <span class="keyword">case</span> <span class="type">S</span></span><br><span class="line">  <span class="keyword">case</span> <span class="type">Three</span></span><br><span class="line">  <span class="keyword">case</span> <span class="type">Y</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œè¿™ä¸ªæšä¸¾å°†æœ‰ä¸€ä¸ªé™æ€å˜é‡ <code>.allCases</code>ï¼Œå¯ä»¥è¿­ä»£ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> model <span class="keyword">in</span> <span class="type">TestlaModel</span>.allCases &#123;</span><br><span class="line">  reportSalesNumbers(for: model)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">func</span> <span class="title function_">reportSalesNumbers</span>(<span class="params">for</span> <span class="params">model</span>: <span class="type">TeslaModel</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> model &#123; <span class="operator">...</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-optional"><a href="#6-optional" class="headerlink" title="6. optional"></a>6. <code>optional</code></h3><p><strong>optional æ˜¯ä¸€ä¸ªæšä¸¾</strong>ã€‚å®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Optional</span>&lt;<span class="type">T</span>&gt; &#123; <span class="comment">// a generic type</span></span><br><span class="line">  <span class="keyword">case</span> none</span><br><span class="line">  <span class="keyword">case</span> <span class="keyword">some</span>(<span class="type">T</span>) <span class="comment">// the some case has associated value of type T</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥çœ‹åˆ°å®ƒåªèƒ½æœ‰ä¸¤ç§å€¼ï¼š å·²è®¾ç½®å€¼çš„ case ï¼ˆ<code>some</code>ï¼‰ æˆ–æœªè®¾ç½®å€¼çš„ caseï¼ˆ<code>none</code>ï¼‰ã€‚åœ¨å·²è®¾ç½®çš„ case ä¸­ï¼Œå®ƒå¯ä»¥æœ‰ä¸€äº›å…³è”å€¼ï¼Œå®ƒä»¬æ˜¯â€œgeneric typeâ€ <code>T</code> ã€‚</p>
<p>æˆ‘ä»¬åœ¨å“ªäº›åœ°æ–¹ä½¿ç”¨ Optionalï¼Ÿæˆ‘ä»¬å¯èƒ½æœ‰ä¸€ä¸ªå€¼ï¼Œå®ƒæœ‰æ—¶å¯ä»¥æ˜¯â€œæœªè®¾ç½®â€ã€â€œæœªæŒ‡å®šâ€æˆ–â€œæœªç¡®å®šâ€çš„ã€‚è¿™ç§æƒ…å†µç»å¸¸å‘ç”Ÿã€‚è¿™å°±æ˜¯ Swift å¼•å…¥è®¸å¤šâ€œè¯­æ³•ç³–â€çš„åŸå› ï¼Œä»¥ä¾¿äºä½¿ç”¨å¯é€‰å€¼ï¼ˆOptionalsï¼‰ã€‚</p>
<h3 id="6-1-optional-å£°æ˜"><a href="#6-1-optional-å£°æ˜" class="headerlink" title="6.1 optional å£°æ˜"></a>6.1 optional å£°æ˜</h3><p><strong>å£°æ˜</strong>ä¸€ä¸ªç±»å‹ä¸º <code>Optional&lt;T&gt;</code> çš„å˜é‡å¯ä»¥ä½¿ç”¨è¯­æ³• <code>T?</code>ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥å°†å…¶èµ‹å€¼ä¸º <code>nil</code>ï¼ˆOptional.noneï¼‰ï¼Œæˆ–è€…å¯ä»¥å°†å…¶èµ‹å€¼ä¸ºç±»å‹ <code>T</code> çš„æŸä¸ªå€¼ï¼ˆ<code>Optional.some</code>ï¼Œå¹¶ä½¿å¾— <code>å…³è”å€¼ = è¯¥å€¼</code>ï¼‰ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œå¯é€‰å€¼æ€»æ˜¯éšå¼åœ°ä»¥ <code>nil</code> å¼€å§‹ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> hello: <span class="type">String</span>?             <span class="keyword">var</span> hello: <span class="type">Optional</span>&lt;<span class="type">String</span>&gt; <span class="operator">=</span> .none</span><br><span class="line"><span class="keyword">var</span> hello: <span class="type">String</span>? <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>   <span class="keyword">var</span> hello: <span class="type">Optional</span>&lt;<span class="type">String</span>&gt; <span class="operator">=</span> .some(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> hello: <span class="type">String</span>? <span class="operator">=</span> <span class="literal">nil</span>       <span class="keyword">var</span> hello: <span class="type">Optional</span>&lt;<span class="type">String</span>&gt; <span class="operator">=</span> .none</span><br></pre></td></tr></table></figure>

<h3 id="6-2-optional-è®¿é—®å€¼"><a href="#6-2-optional-è®¿é—®å€¼" class="headerlink" title="6.2 optional è®¿é—®å€¼"></a>6.2 optional è®¿é—®å€¼</h3><ol>
<li>ä½ å¯ä»¥é€šè¿‡ <code>!</code> å¼ºåˆ¶è®¿é—®å…³è”å€¼ã€‚</li>
</ol>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> hello: <span class="type">String</span>? <span class="operator">=</span> <span class="operator">...</span></span><br><span class="line"><span class="built_in">print</span>(hello<span class="operator">!</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> hello &#123;</span><br><span class="line">  <span class="keyword">case</span> .none: <span class="comment">// raise an exception (crash)</span></span><br><span class="line">  <span class="keyword">case</span> .some(<span class="keyword">let</span> data): <span class="built_in">print</span>(data)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>æˆ–è€…â€œå®‰å…¨åœ°â€ä½¿ç”¨ <code>if let</code> ç„¶åä½¿ç”¨ <code>&#123; &#125;</code> ä¸­å®‰å…¨è·å–çš„å…³è”å€¼ã€‚</li>
</ol>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> safehello <span class="operator">=</span> hello &#123;</span><br><span class="line">  <span class="built_in">print</span>(safehello)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// do something else</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> hello &#123;</span><br><span class="line">  <span class="keyword">case</span> .none: <span class="comment">// raise an exception (crash)</span></span><br><span class="line">  <span class="keyword">case</span> .some(<span class="keyword">let</span> safehello): <span class="built_in">print</span>(safehello)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨è¾ƒçŸ­çš„ç‰ˆæœ¬ï¼ŒåŒ <code>2</code>ã€‚</li>
</ol>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> hello &#123;</span><br><span class="line">  <span class="built_in">print</span>(hello)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// do something else</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>è¿˜æœ‰ <code>??</code> å®ƒæ‰§è¡Œ â€œOptional defaultingâ€ï¼Œè¢«ç§°ä¸ºâ€œnil-coalescng è¿ç®—ç¬¦â€ã€‚</li>
</ol>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> hello: <span class="type">String</span>? <span class="operator">=</span> <span class="operator">...</span></span><br><span class="line"><span class="keyword">let</span> y <span class="operator">=</span> x <span class="operator">??</span> <span class="string">&quot;foo&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> hello &#123;</span><br><span class="line">  <span class="keyword">case</span> .none: y <span class="operator">=</span> <span class="string">&quot;foo&quot;</span></span><br><span class="line">  <span class="keyword">case</span> .some(<span class="keyword">let</span> data): y <span class="operator">=</span> data</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å›åˆ° Codeã€‚</p>
<h2 id="7-ViewModel-Intent-Part-2"><a href="#7-ViewModel-Intent-Part-2" class="headerlink" title="7. ViewModel Intent - Part 2"></a>7. ViewModel Intent - Part 2</h2><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  MemorizeGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">func</span> <span class="title function_">index</span>(<span class="params">of</span> <span class="params">card</span>: <span class="type">Card</span>) -&gt; <span class="type">Int</span>? &#123;</span><br><span class="line">        <span class="keyword">for</span> index <span class="keyword">in</span> cards.indices &#123;</span><br><span class="line">            <span class="keyword">if</span> cards[index].id <span class="operator">==</span> card.id &#123;</span><br><span class="line">                <span class="keyword">return</span> index</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>è®©æˆ‘ä»¬ä½¿ç”¨ Optional ä¿®å¤è™šå‡ä¿¡æ¯ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  MemorizeGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">choose</span>(<span class="keyword">_</span> <span class="params">card</span>: <span class="type">Card</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> chosenIndex <span class="operator">=</span> index(of: card) &#123;</span><br><span class="line">            cards[chosenIndex].isFaceUp.toggle()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬è¿˜éœ€è¦æ›´æ”¹ choose å‡½æ•°ï¼Œå› ä¸º <code>chosenIndex</code> ç°åœ¨æ˜¯ Optional ç±»å‹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>!</code>ï¼Œä½†å¦‚æœ <code>index</code> è¿”å› <code>nil</code> ä¼šæŠ¥é”™ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ safe unwrapã€‚</p>
<h3 id="7-1-å‡½æ•°ä½œä¸ºå‚æ•°"><a href="#7-1-å‡½æ•°ä½œä¸ºå‚æ•°" class="headerlink" title="7.1 å‡½æ•°ä½œä¸ºå‚æ•°"></a>7.1 å‡½æ•°ä½œä¸ºå‚æ•°</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  MemorizeGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">choose</span>(<span class="keyword">_</span> <span class="params">card</span>: <span class="type">Card</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> chosenIndex <span class="operator">=</span> cards.firstIndex(where: &#123; <span class="variable">$0</span>.id <span class="operator">==</span> card.id &#125;) &#123;</span><br><span class="line">            cards[chosenIndex].isFaceUp.toggle()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä¸å¿…è‡ªè¡Œå®ç°å‡½æ•° <code>index</code>ã€‚æˆ‘ä»¬å®é™…ä¸Šå¯ä»¥æ‰¾åˆ° <code>chosenIndex</code>ã€‚</p>
<h3 id="7-2-Flip-the-cards-down-when-NOT-matched"><a href="#7-2-Flip-the-cards-down-when-NOT-matched" class="headerlink" title="7.2 Flip the cards down when NOT matched"></a>7.2 Flip the cards down when NOT matched</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  MemorizeGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> indexOfTheOneAndOnlyFaceUpCard: <span class="type">Int</span>?</span><br><span class="line"></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">choose</span>(<span class="keyword">_</span> <span class="params">card</span>: <span class="type">Card</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> chosenIndex <span class="operator">=</span> cards.firstIndex(where: &#123; <span class="variable">$0</span>.id <span class="operator">==</span> card.id &#125;) &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="operator">!</span>cards[chosenIndex].isFaceUp <span class="operator">&amp;&amp;</span> <span class="operator">!</span>cards[chosenIndex].isMatched &#123;</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">let</span> potentialMatchIndex <span class="operator">=</span> indexOfTheOneAndOnlyFaceUpCard &#123;</span><br><span class="line">                    <span class="comment">// Two Cards Face Up</span></span><br><span class="line">                    <span class="keyword">if</span> cards[chosenIndex].content <span class="operator">==</span> cards[potentialMatchIndex].content &#123;</span><br><span class="line">                        cards[chosenIndex].isMatched <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">                        cards[potentialMatchIndex].isMatched <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    indexOfTheOneAndOnlyFaceUpCard <span class="operator">=</span> <span class="literal">nil</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">for</span> index <span class="keyword">in</span> cards.indices &#123;</span><br><span class="line">                        cards[index].isFaceUp <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    indexOfTheOneAndOnlyFaceUpCard <span class="operator">=</span> chosenIndex</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            cards[chosenIndex].isFaceUp <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬çš„æ¸¸æˆé€»è¾‘ç°åœ¨çœ‹èµ·æ¥æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦åœ¨ç‰ŒåŒ¹é…æ—¶éšè—å®ƒä»¬ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> base <span class="operator">=</span> <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">12</span>)</span><br><span class="line">            <span class="type">Group</span> &#123;</span><br><span class="line">                base.fill(.white)</span><br><span class="line">                base.strokeBorder(lineWidth: <span class="number">2</span>)</span><br><span class="line">                <span class="type">Text</span>(card.content)</span><br><span class="line">                    .font(.system(size: <span class="number">200</span>))</span><br><span class="line">                    .minimumScaleFactor(<span class="number">0.01</span>)</span><br><span class="line">                    .aspectRatio(<span class="number">1</span>, contentMode: .fit)</span><br><span class="line">            &#125;</span><br><span class="line">            .opacity(card.isFaceUp <span class="operator">?</span> <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line">            base.fill().opacity(card.isFaceUp <span class="operator">?</span> <span class="number">0</span> : <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .opacity(card.isFaceUp <span class="operator">||</span> <span class="operator">!</span>card.isMatched <span class="operator">?</span> <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å›åˆ°æˆ‘ä»¬çš„è§†å›¾ï¼Œè®©åŒ¹é…çš„å¡ç‰‡ä¸é€æ˜åº¦ä¸º 0ã€‚</p>
<p>æˆ‘ä»¬çš„ä¸»è¦æ¸¸æˆé€»è¾‘ç°åœ¨åº”è¯¥å¯ä»¥å·¥ä½œäº†ã€‚</p>
<h2 id="7-3-set-get-è®¡ç®—å±æ€§"><a href="#7-3-set-get-è®¡ç®—å±æ€§" class="headerlink" title="7.3 set+get è®¡ç®—å±æ€§"></a>7.3 set+get è®¡ç®—å±æ€§</h2><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  MemorizeGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">        <span class="keyword">var</span> indexOfTheOneAndOnlyFaceUpCard: <span class="type">Int</span>? &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> faceUpCardIndices <span class="operator">=</span> [<span class="type">Int</span>]()</span><br><span class="line">            <span class="keyword">for</span> index <span class="keyword">in</span> cards.indices &#123;</span><br><span class="line">                <span class="keyword">if</span> cards[index].isFaceUp &#123;</span><br><span class="line">                    faceUpCardIndices.append(index)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> faceUpCardIndices.count <span class="operator">==</span> <span class="number">1</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> faceUpCardIndices.first</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> index <span class="keyword">in</span> cards.indices &#123;</span><br><span class="line">                <span class="keyword">if</span> index <span class="operator">==</span> newValue &#123;</span><br><span class="line">                    cards[index].isFaceUp <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    cards[index].isFaceUp <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å°† <code>indexOfTheOneAndOnlyFaceUpCard</code> åˆ¶ä½œæˆä¸€ä¸ªè®¡ç®—å±æ€§æ¥ä¼˜åŒ–æ¸¸æˆé€»è¾‘ã€‚è¿™ä¸ªè®¡ç®—å±æ€§åœ¨è¢«è·å–æ—¶å°†è¿”å›å…¶ä»–é¢æœä¸Šçš„å¡ç‰‡ï¼ˆæˆ– nilï¼‰ã€‚å½“è¢«è®¾ç½®ï¼ˆ<code>indexOfTheOneAndOnlyFaceUpCard = something </code>ï¼‰æ—¶ï¼Œå®ƒå°†æŠŠä¼ å…¥çš„å¡ç‰‡è®¾ç½®ä¸ºé¢æœä¸Šï¼Œæ‰€æœ‰å…¶ä»–å¡ç‰‡åˆ™é¢æœä¸‹ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  MemorizeGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">choose</span>(<span class="keyword">_</span> <span class="params">card</span>: <span class="type">Card</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> chosenIndex <span class="operator">=</span> cards.firstIndex(where: &#123; <span class="variable">$0</span>.id <span class="operator">==</span> card.id &#125;) &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="operator">!</span>cards[chosenIndex].isFaceUp <span class="operator">&amp;&amp;</span> <span class="operator">!</span>cards[chosenIndex].isMatched &#123;</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">let</span> potentialMatchIndex <span class="operator">=</span> indexOfTheOneAndOnlyFaceUpCard &#123;</span><br><span class="line">                    <span class="comment">// Two Cards Face Up</span></span><br><span class="line">                    <span class="keyword">if</span> cards[chosenIndex].content <span class="operator">==</span> cards[potentialMatchIndex].content &#123;</span><br><span class="line">                        cards[chosenIndex].isMatched <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">                        cards[potentialMatchIndex].isMatched <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    indexOfTheOneAndOnlyFaceUpCard <span class="operator">=</span> chosenIndex</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            cards[chosenIndex].isFaceUp <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬çš„è®¡ç®—å±æ€§å·²ç»å®ç°äº†å¾ˆå¤šæ­¥éª¤ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ <code>choose</code> å‡½æ•°è¿›è¡Œç®€åŒ–ã€‚</p>
<h3 id="7-4-choose-å‡½æ•°ä¼˜åŒ–"><a href="#7-4-choose-å‡½æ•°ä¼˜åŒ–" class="headerlink" title="7.4 choose å‡½æ•°ä¼˜åŒ–"></a>7.4 <code>choose</code> å‡½æ•°ä¼˜åŒ–</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  MemorizeGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> indexOfTheOneAndOnlyFaceUpCard: <span class="type">Int</span>? &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> faceUpCardIndices <span class="operator">=</span> cards.indices.filter &#123; index <span class="keyword">in</span> cards[index].isFaceUp &#125;</span><br><span class="line">            <span class="keyword">return</span> faceUpCardIndices.count <span class="operator">==</span> <span class="number">1</span> <span class="operator">?</span> faceUpCardIndices.first : <span class="literal">nil</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123;</span><br><span class="line">            cards.indices.forEach &#123; cards[<span class="variable">$0</span>].isFaceUp <span class="operator">=</span> (newValue <span class="operator">==</span> <span class="variable">$0</span>) &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œæˆ‘ä»¬ä½¿ç”¨ functional programming æ¥ä¼˜åŒ–æˆ‘ä»¬çš„ä»£ç ã€‚æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ <code>extension</code> ä½¿ä»£ç å˜å¾—æ›´å¥½ã€‚</p>
<h3 id="7-5-extension"><a href="#7-5-extension" class="headerlink" title="7.5 extension"></a>7.5 <code>extension</code></h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  MemorizeGame.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MemoryGame</span>&lt;<span class="type">CardContent</span>&gt; <span class="keyword">where</span> <span class="type">CardContent</span>: <span class="type">Equatable</span> &#123;</span><br><span class="line">    <span class="keyword">private(set)</span> <span class="keyword">var</span> cards: <span class="type">Array</span>&lt;<span class="type">Card</span>&gt;</span><br><span class="line"></span><br><span class="line">        <span class="operator">...</span></span><br><span class="line">      <span class="operator">...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> indexOfTheOneAndOnlyFaceUpCard: <span class="type">Int</span>? &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; cards.indices.filter &#123; index <span class="keyword">in</span> cards[index].isFaceUp &#125;.only &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123; cards.indices.forEach &#123; cards[<span class="variable">$0</span>].isFaceUp <span class="operator">=</span> (newValue <span class="operator">==</span> <span class="variable">$0</span>) &#125; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">      <span class="operator">...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">Array</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> only: <span class="type">Element</span>? &#123;</span><br><span class="line">        count <span class="operator">==</span> <span class="number">1</span> <span class="operator">?</span> first : <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯¹ <code>array</code> ç±»å‹æ·»åŠ  <code>extension</code>ï¼Œä»¥ä¾¿åœ¨æˆ‘ä»¬çš„ <code>indexOfTheOneAndOnlyFaceUpCard</code> è®¡ç®—å±æ€§ä¸­ä½¿ç”¨ <code>.only</code>ã€‚</p>
]]></content>
      <categories>
        <category>code</category>
        <category>swift</category>
      </categories>
      <tags>
        <tag>cs193p</tag>
      </tags>
  </entry>
  <entry>
    <title>Stanford cs193p 06 | Layout @ViewBuilder</title>
    <url>/2024/12/31/Stanford-cs193p-06-Layout-ViewBuilder/</url>
    <content><![CDATA[<p>æœ¬æ–‡æ˜¯æ–¯å¦ç¦å¤§å­¦ cs193p å…¬å¼€è¯¾ç¨‹ç¬¬ 06 é›†çš„ç›¸å…³ç¬”è®°ã€‚</p>
<span id="more"></span>

<p>cs193p è¯¾ç¨‹ä»‹ç»:</p>
<blockquote>
<p>The lectures for the Spring 2023 version of Stanford Universityâ€™s course CS193p (Developing Applications for iOS using SwiftUI) were given in person but, unfortunately, were not video recorded. However, we did capture the laptop screen of the presentations and demos as well as the associated audio. You can watch these screen captures using the links below. Youâ€™ll also find links to supporting material that was distributed to students during the quarter (homework, demo code, etc.).</p>
</blockquote>
<p>cs193p è¯¾ç¨‹ç½‘å€: <a href="https://cs193p.sites.stanford.edu/2023">https://cs193p.sites.stanford.edu/2023</a></p>
<h2 id="0-æœ¬èŠ‚æ¦‚è¦"><a href="#0-æœ¬èŠ‚æ¦‚è¦" class="headerlink" title="0 æœ¬èŠ‚æ¦‚è¦"></a>0 æœ¬èŠ‚æ¦‚è¦</h2><ul>
<li><p><strong>å¸ƒå±€</strong><br>Swift å¦‚ä½•å°†ç©ºé—´åˆ†é…ç»™å…¶è§†å›¾ï¼Ÿ<br>æ¼”ç¤ºï¼šæ ¹æ®æä¾›çš„ç©ºé—´ä¸ºæˆ‘ä»¬çš„å¡ç‰‡é€‰æ‹©é€‚å½“çš„å¤§å°ã€‚</p>
</li>
<li><p><strong>@ViewBuilder</strong><br>å…³äºå®ƒå¦‚ä½•å·¥ä½œçš„æ›´å¤šä¿¡æ¯ã€‚<br>æ¼”ç¤ºï¼šåˆ›å»ºæˆ‘ä»¬è‡ªå·±çš„â€œç»„åˆè§†å›¾â€ (AspectVGrid)ã€‚</p>
</li>
</ul>
<h2 id="1-å¸ƒå±€"><a href="#1-å¸ƒå±€" class="headerlink" title="1. å¸ƒå±€"></a>1. å¸ƒå±€</h2><p><strong>è§†å›¾æ˜¯å¦‚ä½•åˆ†é…å±å¹•ä¸Šçš„ç©ºé—´çš„ï¼Ÿ</strong></p>
<ol>
<li>å®¹å™¨è§†å›¾ä¸ºå†…éƒ¨è§†å›¾æä¾›éƒ¨åˆ†æˆ–è€…å…¨éƒ¨çš„å®¹å™¨è§†å›¾ç©ºé—´ã€‚</li>
<li>å†…éƒ¨è§†å›¾æ¥ç€é€‰æ‹©å®ƒä»¬æƒ³è¦çš„å¤§å°ï¼ˆåªæœ‰å®ƒä»¬å¯ä»¥è¿™æ ·åšï¼‰ã€‚</li>
<li>ç„¶åå®¹å™¨è§†å›¾å¯¹å†…éƒ¨è§†å›¾è¿›è¡Œä½ç½®æ’åˆ—ã€‚</li>
</ol>
<h3 id="1-1-å †å è§†å›¾-HStackã€VStack"><a href="#1-1-å †å è§†å›¾-HStackã€VStack" class="headerlink" title="1.1 å †å è§†å›¾ HStackã€VStack"></a>1.1 å †å è§†å›¾ <code>HStack</code>ã€<code>VStack</code></h3><p>å †å è§†å›¾åˆ’åˆ†ç©ºé—´çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li><p><strong>å †å è§†å›¾</strong> å°†å®ƒä»¬è·å¾—çš„ç©ºé—´åˆ’åˆ†ï¼Œç„¶åå°†ç©ºé—´æä¾›ç»™å†…éƒ¨è§†å›¾ã€‚å®ƒé¦–å…ˆå°†ç©ºé—´æä¾›ç»™å…¶â€œæœ€ä¸çµæ´»â€ï¼ˆå³å°ºå¯¸æ–¹é¢ï¼‰ çš„å­è§†å›¾ã€‚</p>
<ul>
<li><strong>â€œä¸çµæ´»â€è§†å›¾çš„ç¤ºä¾‹</strong>ï¼šå›¾åƒï¼ˆå®ƒå¸Œæœ›æœ‰ä¸€ä¸ªå›ºå®šçš„å¤§å°ï¼‰ã€‚</li>
<li><strong>å¦ä¸€ä¸ªç¤ºä¾‹ï¼ˆç¨å¾®çµæ´»ä¸€äº›ï¼‰</strong>ï¼šæ–‡æœ¬ï¼ˆæ€»æ˜¯å¸Œæœ›æ ¹æ®å…¶æ–‡æœ¬ç²¾å‡†è°ƒæ•´å¤§å°ï¼‰ã€‚</li>
<li><strong>éå¸¸çµæ´»è§†å›¾ç¤ºä¾‹</strong>ï¼šåœ†è§’çŸ©å½¢ï¼ˆæ€»æ˜¯ä¼šä½¿ç”¨æ‰€æä¾›çš„ä»»ä½•ç©ºé—´ï¼‰ã€‚</li>
</ul>
</li>
<li><p>åœ¨ä¸€ä¸ªè§†å›¾é€‰æ‹©å®ƒæƒ³è¦çš„å¤§å°åï¼Œå…¶å¤§å°å°†ä»å¯ç”¨ç©ºé—´ä¸­ç§»é™¤ã€‚ç„¶åå †å è§†å›¾å°†ç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ªâ€œæœ€ä¸çµæ´»â€çš„è§†å›¾ã€‚</p>
</li>
<li><p><strong>éå¸¸çµæ´»çš„è§†å›¾</strong>ï¼ˆå³é‚£äº›å°†å ç”¨æ‰€æœ‰æä¾›ç©ºé—´çš„è§†å›¾ï¼‰ä¼šå¤§è‡´å‡åŒ€åˆ†é…ç©ºé—´ã€‚</p>
</li>
<li><p>é‡å¤ä¸Šè¿°è¿‡ç¨‹ã€‚</p>
</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p>
<ul>
<li>åœ¨å †å è§†å›¾å†…éƒ¨ï¼Œè§†å›¾é€‰æ‹©è‡ªå·±çš„å¤§å°åï¼Œå †å è§†å›¾ä¼šè°ƒæ•´å…¶å¤§å°ä»¥é€‚åº”å®ƒä»¬ã€‚</li>
<li>å¦‚æœå †å ä¸­çš„ä»»ä½•è§†å›¾æ˜¯â€œéå¸¸çµæ´»çš„â€ï¼Œé‚£ä¹ˆå †å è§†å›¾ä¹Ÿå°†æ˜¯â€œéå¸¸çµæ´»çš„â€ã€‚</li>
</ul>
<h4 id="1-1-1-å¸ƒå±€å·¥å…·"><a href="#1-1-1-å¸ƒå±€å·¥å…·" class="headerlink" title="1.1.1 å¸ƒå±€å·¥å…·"></a>1.1.1 å¸ƒå±€å·¥å…·</h4><p>æœ‰å‡ ä¸ªéå¸¸æœ‰ä»·å€¼çš„å¸ƒå±€è§†å›¾ï¼Œé€šå¸¸è¢«æ”¾ç½®åœ¨å †æ ˆä¸­ï¼š</p>
<ul>
<li><p><strong>Spacer (minLength: CGFloat)</strong><br>æ€»æ˜¯å ç”¨å…¶æ‰€åˆ†é…çš„æ‰€æœ‰ç©ºé—´ã€‚<br>ä¸ç»˜åˆ¶ä»»ä½•å†…å®¹ã€‚<br><code>minLength</code> é»˜è®¤è®¾ç½®ä¸ºåœ¨ç‰¹å®šå¹³å°ä¸Šä½ å¯èƒ½å¸Œæœ›çš„æœ€å°é—´è·ã€‚</p>
</li>
<li><p><strong>Divider()</strong><br>åœ¨å †å è§†å›¾çš„å¸ƒå±€æ–¹å‘ä¸Šç»˜åˆ¶åˆ†å‰²çº¿ã€‚<br>ä¾‹å¦‚ï¼Œåœ¨ <code>HStack</code> ä¸­ï¼ŒDivider ä¼šç»˜åˆ¶ä¸€æ¡å‚ç›´çº¿ã€‚<br>åœ¨å †å çš„æ–¹å‘ä¸Šï¼Œå®ƒåªå ç”¨ç»˜åˆ¶è¯¥çº¿æ‰€éœ€çš„æœ€å°ç©ºé—´ã€‚<br>åœ¨æ¨ªå‘ï¼ˆäº¤å‰ï¼‰æ–¹å‘ä¸Šï¼Œå®ƒä¼šå ç”¨æ‰€æœ‰æä¾›ç»™å®ƒçš„ç©ºé—´ã€‚</p>
</li>
</ul>
<h4 id="1-1-2-å¸ƒå±€ä¼˜å…ˆçº§"><a href="#1-1-2-å¸ƒå±€ä¼˜å…ˆçº§" class="headerlink" title="1.1.2 å¸ƒå±€ä¼˜å…ˆçº§"></a>1.1.2 å¸ƒå±€ä¼˜å…ˆçº§</h4><p>å †å è§†å›¾é€‰æ‹©æ¥ä¸‹æ¥è¦æä¾›ç©ºé—´çš„è§†å›¾ï¼Œå¯ä»¥é€šè¿‡ <code>.layoutPriority(Double)</code>è¢«è¦†ç›–ã€‚æ¢å¥è¯è¯´ï¼Œå¸ƒå±€ä¼˜å…ˆçº§å¯ä»¥ä¼˜å…ˆäºâ€œæœ€ä¸çµæ´»â€çš„è§†å›¾ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">HStack</span> &#123;</span><br><span class="line">	<span class="type">Text</span>(<span class="string">&quot;Important&quot;</span>).layoutPriority(<span class="number">100</span>) <span class="comment">// ä»»ä½•æµ®ç‚¹æ•°éƒ½å¯ä»¥</span></span><br><span class="line">	<span class="type">Image</span>(systemName: <span class="string">&quot;arrow.up&quot;</span>) <span class="comment">// é»˜è®¤å¸ƒå±€ä¼˜å…ˆçº§ä¸º 0</span></span><br><span class="line">	<span class="type">Text</span>(<span class="string">&quot;Unimportant&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸Šé¢çš„ <code>Text(&quot;important&quot;)</code> æ–‡æœ¬å°†é¦–å…ˆè·å¾—æ‰€éœ€ç©ºé—´ã€‚</li>
<li>ç„¶å <code>Image</code> ä¼šè·å¾—å®ƒçš„ç©ºé—´ï¼ˆå› ä¸ºå®ƒæ¯” <code>Text(&quot;Unimportant&quot;)</code> æ›´ä¸çµæ´»ï¼‰ã€‚</li>
<li>æœ€åï¼Œ <code>Text(&quot;Unimportant&quot;)</code> å°†å¿…é¡»å°è¯•é€‚åº”å‰©ä½™ç©ºé—´ã€‚å¦‚æœæ–‡æœ¬è·å¾—çš„ç©ºé—´ä¸è¶³ï¼Œå®ƒå°†çœç•¥æ˜¾ç¤ºï¼ˆä¾‹å¦‚ï¼Œâ€œSwift isâ€¦â€è€Œä¸æ˜¯â€œSwift is greatï¼â€ï¼‰ã€‚</li>
</ul>
<h4 id="1-1-3-è§†å›¾å¯¹é½"><a href="#1-1-3-è§†å›¾å¯¹é½" class="headerlink" title="1.1.3 è§†å›¾å¯¹é½"></a>1.1.3 è§†å›¾å¯¹é½</h4><p>å †å è§†å›¾å¸ƒå±€å†…éƒ¨è§†å›¾çš„å¦ä¸€ä¸ªé‡è¦æ–¹é¢æ˜¯å¯¹é½æ–¹å¼ã€‚</p>
<p>å½“ <code>VStack</code> å°†è§†å›¾æŒ‰åˆ—å¸ƒå±€æ—¶ï¼Œå¦‚æœè§†å›¾çš„å®½åº¦ä¸ç›¸åŒï¼Œä¼šå¦‚ä½•å¤„ç†ï¼Ÿå®ƒæ˜¯â€œå·¦å¯¹é½â€å®ƒä»¬ï¼Œè¿˜æ˜¯å°†å®ƒä»¬å±…ä¸­ï¼Œæˆ–è€…ä»¥å…¶ä»–æ–¹å¼æ’åˆ—ï¼Ÿè¿™å¯ä»¥é€šè¿‡ä¼ é€’ç»™å †å è§†å›¾çš„å‚æ•°æ¥æŒ‡å®šï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">VStack</span>(alignment: .leading) &#123;</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>ä¸ºä»€ä¹ˆä½¿ç”¨ <code>.leading</code> è€Œä¸æ˜¯ <code>.left</code>ï¼Ÿ<br>å› ä¸ºå †å è§†å›¾ä¼šè‡ªåŠ¨é€‚åº”æ–‡æœ¬ä»å³å‘å·¦çš„ç¯å¢ƒï¼ˆä¾‹å¦‚é˜¿æ‹‰ä¼¯è¯­æˆ–å¸Œä¼¯æ¥è¯­ï¼‰ã€‚<code>leading</code> å¯¹é½æ–¹å¼ä¼šå°† <code>VStack</code> ä¸­çš„å†…å®¹æ’åˆ—åˆ°æ–‡æœ¬å¼€å§‹çš„è¾¹ç¼˜ã€‚</p>
</li>
<li><p>æ–‡æœ¬åŸºçº¿ä¹Ÿå¯ä»¥ç”¨äºå¯¹é½ï¼ˆä¾‹å¦‚ <code>HStack(alignment: .firstTextBaseline) &#123; ... &#125;</code>ï¼‰ã€‚</p>
</li>
<li><p>æ‚¨ç”šè‡³å¯ä»¥å®šä¹‰è‡ªå·±çš„â€œå¯¹é½æŒ‡å—â€ï¼Œæ¥æŒ‡å®šè‡ªå®šä¹‰çš„å¯¹é½æ–¹å¼ã€‚ç›®å‰åªä½¿ç”¨å†…ç½®çš„å¯¹é½æ–¹å¼ï¼ˆ<code>.textBaselines</code>ã€<code>.center </code>ã€<code>.top </code>ã€<code>.trailing</code> ç­‰ï¼‰ã€‚</p>
</li>
</ul>
<h3 id="1-2-LazyVStackã€LazyHStackã€LazyVGridã€LazyHGrid-å’Œ-Grid"><a href="#1-2-LazyVStackã€LazyHStackã€LazyVGridã€LazyHGrid-å’Œ-Grid" class="headerlink" title="1.2 LazyVStackã€LazyHStackã€LazyVGridã€LazyHGrid å’Œ Grid"></a>1.2 <code>LazyVStack</code>ã€<code>LazyHStack</code>ã€<code>LazyVGrid</code>ã€<code>LazyHGrid</code> å’Œ <code>Grid</code></h3><h4 id="1-2-1-LazyVStack-å’Œ-LazyHStack"><a href="#1-2-1-LazyVStack-å’Œ-LazyHStack" class="headerlink" title="1.2.1 LazyVStack å’Œ LazyHStack"></a>1.2.1 <code>LazyVStack</code> å’Œ <code>LazyHStack</code></h4><ul>
<li>è¿™äº›â€œlazyâ€çš„å †å ç‰ˆæœ¬ä¸ä¼šåˆ›å»ºä»»ä½•ä¸å¯è§çš„è§†å›¾ã€‚</li>
<li>å³ä½¿å†…éƒ¨æœ‰çµæ´»è§†å›¾ï¼Œå®ƒä»¬ä¹Ÿä¸ä¼šå ç”¨æ‰€æœ‰æä¾›ç»™å®ƒä»¬çš„ç©ºé—´ã€‚</li>
<li>åœ¨ <code>ScrollView</code> ä¸­æ—¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¿™äº›å †å è§†å›¾ã€‚</li>
</ul>
<h4 id="1-2-2-LazyVGrid-å’Œ-LazyHGrid"><a href="#1-2-2-LazyVGrid-å’Œ-LazyHGrid" class="headerlink" title="1.2.2 LazyVGrid å’Œ LazyHGrid"></a>1.2.2 <code>LazyVGrid</code> å’Œ <code>LazyHGrid</code></h4><ul>
<li>æˆ‘ä»¬çœ‹åˆ°å®ƒä»¬æ˜¯å¦‚ä½•å¸ƒå±€å…¶è§†å›¾çš„ã€‚</li>
<li>è§†å›¾çš„å¤§å°åŸºäºæä¾›ç»™ <code>LazyVGrid</code> æˆ– <code>LazyHGrid</code> çš„å‚æ•°ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œ<code>columns</code>ï¼‰ã€‚</li>
<li>å¦ä¸€ä¸ªæ–¹å‘å¯ä»¥éšç€æ›´å¤šè§†å›¾çš„æ·»åŠ è€Œå¢é•¿æˆ–ç¼©å°ã€‚</li>
<li>å¦‚æœä¸éœ€è¦ï¼Œ<strong>ä»ä¸ä¼šå ç”¨æ‰€æœ‰æä¾›ç»™å®ƒçš„ç©ºé—´</strong>ã€‚</li>
</ul>
<h4 id="1-2-3-Grid"><a href="#1-2-3-Grid" class="headerlink" title="1.2.3 Grid"></a>1.2.3 <code>Grid</code></h4><ul>
<li>åœ¨æ°´å¹³å’Œå‚ç›´æ–¹å‘ä¸Šä¸ºå®ƒçš„è§†å›¾åˆ†é…ç©ºé—´ï¼ˆæ³¨æ„å®ƒçš„åç§°ä¸­æ²¡æœ‰<code>H</code>æˆ–<code>V</code>ï¼‰ã€‚</li>
<li>åœ¨åˆ—å’Œè¡Œä¹‹é—´æœ‰è®¸å¤šå¯¹é½é€‰é¡¹ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ <code>grid*()</code> ä¿®é¥°ç¬¦ï¼‰ã€‚</li>
<li>é€šå¸¸ç”¨ä½œâ€œç”µå­è¡¨æ ¼è§†å›¾â€æˆ–â€œæ•°æ®è¡¨æ ¼è§†å›¾â€ã€‚</li>
</ul>
<h3 id="1-3-ScrollViewã€ViewThatFitsã€Form-ã€-Listã€Custom-Layout"><a href="#1-3-ScrollViewã€ViewThatFitsã€Form-ã€-Listã€Custom-Layout" class="headerlink" title="1.3 ScrollViewã€ViewThatFitsã€Form ã€ Listã€Custom Layout"></a>1.3 <code>ScrollView</code>ã€<code>ViewThatFits</code>ã€<code>Form</code> ã€ <code>List</code>ã€<code>Custom Layout</code></h3><h4 id="1-3-1-ScrollView"><a href="#1-3-1-ScrollView" class="headerlink" title="1.3.1 ScrollView"></a>1.3.1 <code>ScrollView</code></h4><ul>
<li><code>ScrollView</code> å ç”¨æ‰€æœ‰æä¾›ç»™å®ƒçš„ç©ºé—´ã€‚</li>
<li>å…¶ä¸­çš„è§†å›¾ä¼šè‡ªåŠ¨è°ƒæ•´ä»¥é€‚åº”æ‚¨æ­£åœ¨æ»šåŠ¨çš„æ–¹å‘ã€‚</li>
</ul>
<h4 id="1-3-2-ViewThatFits"><a href="#1-3-2-ViewThatFits" class="headerlink" title="1.3.2 ViewThatFits"></a>1.3.2 <code>ViewThatFits</code></h4><ul>
<li>æ¥å—ä¸€ç»„å®¹å™¨è§†å›¾ï¼ˆä¾‹å¦‚ <code>HStack</code> å’Œ <code>VStack</code>ï¼‰ï¼Œå¹¶é€‰æ‹©ä¸€ä¸ªé€‚åˆçš„è§†å›¾ã€‚</li>
<li>å½“ä¸ºæ¨ªå±ä¸ç«–å±å¸ƒå±€æ—¶ï¼Œè¿™éå¸¸æœ‰ç”¨ã€‚æˆ–è€…å½“ä½¿ç”¨åŠ¨æ€ç±»å‹å­—å·å¸ƒå±€æ—¶ï¼ˆè¾ƒå¤§çš„å­—ä½“å¯èƒ½æ— æ³•åœ¨æ¨ªå‘ä¸Šé€‚åº”ï¼‰ã€‚</li>
</ul>
<h4 id="1-3-3-Formã€Listã€OutlineGroup-å’Œ-DisclosureGroup"><a href="#1-3-3-Formã€Listã€OutlineGroup-å’Œ-DisclosureGroup" class="headerlink" title="1.3.3 Formã€Listã€OutlineGroup å’Œ DisclosureGroup"></a>1.3.3 <code>Form</code>ã€<code>List</code>ã€<code>OutlineGroup</code> å’Œ <code>DisclosureGroup</code></h4><ul>
<li>è¿™äº›ç±»ä¼¼äºâ€œéå¸¸æ™ºèƒ½çš„ <code>VStack</code>â€ï¼ˆå…·å¤‡æ»šåŠ¨ã€é€‰æ‹©ã€å±‚çº§ç­‰åŠŸèƒ½ï¼‰ã€‚</li>
<li>å°†åœ¨åé¢çš„è¯¾ç¨‹ä¸­è®¨è®ºå®ƒä»¬ã€‚</li>
</ul>
<h4 id="1-3-4-è‡ªå®šä¹‰å¸ƒå±€åè®®å®ç°"><a href="#1-3-4-è‡ªå®šä¹‰å¸ƒå±€åè®®å®ç°" class="headerlink" title="1.3.4 è‡ªå®šä¹‰å¸ƒå±€åè®®å®ç°"></a>1.3.4 è‡ªå®šä¹‰å¸ƒå±€åè®®å®ç°</h4><ul>
<li>æ‚¨å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªâ€œæä¾›ç©ºé—´ã€è®©è§†å›¾é€‰æ‹©å…¶å¤§å°ï¼Œç„¶åå¯¹å…¶è¿›è¡Œæ’åˆ—â€çš„è¿‡ç¨‹ã€‚</li>
<li>å®ç°ä¸€ä¸ªå®ç° <code>Layout</code> åè®®çš„è§†å›¾ï¼ˆ<code>sizeThatFits</code>ã€<code>placeSubviews</code>ï¼‰ã€‚</li>
</ul>
<h3 id="1-4-ZStack"><a href="#1-4-ZStack" class="headerlink" title="1.4 ZStack"></a>1.4 <code>ZStack</code></h3><h4 id="1-4-1-ZStack"><a href="#1-4-1-ZStack" class="headerlink" title="1.4.1 ZStack"></a>1.4.1 <code>ZStack</code></h4><ul>
<li><code>ZStack</code> è‡ªé€‚åº”è°ƒæ•´ä»¥é€‚åº”å…¶å­è§†å›¾ã€‚</li>
<li>å¦‚æœå…¶ä¸­ä»»ä½•ä¸€ä¸ªå­è§†å›¾æ˜¯å®Œå…¨çµæ´»çš„ï¼Œåˆ™ <code>ZStack</code> ä¹Ÿä¼šæ˜¯çµæ´»çš„ã€‚</li>
</ul>
<h4 id="1-4-2-background-ä¿®é¥°ç¬¦"><a href="#1-4-2-background-ä¿®é¥°ç¬¦" class="headerlink" title="1.4.2 .background ä¿®é¥°ç¬¦"></a>1.4.2 <code>.background</code> ä¿®é¥°ç¬¦</h4><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">Text</span>(<span class="string">&quot;hello&quot;</span>).background(<span class="type">Rectangle</span>().foregroundColor(.red))</span><br></pre></td></tr></table></figure>

<ul>
<li>è¿™ç±»ä¼¼äºå°† <code>Text</code> å’Œ <code>Rectangle</code> çš„ <code>ZStack</code> å åŠ ï¼ˆ<code>Text</code> åœ¨å‰ï¼‰ã€‚</li>
<li>ç„¶è€Œï¼Œè¿™ä¸ä½¿ç”¨ <code>ZStack</code> å åŠ å®ƒä»¬ä¹‹é—´å­˜åœ¨å¾ˆå¤§ä¸åŒã€‚</li>
<li>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”Ÿæˆçš„è§†å›¾ä¼šæ ¹æ® <code>Text</code> çš„å¤§å°æ¥è°ƒæ•´ï¼ˆ<code>Rectangle</code> ä¸å‚ä¸ï¼‰ã€‚</li>
<li>æ¢å¥è¯è¯´ï¼Œ<code>Text</code> å®Œå…¨å†³å®šäº†è¿™ä¸ªâ€œä¸¤ä¸ªè¿·ä½  <code>ZStack</code>â€çš„å¸ƒå±€ã€‚</li>
</ul>
<h4 id="1-4-3-overlay-ä¿®é¥°ç¬¦"><a href="#1-4-3-overlay-ä¿®é¥°ç¬¦" class="headerlink" title="1.4.3 .overlay ä¿®é¥°ç¬¦"></a>1.4.3 <code>.overlay</code> ä¿®é¥°ç¬¦</h4><p>ä¸ <code>.background</code> ç›¸åŒçš„å¸ƒå±€è§„åˆ™ï¼Œä½†å åŠ æ–¹å‘ç›¸åã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">Circle</span>().overlay(<span class="type">Text</span>(<span class="string">&quot;Hello&quot;</span>), alignment: .center)</span><br></pre></td></tr></table></figure>

<ul>
<li>è¿™å°†æ ¹æ® <code>Circle</code> çš„å¤§å°è°ƒæ•´ï¼ˆå³å®ƒå°†æ˜¯å®Œå…¨çµæ´»çš„ï¼‰ã€‚</li>
<li><code>Text</code> å°†è¢«å åŠ åœ¨ <code>Circle</code> ä¸Šï¼ˆåœ¨ <code>Circle</code> çš„æŒ‡å®šå¯¹é½æ–¹å¼å†…ï¼‰ã€‚</li>
</ul>
<h3 id="1-5-ä¿®é¥°ç¬¦"><a href="#1-5-ä¿®é¥°ç¬¦" class="headerlink" title="1.5 ä¿®é¥°ç¬¦"></a>1.5 ä¿®é¥°ç¬¦</h3><h4 id="1-5-1-padding"><a href="#1-5-1-padding" class="headerlink" title="1.5.1 .padding"></a>1.5.1 <code>.padding</code></h4><p>è¯·è®°ä½ï¼Œè§†å›¾ä¿®é¥°ç¬¦å‡½æ•°ï¼ˆå¦‚ <code>.padding</code>ï¼‰æœ¬èº«è¿”å›ä¸€ä¸ªè§†å›¾ã€‚æ¦‚å¿µä¸Šï¼Œè¿™ä¸ªè§†å›¾ <code>åŒ…è£¹</code> ç€å®ƒæ‰€ä¿®é¥°çš„è§†å›¾ã€‚</p>
<p>å…¶ä¸­è®¸å¤šä»…å°†æä¾›ç»™å®ƒä»¬çš„å¤§å°ä¼ é€’ä¸‹å»ï¼ˆå¦‚ <code>.font</code> æˆ– <code>.foregroundColor</code>ï¼‰ã€‚</p>
<p>ä½†ä¹Ÿå¯èƒ½æœ‰ä¿®é¥°ç¬¦å‚ä¸å¸ƒå±€è¿‡ç¨‹ã€‚ä¾‹å¦‚ï¼Œ<code>.padding(10)</code> è¿”å›çš„è§†å›¾ä¼šæä¾›ä¸€ä¸ªä¸å®ƒæ‰€ä¿®æ”¹çš„è§†å›¾å¤§å°ç›¸åŒï¼Œä½†æ¯ä¸€ä¾§å‡å°‘ 10 ä¸ªç‚¹çš„ç©ºé—´ã€‚è¿”å›çš„è§†å›¾ <code>.padding(10)</code> çš„å°ºå¯¸å°†æ¯”å®ƒæ‰€ä¿®é¥°çš„è§†å›¾é€‰æ‹©çš„å°ºå¯¸å¤§ 10 ä¸ªç‚¹ã€‚</p>
<h4 id="1-5-2-aspectRatio"><a href="#1-5-2-aspectRatio" class="headerlink" title="1.5.2 .aspectRatio"></a>1.5.2 <code>.aspectRatio</code></h4><p>å¦ä¸€ä¸ªä¾‹å­æ˜¯æˆ‘ä»¬å·²ç»ä½¿ç”¨è¿‡çš„ä¿®é¥°ç¬¦ï¼š<code>.aspectRatio</code>ã€‚</p>
<p>é€šè¿‡ <code>.aspectRatio</code> ä¿®é¥°ç¬¦è¿”å›çš„è§†å›¾ä¼šæ ¹æ®å…¶æ¯”ä¾‹é€‰æ‹©é€‚åˆçš„å¤§å°ã€‚å®ƒå¯ä»¥é€‰æ‹©è¾ƒå°çš„å°ºå¯¸ï¼ˆ<code>.fit</code>ï¼‰ï¼Œä»¥é€‚åº”ç»™å®šçš„ç©ºé—´ï¼Œæˆ–é€‰æ‹©è¾ƒå¤§çš„å°ºå¯¸ï¼ˆ<code>.fill</code>ï¼‰ï¼Œä»¥å°½å¯èƒ½ä½¿ç”¨æ‰€æœ‰å¯ç”¨ç©ºé—´ï¼ˆç”šè‡³è¶…è¿‡æä¾›çš„ç©ºé—´ï¼‰ï¼ŒåŒæ—¶éµå¾ªæ¯”ä¾‹ã€‚ï¼ˆè§†å›¾å¯ä»¥é€‰æ‹©ä¸€ä¸ªå¤§äºå…¶æ‰€æä¾›ç©ºé—´çš„å¤§å°ï¼ï¼‰</p>
<p><code>.aspectRatio</code> ä¼šå°†é€‰æ‹©çš„ç©ºé—´ä¼ é€’ç»™å…¶ä¿®é¥°çš„è§†å›¾ï¼Œä½œä¸ºå…¶â€œå®¹å™¨â€ã€‚</p>
<h3 id="1-6-GeometryReader-åŠ¨æ€å¸ƒå±€"><a href="#1-6-GeometryReader-åŠ¨æ€å¸ƒå±€" class="headerlink" title="1.6 GeometryReader åŠ¨æ€å¸ƒå±€"></a>1.6 <code>GeometryReader</code> åŠ¨æ€å¸ƒå±€</h3><p>å¤§å¤šæ•°è§†å›¾ä¼šè‡ªåŠ¨è°ƒæ•´å¤§å°ï¼Œä»¥å……åˆ†åˆ©ç”¨æ‰€æä¾›çš„ç©ºé—´ã€‚ä¾‹å¦‚ï¼Œå„ç§å½¢çŠ¶ï¼ˆå¦‚åœ†è§’çŸ©å½¢ï¼‰é€šå¸¸ä¼šè‡ªæˆ‘è°ƒæ•´ä»¥é€‚åº”å®¹å™¨ã€‚è€Œè‡ªå®šä¹‰è§†å›¾ï¼Œå¦‚ CardViewï¼Œä¹Ÿåº”è¯¥æ ¹æ®æä¾›çš„ç©ºé—´è¿›è¡Œé€‚åº”ï¼Œä»¥ä¿æŒç¾è§‚æ€§ã€‚æ¯”å¦‚ï¼Œå¯ä»¥è°ƒæ•´å¡ç‰‡å†…æ–‡æœ¬çš„å­—ä½“å¤§å°ï¼Œä½¿å…¶è¡¨æƒ…ç¬¦å·èƒ½å¡«æ»¡ç©ºé—´ã€‚</p>
<p>ç„¶è€Œï¼Œå½“è§†å›¾éœ€è¦æ ¹æ®æä¾›çš„ç©ºé—´è¿›è¡ŒåŠ¨æ€è°ƒæ•´æ—¶ï¼Œä¾‹å¦‚åœ¨é€‰æ‹©å¡ç‰‡å¤§å°ä»¥é€‚é… LazyVGrid ä½¿å…¶ä¸éœ€è¦æ»šåŠ¨æ—¶ï¼Œå°±éœ€è¦ç”¨åˆ°ä¸€ä¸ªåä¸º GeometryReader çš„å®¹å™¨è§†å›¾æ¥è·å–æ‰€æä¾›çš„ç©ºé—´å¤§å°ï¼Œä»è€Œè¿›è¡ŒåŠ¨æ€çš„å¸ƒå±€è°ƒæ•´ã€‚</p>
<p>æ‚¨å¯ä»¥ç”¨è¿™ä¸ª <code>GeometryReader</code> è§†å›¾åŒ…è£¹é€šå¸¸å‡ºç°åœ¨æ‚¨çš„è§†å›¾ä¸»ä½“ä¸­çš„å†…å®¹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">GeometryReader</span> &#123; geometry <span class="keyword">in</span> <span class="comment">// ä½¿ç”¨å°¾éšé—­åŒ…è¯­æ³•</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>geometry</code> å‚æ•°æ˜¯ä¸€ä¸ª <code>GeometryProxy</code> å¯¹è±¡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">GeometryProxy</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> size: <span class="type">CGSize</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">frame</span>(<span class="params">in</span> <span class="params">coordinateSpace</span>: <span class="type">CoordinateSpace</span>) -&gt; <span class="type">CGRect</span></span><br><span class="line">    <span class="keyword">var</span> safeAreaInsets: <span class="type">EdgeInsets</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>size</code> å˜é‡æ˜¯æˆ‘ä»¬çš„å®¹å™¨æä¾›ç»™æˆ‘ä»¬çš„â€œç©ºé—´å¤§å°â€ã€‚</li>
<li>ç°åœ¨æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸€ä¸ªé€‚åˆè¿™ä¸ªå¤§å°ç©ºé—´çš„å¡ç‰‡å°ºå¯¸ã€‚</li>
<li><code>GeometryReader</code> æœ¬èº«ï¼ˆå®ƒåªæ˜¯ä¸€ä¸ªè§†å›¾ï¼‰å§‹ç»ˆæ¥å—æ‰€æœ‰æä¾›ç»™å®ƒçš„ç©ºé—´ã€‚</li>
</ul>
<h3 id="1-7-safeArea"><a href="#1-7-safeArea" class="headerlink" title="1.7 safeArea"></a>1.7 <code>safeArea</code></h3><p>é€šå¸¸ï¼Œå½“è§†å›¾è¢«æä¾›ç©ºé—´æ—¶ï¼Œè¿™ä¸ªç©ºé—´å¹¶ä¸åŒ…æ‹¬â€œå®‰å…¨åŒºåŸŸâ€ã€‚æœ€æ˜æ˜¾çš„å®‰å…¨åŒºåŸŸå‡ºç°åœ¨ iPhone X åŠå…¶åç»­å‹å·çš„åˆ˜æµ·éƒ¨åˆ†ï¼Œè¿™ä¸ªåŒºåŸŸé€šå¸¸ç”¨äºä¿æŠ¤å‰ç½®æ‘„åƒå¤´ã€ä¼ æ„Ÿå™¨å’Œæ‰¬å£°å™¨ç­‰ç»„ä»¶ã€‚å› æ­¤ï¼Œåº”ç”¨è§†å›¾æ—¶ï¼Œå†…å®¹ä¸€èˆ¬ä¸åº”è¯¥ç»˜åˆ¶åœ¨è¿™äº›å®‰å…¨åŒºåŸŸå†…ã€‚</p>
<p>ä¸è¿‡ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥é€‰æ‹©å¿½ç•¥è¿™ä¸€é™åˆ¶ï¼Œåœ¨æŒ‡å®šçš„è¾¹ç¼˜å†…è¿›è¡Œç»˜åˆ¶ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">ZStack</span> &#123; <span class="operator">...</span> &#125;.edgesIgnoringSafeArea([.top]) <span class="comment">// åœ¨é¡¶éƒ¨è¾¹ç¼˜çš„â€œå®‰å…¨åŒºåŸŸâ€ä¸­ç»˜åˆ¶</span></span><br></pre></td></tr></table></figure>

<h2 id="2-Demoï¼šå¸ƒå±€"><a href="#2-Demoï¼šå¸ƒå±€" class="headerlink" title="2. Demoï¼šå¸ƒå±€"></a>2. Demoï¼šå¸ƒå±€</h2><h3 id="2-1-LazyVGridã€GridItem"><a href="#2-1-LazyVGridã€GridItem" class="headerlink" title="2.1 LazyVGridã€GridItem"></a>2.1 <code>LazyVGrid</code>ã€<code>GridItem</code></h3><p>è¿™é‡Œä½¿ç”¨ <code>GridItem()</code> æ¥è®¾ç½® <code>Grid</code> å¸ƒå±€ä¸­çš„æ¯ä¸€åˆ—ï¼Œ<code>[GridItem()]</code> æ˜¾ç¤ºä¸ºä¸€åˆ—ï¼Œ<code>[GridItem(),GridItem()]</code> åˆ™æ˜¾ç¤ºä¸ºä¸¤åˆ—</p>
<p><img src="/2024/12/31/Stanford-cs193p-06-Layout-ViewBuilder/cs193p%EF%BD%9C06%EF%BD%9CViewBuilder.png"></p>
<p><img src="/2024/12/31/Stanford-cs193p-06-Layout-ViewBuilder/cs193p%EF%BD%9C06%EF%BD%9CViewBuilder-1.png"></p>
<p>å…¶ä¸­ï¼Œ<code>GridItem.size</code> ä¸ºæšä¸¾ç±»å‹ï¼Œæœ‰ <code>adaptive</code>ã€<code>fixed</code> å’Œ <code>flexible</code> ä¸‰ç§ caseã€‚</p>
<p><img src="/2024/12/31/Stanford-cs193p-06-Layout-ViewBuilder/cs193p%EF%BD%9C06%EF%BD%9CViewBuilder-5.png"></p>
<p>æˆ‘ä»¬ç”¨ <code>adaptive</code> æ¥è‡ªé€‚åº”è°ƒæ•´ GridItemï¼Œå½“è°ƒæ•´ä¸ºåˆé€‚çš„å®½åº¦æ—¶ï¼Œå¯ä»¥åœ¨å±å¹•ä¸­å…¨éƒ¨å‘ˆç°ï¼Œä¸éœ€è¦ scrollViewã€‚</p>
<p>ä½†å°† <code>scrollView</code> å»é™¤åï¼Œè¿™ä¸ª <code>Vstack</code> æ— æ³•å®¹çº³æ‰€æœ‰çš„ cardï¼Œå°†åº•éƒ¨çš„ <code>shuffle</code> ä»å®¹å™¨ä¸­æ¨äº†å‡ºæ¥ã€‚</p>
<p><img src="/2024/12/31/Stanford-cs193p-06-Layout-ViewBuilder/cs193p%EF%BD%9C06%EF%BD%9CViewBuilder-6.png"></p>
<p>é‚£å¦‚ä½•è°ƒæ•´ <code>GridItem</code> çš„å¤§å°ï¼Œè®© <code>LazyVGrid</code> å æ®æ‰€æœ‰ç©ºé—´?</p>
<h3 id="2-2-GeometryReader"><a href="#2-2-GeometryReader" class="headerlink" title="2.2 GeometryReader"></a>2.2 <code>GeometryReader</code></h3><p>å¯ä»¥ä½¿ç”¨ <code>GeometryReader</code> æ¥åŠ¨æ€è°ƒæ•´ <code>GridItem</code> çš„å¤§å°ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">	<span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">	        <span class="comment">// creates a vertically scrollable collection of views</span></span><br><span class="line">	        <span class="comment">// lazy implies that the views are only created when SwiftUI needs to display them</span></span><br><span class="line">	        <span class="type">GeometryReader</span> &#123; geometry <span class="keyword">in</span></span><br><span class="line">	            <span class="keyword">let</span> gridItemSize <span class="operator">=</span> gridItemWidthThatFits(count: viewModel.cards.count, size: geometry.size, atAspectRatio: <span class="number">2</span><span class="operator">/</span><span class="number">3</span>)</span><br><span class="line">	            <span class="type">LazyVGrid</span>(columns: [<span class="type">GridItem</span>(.adaptive(minimum: gridItemSize),spacing: <span class="number">0</span>)],spacing: <span class="number">0</span>) &#123;</span><br><span class="line">	                <span class="type">ForEach</span>(viewModel.cards) &#123; card <span class="keyword">in</span></span><br><span class="line">	                    <span class="type">CardView</span>(card: card)</span><br><span class="line">	                        .aspectRatio(<span class="number">2</span><span class="operator">/</span><span class="number">3</span>, contentMode: .fit)</span><br><span class="line">	                        .padding(<span class="number">8</span>)</span><br><span class="line">	                        .onTapGesture &#123;</span><br><span class="line">	                            viewModel.choose(card)</span><br><span class="line">	                        &#125;</span><br><span class="line">	                &#125;</span><br><span class="line">	            &#125;</span><br><span class="line">	        &#125;</span><br><span class="line">	        .foregroundColor(.orange)</span><br><span class="line">	    &#125;</span><br><span class="line"></span><br><span class="line">	    <span class="keyword">func</span> <span class="title function_">gridItemWidthThatFits</span> (</span><br><span class="line">	        <span class="params">count</span>:<span class="type">Int</span>,</span><br><span class="line">	        <span class="params">size</span>:<span class="type">CGSize</span>,</span><br><span class="line">	        <span class="params">atAspectRatio</span> <span class="params">aspectRatio</span>:<span class="type">CGFloat</span></span><br><span class="line">	    ) -&gt; <span class="type">CGFloat</span> &#123;</span><br><span class="line">	        <span class="keyword">var</span> columnCount <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">	        <span class="keyword">repeat</span> &#123;</span><br><span class="line">	            <span class="keyword">let</span> width <span class="operator">=</span> size.width <span class="operator">/</span> columnCount</span><br><span class="line">	            <span class="keyword">let</span> height <span class="operator">=</span> width <span class="operator">/</span> aspectRatio</span><br><span class="line"></span><br><span class="line">	            <span class="keyword">let</span> rowCount <span class="operator">=</span> (count <span class="operator">/</span> columnCount).rounded(.up)</span><br><span class="line">	            <span class="keyword">if</span> rowCount <span class="operator">*</span> height <span class="operator">&lt;</span> size.height &#123;</span><br><span class="line">	                <span class="keyword">return</span> (size.width <span class="operator">/</span> columnCount).rounded(.down)</span><br><span class="line">	            &#125;</span><br><span class="line">	            columnCount <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">	        &#125; <span class="keyword">while</span> columnCount <span class="operator">&lt;</span> count</span><br><span class="line">	        <span class="keyword">return</span> <span class="built_in">min</span>(size.width <span class="operator">/</span> count, size.height <span class="operator">*</span> aspectRatio).rounded(.down)</span><br><span class="line">	    &#125;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°åœ¨ <code>gridItemWidthThat</code> ä¸­ä¼šæŠ¥é”™ï¼Œå› ä¸ºè¿”å›ç±»å‹ä¸º <code>CGFloat</code>, <code>columnCount</code> å’Œ <code>count</code> éƒ½ä¸º <code>Int</code> ç±»å‹ï¼Œæ— æ³•è¿›è¡Œè¿ç®—ï¼Œéœ€è¦åšç±»å‹è½¬åŒ–ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>:<span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">	<span class="keyword">func</span> <span class="title function_">gridItemWidthThatFits</span> (</span><br><span class="line">	           <span class="params">count</span>:<span class="type">Int</span>,</span><br><span class="line">	           <span class="params">size</span>:<span class="type">CGSize</span>,</span><br><span class="line">	           <span class="params">atAspectRatio</span> <span class="params">aspectRatio</span>:<span class="type">CGFloat</span></span><br><span class="line">	       ) -&gt; <span class="type">CGFloat</span> &#123;</span><br><span class="line">	           <span class="keyword">let</span> count <span class="operator">=</span> <span class="type">CGFloat</span>(count)</span><br><span class="line">	           <span class="keyword">var</span> columnCount <span class="operator">=</span> <span class="number">1.0</span></span><br><span class="line">	           <span class="operator">...</span></span><br><span class="line">	       &#125;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶è§†å›¾ä¼šéšç€å¡ç‰‡å¯¹æ•°çš„å˜åŒ–è€Œå˜åŒ–ï¼Œä¸”å§‹ç»ˆä¿æŒåœ¨ Vstack å®¹å™¨å†…ã€‚</p>
<h3 id="2-3-ViewBuilder"><a href="#2-3-ViewBuilder" class="headerlink" title="2.3 ViewBuilder"></a>2.3 <code>ViewBuilder</code></h3><p>æˆ‘ä»¬å°† aspectRatio æå–ä¸ºå˜é‡ï¼Œæ›¿æ¢ç›¸åº”ä»£ç ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>:<span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">	 <span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">	    <span class="keyword">let</span> aspectRatio : <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">2</span><span class="operator">/</span><span class="number">3</span></span><br><span class="line">		<span class="comment">// creates a vertically scrollable collection of views</span></span><br><span class="line">		<span class="comment">// lazy implies that the views are only created when SwiftUI needs to display them</span></span><br><span class="line">		<span class="type">GeometryReader</span> &#123; geometry <span class="keyword">in</span></span><br><span class="line">			<span class="keyword">let</span> gridItemSize <span class="operator">=</span> gridItemWidthThatFits(count: viewModel.cards.count, size: geometry.size, atAspectRatio: aspectRatio)</span><br><span class="line">			<span class="type">LazyVGrid</span>(columns: [<span class="type">GridItem</span>(.adaptive(minimum: gridItemSize),spacing: <span class="number">0</span>)],spacing: <span class="number">0</span>) &#123;</span><br><span class="line">				<span class="type">ForEach</span>(viewModel.cards) &#123; card <span class="keyword">in</span></span><br><span class="line">					<span class="type">CardView</span>(card: card)</span><br><span class="line">						.aspectRatio(aspectRatio, contentMode: .fit)</span><br><span class="line">						.padding(<span class="number">8</span>)</span><br><span class="line">						.onTapGesture &#123;</span><br><span class="line">							viewModel.choose(card)</span><br><span class="line">						&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		.foregroundColor(.orange)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä»£ç ä¼šæŠ¥é”™ <code>Function declares an opaque return type, but has no return statements in its body from which to infer an underlying type</code> ï¼Œå› ä¸ºéœ€è¦è¿”å›ä¸€ä¸ª Viewã€‚å¯ä»¥åœ¨ <code>GeometryReader</code> å‰åŠ ä¸Š <code>return</code> æˆ–è€…ä½¿ç”¨ <code>@ViewBuilder</code> éƒ½å¯ä»¥å¤„ç†è¯¥é—®é¢˜ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>:<span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">	<span class="meta">@ViewBuilder</span></span><br><span class="line">	 <span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">	    <span class="keyword">let</span> aspectRatio : <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">2</span><span class="operator">/</span><span class="number">3</span></span><br><span class="line">		<span class="comment">// creates a vertically scrollable collection of views</span></span><br><span class="line">		<span class="comment">// lazy implies that the views are only created when SwiftUI needs to display them</span></span><br><span class="line">		<span class="type">GeometryReader</span> &#123; geometry <span class="keyword">in</span></span><br><span class="line">			<span class="operator">...</span></span><br><span class="line">		&#125;</span><br><span class="line">		.foregroundColor(.orange)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ï¼Œè¿™é‡Œå¯ä»¥å°† <code>aspectRatio</code> æå–å‡ºæ¥ä½œä¸ºç§æœ‰å˜é‡æ˜¯ä¸€ç§æ›´ç®€æ´æ˜“è¯»çš„åŠæ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>:<span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">let</span> aspectRatio : <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">2</span><span class="operator">/</span><span class="number">3</span></span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">		<span class="comment">// creates a vertically scrollable collection of views</span></span><br><span class="line">		<span class="comment">// lazy implies that the views are only created when SwiftUI needs to display them</span></span><br><span class="line">		<span class="type">GeometryReader</span> &#123; geometry <span class="keyword">in</span></span><br><span class="line">			<span class="operator">...</span></span><br><span class="line">		&#125;</span><br><span class="line">		.foregroundColor(.orange)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æˆ‘ä»¬ä¼šå°†æ‰€æœ‰å˜é‡è®¾ä¸º <code>private</code> çš„ï¼Œé™¤éå®ƒéœ€è¦å…±äº«ï¼Œæˆ–è€…æ˜¯åè®®æœ¬èº«æœ‰å®šä¹‰çš„ä¾‹å¦‚ <code>body</code>ã€‚</p>
</blockquote>
<h2 id="3-ViewBuilder"><a href="#3-ViewBuilder" class="headerlink" title="3. @ViewBuilder"></a>3. <code>@ViewBuilder</code></h2><p>åŸºäº Swift ä¸­çš„ä¸€ç§æœºåˆ¶ï¼Œå¢å¼ºäº†å˜é‡çš„åŠŸèƒ½ï¼Œä½¿å…¶å…·å¤‡ç‰¹æ®Šçš„ä½œç”¨ã€‚è¿™ä¸ªæœºåˆ¶ä¸ºè§†å›¾åˆ—è¡¨æä¾›äº†æ›´ä¾¿æ·çš„è¯­æ³•æ”¯æŒï¼Œå¼€å‘è€…å¯ä»¥å°†å…¶åº”ç”¨äºä»»ä½•è¿”å›ç¬¦åˆ View åè®®çš„å‡½æ•°ã€‚</p>
<p>å½“ä½¿ç”¨è¿™ä¸ªæœºåˆ¶æ—¶ï¼Œå‡½æ•°ä»ç„¶è¿”å›ç¬¦åˆ View çš„å†…å®¹ï¼Œä½†å®ƒä¼šå°†è¿™äº›å†…å®¹è§†ä½œä¸€ä¸ªè§†å›¾åˆ—è¡¨ï¼Œç„¶åå°†å®ƒä»¬åˆå¹¶æˆä¸€ä¸ªè§†å›¾ã€‚</p>
<p>åˆå¹¶åçš„è§†å›¾å¯ä»¥æ˜¯å¤šä¸ªè§†å›¾ç»„æˆçš„ TupleViewï¼Œä¹Ÿå¯ä»¥æ˜¯åŒ…å«æ¡ä»¶åˆ¤æ–­çš„ <code>_ConditionalContent</code> è§†å›¾ï¼Œç”šè‡³åœ¨åˆ—è¡¨ä¸ºç©ºçš„æƒ…å†µä¸‹ä¼šå˜æˆ EmptyViewï¼Œè™½ç„¶è¿™å¯èƒ½çœ‹èµ·æ¥æœ‰äº›å¥‡æ€ªï¼Œä½†è¿™æ˜¯è¢«å…è®¸çš„ã€‚æ­¤å¤–ï¼Œè¿™äº›ç»„åˆå¯ä»¥æ˜¯æ›´å¤æ‚çš„ï¼Œä¾‹å¦‚åœ¨æ¡ä»¶å†…éƒ¨å†åµŒå¥—æ¡ä»¶ç­‰ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒæŸäº›åŠŸèƒ½ï¼ˆæ¯”å¦‚ <code>_ConditionalContent</code>ï¼‰ç›®å‰å°šæœªå®Œå…¨å…¬å¼€ä¸º APIã€‚ç„¶è€Œï¼Œå¯¹æˆ‘ä»¬æ¥è¯´ï¼Œæˆ‘ä»¬å¹¶ä¸å…³å¿ƒåˆå¹¶åç”Ÿæˆçš„å…·ä½“è§†å›¾ï¼Œåªè¦å®ƒå§‹ç»ˆè¿”å›æŸç§è§†å›¾å°±å¯ä»¥äº†ã€‚</p>
<p>ä»»ä½•å‡½æ•°æˆ–åªè¯»è®¡ç®—å±æ€§éƒ½å¯ä»¥æ ‡è®°ä¸º <code>@ViewBuilder</code>ã€‚ä¸€æ—¦æ ‡è®°ï¼Œè¯¥å‡½æ•°æˆ–å±æ€§çš„å†…å®¹å°†è¢«è§£é‡Šä¸ºè§†å›¾åˆ—è¡¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å°†ç”¨äºæ„å»ºå¡ç‰‡å‰é¢éƒ¨åˆ†çš„è§†å›¾æå–å‡ºæ¥</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">front</span>(<span class="params">of</span> <span class="params">card</span>: <span class="type">Card</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">	<span class="keyword">let</span> shape <span class="operator">=</span> <span class="type">RoundedRectangle</span> (cornerRadius: <span class="number">20</span>)</span><br><span class="line">	shape.fill(.white)</span><br><span class="line">	shape.stroke()</span><br><span class="line">	<span class="type">Text</span> (card.content)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç å¹¶ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„å‡½æ•°è¯­æ³•ï¼Œè€Œä»…ä»…æ˜¯ä¸€ä¸ªè§†å›¾åˆ—è¡¨ã€‚æˆ‘ä»¬ä¸èƒ½åƒè¿™æ ·åˆ—å‡ºè§†å›¾ Viewsã€‚</p>
<p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬æŠŠ <code>@ViewBuilder</code> æ”¾åœ¨å‰é¢æ˜¯å¯ä»¥çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ViewBuilder</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">front</span>(<span class="params">of</span> <span class="params">card</span>: <span class="type">Card</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">	<span class="keyword">let</span> shape <span class="operator">=</span> <span class="type">RoundedRectangle</span> (cornerRadius: <span class="number">20</span>)</span><br><span class="line">	shape.fill(.white)</span><br><span class="line">	shape.stroke()</span><br><span class="line">	<span class="type">Text</span> (card.content)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥åˆæ³•åœ°ä½¿ç”¨ç®€å•çš„ if-else è¯­å¥æ¥æ§åˆ¶åˆ—è¡¨ä¸­åŒ…å«å“ªäº›è§†å›¾ã€‚ï¼ˆä¸è¿‡ï¼Œè¿™åªæ˜¯æˆ‘ä»¬å¡ç‰‡çš„å‰é¢éƒ¨åˆ†ï¼Œæ‰€ä»¥ä¸éœ€è¦ä½¿ç”¨ä»»ä½•æ¡ä»¶åˆ¤æ–­ã€‚ï¼‰</p>
<p>ä¸Šè¿°ä»£ç å°†è¿”å›ä¸€ä¸ª <code>TupleView&lt;RoundedRectangle, RoundedRectangle, Text&gt;</code>ã€‚</p>
<p>ä½ è¿˜å¯ä»¥ä½¿ç”¨ <code>@ViewBuilder</code> æ¥æ ‡è®°å‡½æ•°æˆ–åˆå§‹åŒ–æ–¹æ³•çš„å‚æ•°ã€‚è¯¥å‚æ•°çš„ç±»å‹å¿…é¡»æ˜¯â€œè¿”å› View çš„å‡½æ•°â€ã€‚ä¾‹å¦‚ï¼Œ<code>ZStack</code>ã€<code>HStack</code>ã€<code>VStack</code>ã€<code>ForEach</code>ã€<code>LazyGrid</code> ç­‰éƒ½é‡‡ç”¨è¿™ç§æ–¹å¼ï¼ˆå®ƒä»¬çš„ <code>content:</code> å‚æ•°ï¼‰ã€‚æˆ‘ä»¬å°†åœ¨åé¢çš„æ¼”ç¤ºä¸­å±•ç¤ºè¿™ä¸€ç‚¹ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ <code>@ViewBuilder</code> çš„å†…å®¹åªæ˜¯ä¸€ä¸ªè§†å›¾åˆ—è¡¨ï¼Œå¹¶ä¸æ˜¯ä»»æ„ä»£ç ã€‚å¯ä»¥ä½¿ç”¨ if-elseï¼ˆæˆ– switchã€if letï¼‰è¯­å¥æ¥é€‰æ‹©è¦åŒ…å«åœ¨åˆ—è¡¨ä¸­çš„è§†å›¾ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å±€éƒ¨çš„ let è¯­å¥ã€‚å…¶ä»–ç±»å‹çš„ä»£ç æ˜¯ä¸å…è®¸çš„ï¼ˆè‡³å°‘åœ¨æœ¬æ¬¡è®²åº§æ—¶æ˜¯è¿™æ ·çš„ï¼‰ã€‚</p>
<h2 id="4-Demoï¼šåˆ›å»ºâ€œåˆå¹¶è§†å›¾â€"><a href="#4-Demoï¼šåˆ›å»ºâ€œåˆå¹¶è§†å›¾â€" class="headerlink" title="4. Demoï¼šåˆ›å»ºâ€œåˆå¹¶è§†å›¾â€"></a>4. Demoï¼šåˆ›å»ºâ€œåˆå¹¶è§†å›¾â€</h2><p>ä¸ºäº†æ›´å¥½åœ°ç†è§£åƒ HStack æˆ– LazyVGrid è¿™æ ·çš„ç»„ä»¶å¦‚ä½•æ¥æ”¶å‚æ•°ï¼Œæ¥ä¸‹æ¥å°†é€šè¿‡åˆ›å»ºä¸€ä¸ªâ€œåˆå¹¶è§†å›¾â€ <code>AspectVGrid</code> æ¥å®ç°è¿™ä¸€ç‚¹ã€‚å®ƒç±»ä¼¼äº LazyVGridï¼Œä½†ä¸åŒçš„æ˜¯ä¼šæ ¹æ®æä¾›ç»™å®ƒçš„ç©ºé—´è°ƒæ•´å…¶å†…å®¹è§†å›¾çš„å¤§å°ã€‚</p>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„ SwiftUI æ–‡æ¡£ï¼Œå¹¶å‘½åä¸º <code>AspectVGrid.swift</code>ã€‚</p>
<p>æˆ‘ä»¬å°† <code>EmojiMemoryGameView</code> ä¸­çš„ <code>GeometryReader </code> å’Œ <code>gridItemWidthThatFits</code> ç§»è‡³ <code>AspectVGrid.swift</code>, å°† viewModel.cards ä¿®æ”¹ä¸º <code>[Item]</code> ç±»å‹å˜é‡ï¼Œå…¶ä¸­ <code>Item</code> ä¸º <code>generic type </code>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>:<span class="title class_ inherited__">View</span>&#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">	<span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">		<span class="type">AspectVGrid</span>(viewModel.cards,aspectRatio:aspectRatio) &#123; card <span class="keyword">in</span></span><br><span class="line">			<span class="type">CardView</span>(card: card)</span><br><span class="line">				.aspectRatio(aspectRatio, contentMode: .fit)</span><br><span class="line">				.padding(<span class="number">8</span>)</span><br><span class="line">				.onTapGesture &#123;</span><br><span class="line">					viewModel.choose(card)</span><br><span class="line">				&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		.foregroundColor(.orange)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//AspectVGrid.swift</span></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">AspectVGrid</span>&lt;<span class="type">Item</span>:<span class="type">Identifiable</span>&gt;:<span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> items:[<span class="type">Item</span>]</span><br><span class="line">    <span class="keyword">var</span> aspectRatio:<span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body:<span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">GeometryReader</span> &#123; geometry <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">let</span> gridItemSize <span class="operator">=</span> gridItemWidthThatFits(count: items.count, size: geometry.size, atAspectRatio: aspectRatio)</span><br><span class="line">            <span class="type">LazyVGrid</span>(columns: [<span class="type">GridItem</span>(.adaptive(minimum: gridItemSize),spacing: <span class="number">0</span>)],spacing: <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="type">ForEach</span>(items) &#123;item <span class="keyword">in</span></span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">gridItemWidthThatFits</span> (</span><br><span class="line">        <span class="params">count</span>:<span class="type">Int</span>,</span><br><span class="line">        <span class="params">size</span>:<span class="type">CGSize</span>,</span><br><span class="line">        <span class="params">atAspectRatio</span> <span class="params">aspectRatio</span>:<span class="type">CGFloat</span></span><br><span class="line">    ) -&gt; <span class="type">CGFloat</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> count <span class="operator">=</span> <span class="type">CGFloat</span>(count)</span><br><span class="line">        <span class="keyword">var</span> columnCount <span class="operator">=</span> <span class="number">1.0</span></span><br><span class="line">        <span class="keyword">repeat</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> width <span class="operator">=</span> size.width <span class="operator">/</span> columnCount</span><br><span class="line">            <span class="keyword">let</span> height <span class="operator">=</span> width <span class="operator">/</span> aspectRatio</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> rowCount <span class="operator">=</span> (count <span class="operator">/</span> columnCount).rounded(.up)</span><br><span class="line">            <span class="keyword">if</span> rowCount <span class="operator">*</span> height <span class="operator">&lt;</span> size.height &#123;</span><br><span class="line">                <span class="keyword">return</span> (size.width <span class="operator">/</span> columnCount).rounded(.down)</span><br><span class="line">            &#125;</span><br><span class="line">            columnCount <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">        &#125; <span class="keyword">while</span> columnCount <span class="operator">&lt;</span> count</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">min</span>(size.width <span class="operator">/</span> count, size.height <span class="operator">*</span> aspectRatio).rounded(.down)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä»£ç ä¼šæŠ¥é”™ï¼š<code>Failed to produce diagnostic for expression; please submit a bug report</code>ã€‚è¿™è¡¨é¢ <code>view Builder</code> å­˜åœ¨é—®é¢˜ã€‚å› ä¸ºæ­¤å¤„çš„ <code>aspectRatio</code> æ²¡æœ‰å®šä¹‰ã€‚è€Œ <code>ForEach</code> è¦æ±‚ <code>Item</code> ä¸º <code>Identifiable</code>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//AspectVGrid.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">AspectVGrid</span>&lt;<span class="type">Item</span>:<span class="type">Identifiable</span>&gt;: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> items:[<span class="type">Item</span>]</span><br><span class="line">    <span class="keyword">var</span> aspectRatio:<span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"> 	<span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶å†å›åˆ° <code>EmojiMemoryGameView.swift</code>ï¼Œæˆ‘ä»¬éœ€è¦å°† <code>&#123;card in ...&#125;</code> è¿™ä¸ªå°¾éšé—­åŒ…ä¼ é€’ç»™ <code>AspectVGrid</code>ï¼Œåœ¨ <code>AspectVGrid</code> ä¸­å®šä¹‰ä¸€ä¸ªè¿”å›å€¼ä¸ºç¬¦åˆ View åè®®çš„è§†å›¾çš„å‡½æ•°ç±»å‹å‚æ•° <code>content</code>ï¼Œåœ¨ <code>ForEach</code> ä¸­è¡¥å……ç›¸åº” Viewã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//AspectVGrid.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">AspectVGrid</span>&lt;<span class="type">Item</span>:<span class="type">Identifiable</span>, <span class="type">ItemView</span>:<span class="type">View</span>&gt;: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> items:[<span class="type">Item</span>]</span><br><span class="line">    <span class="keyword">var</span> aspectRatio:<span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">var</span> content:(<span class="type">View</span>) -&gt; (<span class="type">ItemView</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> body:<span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">	        <span class="type">GeometryReader</span> &#123; geometry <span class="keyword">in</span></span><br><span class="line">	            <span class="keyword">let</span> gridItemSize <span class="operator">=</span> gridItemWidthThatFits(count: items.count, size: geometry.size, atAspectRatio: aspectRatio)</span><br><span class="line">	            <span class="type">LazyVGrid</span>(columns: [<span class="type">GridItem</span>(.adaptive(minimum: gridItemSize),spacing: <span class="number">0</span>)],spacing: <span class="number">0</span>) &#123;</span><br><span class="line">	                <span class="type">ForEach</span>(items) &#123;item <span class="keyword">in</span></span><br><span class="line">	                	content(item)</span><br><span class="line">	                		.aspectRatio(aspectRatio, contentMode:.fit)</span><br><span class="line">	                &#125;</span><br><span class="line">	            &#125;</span><br><span class="line">	        &#125;</span><br><span class="line">	    &#125;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>:<span class="title class_ inherited__">View</span>&#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">	<span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">		<span class="type">AspectVGrid</span>(items: viewModel.cards,aspectRatio:aspectRatio) &#123; card <span class="keyword">in</span></span><br><span class="line">			<span class="type">CardView</span>(card: card)</span><br><span class="line">				.aspectRatio(aspectRatio, contentMode: .fit)</span><br><span class="line">				.padding(<span class="number">8</span>)</span><br><span class="line">				.onTapGesture &#123;</span><br><span class="line">					viewModel.choose(card)</span><br><span class="line">				&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		.foregroundColor(.orange)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>code</category>
        <category>swift</category>
      </categories>
      <tags>
        <tag>cs193p</tag>
      </tags>
  </entry>
  <entry>
    <title>Stanford cs193p 07ï½œShape ViewModifier Constants</title>
    <url>/2025/01/05/Stanford-cs193p-07%EF%BD%9CShape-ViewModifier-Constants/</url>
    <content><![CDATA[<p>æœ¬æ–‡æ˜¯æ–¯å¦ç¦å¤§å­¦ cs193p å…¬å¼€è¯¾ç¨‹ç¬¬ 07 é›†çš„ç›¸å…³ç¬”è®°ã€‚</p>
<span id="more"></span>

<p>cs193p è¯¾ç¨‹ä»‹ç»:</p>
<blockquote>
<p>The lectures for the Spring 2023 version of Stanford Universityâ€™s course CS193p (Developing Applications for iOS using SwiftUI) were given in person but, unfortunately, were not video recorded. However, we did capture the laptop screen of the presentations and demos as well as the associated audio. You can watch these screen captures using the links below. Youâ€™ll also find links to supporting material that was distributed to students during the quarter (homework, demo code, etc.).</p>
</blockquote>
<p>cs193p è¯¾ç¨‹ç½‘å€: <a href="https://cs193p.sites.stanford.edu/2023">https://cs193p.sites.stanford.edu/2023</a>â€“</p>
<h2 id="0-å¼•è¨€"><a href="#0-å¼•è¨€" class="headerlink" title="0. å¼•è¨€"></a>0. <strong>å¼•è¨€</strong></h2><p>æœ¬èŠ‚æ¦‚è¿°äº†ä¸ SwiftUI å’Œ Swift ç¼–ç¨‹ç›¸å…³çš„å…³é”®æ¦‚å¿µå’Œä¸»é¢˜ã€‚è®¨è®ºçš„ä¸»é¢˜åŒ…æ‹¬ï¼š</p>
<p><strong>ä»£ç æ¼”ç¤ºæ’æ›²</strong></p>
<ul>
<li>å°†è§†å›¾åˆ†ç¦»åˆ°å„è‡ªçš„æ–‡ä»¶ä¸­ã€‚</li>
<li>ç†è§£ Swift ä¸­çš„å¸¸é‡ã€‚</li>
</ul>
<p><strong>å½¢çŠ¶(Shape)</strong></p>
<ul>
<li>ç»˜åˆ¶è‡ªå®šä¹‰å½¢çŠ¶ã€‚</li>
<li>Demoï¼šåœ¨å¡ç‰‡ä¸­ç»˜åˆ¶ä¸€ä¸ªâ€œé¥¼çŠ¶â€çš„å€’è®¡æ—¶ï¼ˆæœªæ·»åŠ åŠ¨ç”»ï¼‰ã€‚</li>
</ul>
<p><strong>åŠ¨ç”»(Animation)</strong></p>
<ul>
<li>å¦‚ä½•å·¥ä½œçš„</li>
</ul>
<p><strong>è§†å›¾è°ƒæ•´å™¨(ViewModifier)</strong></p>
<ul>
<li>è§†å›¾è°ƒæ•´å™¨çš„å·¥ä½œæœºåˆ¶</li>
</ul>
<h2 id="2-æ¼”ç¤ºæ’æ›²"><a href="#2-æ¼”ç¤ºæ’æ›²" class="headerlink" title="2. æ¼”ç¤ºæ’æ›²"></a>2. <strong>æ¼”ç¤ºæ’æ›²</strong></h2><h3 id="2-1-åˆ†ç¦»è§†å›¾"><a href="#2-1-åˆ†ç¦»è§†å›¾" class="headerlink" title="2.1 åˆ†ç¦»è§†å›¾"></a>2.1 åˆ†ç¦»è§†å›¾</h3><p>æ–°å»ºä¸€ä¸ª <code>swiftUI</code> æ–‡ä»¶ï¼Œå‘½åä¸º <code>CardView</code>ã€‚æˆ‘ä»¬å°† <code>EmojiMemoryGameView</code> ä¸­çš„ <code>CardView</code> è§†å›¾åˆ†ç¦»å‡ºæ¥æ”¾åœ¨å•ç‹¬çš„ <code>CardView.swift</code> æ–‡ä»¶ä¸­ï¼Œä»¥å®ç°æ¨¡å—åŒ–ã€‚ä¸ºäº†ä¾¿äºæ£€æŸ¥ä»£ç ï¼Œè®¾ç½®å¡ç‰‡çš„é¢„è§ˆè§†å›¾ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//CardView.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> card: <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;.<span class="type">Card</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(<span class="keyword">_</span> <span class="params">card</span>:<span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;.<span class="type">Card</span>)&#123;</span><br><span class="line">        <span class="keyword">self</span>.card <span class="operator">=</span> card</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> base <span class="operator">=</span> <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">12</span>)</span><br><span class="line">            <span class="type">Group</span> &#123;</span><br><span class="line">                base.fill(.white)</span><br><span class="line">                base.strokeBorder(lineWidth: <span class="number">2</span>)</span><br><span class="line">                <span class="type">Text</span>(card.content)</span><br><span class="line">                    .font(.system(size: <span class="number">200</span>))</span><br><span class="line">                    .minimumScaleFactor(<span class="number">0.01</span>)</span><br><span class="line">                    .aspectRatio(<span class="number">1</span>, contentMode: .fit)</span><br><span class="line">            &#125;</span><br><span class="line">            .opacity(card.isFaceUp <span class="operator">?</span> <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line">            base.fill().opacity(card.isFaceUp <span class="operator">?</span> <span class="number">0</span> : <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .opacity(card.isFaceUp <span class="operator">||</span> <span class="operator">!</span>card.isMatched <span class="operator">?</span> <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView_Previews</span>:<span class="title class_ inherited__">PreviewProvider</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> previews: <span class="keyword">some</span> <span class="type">View</span>&#123;</span><br><span class="line">     <span class="type">CardView</span>(<span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;.<span class="type">Card</span>(content: <span class="string">&quot;X&quot;</span>, id: <span class="string">&quot;test1&quot;</span>))</span><br><span class="line">        .padding()</span><br><span class="line">        .foregroundColor(.green)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-1-1-typealias"><a href="#2-1-1-typealias" class="headerlink" title="2.1.1 typealias"></a>2.1.1 typealias</h4><p>éœ€è¦ç»å¸¸è¾“å…¥ <code>MemoryGame&lt;String&gt;.Card</code> å®åœ¨å¾ˆéº»çƒ¦ï¼Œå¯ä»¥ä½¿ç”¨ç±»å‹åˆ«å <code>typealias</code> æ¥ç®€åŒ–ä»£ç ã€‚æˆ‘ä»¬é¦–å…ˆåœ¨é¢„è§ˆä¸­è®¾ç½®ç±»å‹åˆ«åã€‚</p>
<blockquote>
<p><code>typealias</code> ä¸ºç°æœ‰ç±»å‹æä¾›ä¸€ä¸ªæ–°çš„åˆ«åï¼Œä½¿ä»£ç æ›´ç®€æ´æ˜“è¯»ã€‚å½“ä½ éœ€è¦ä½¿ç”¨å¤æ‚çš„ç±»å‹ï¼ˆå¦‚åµŒå¥—ç±»å‹æˆ–å…·æœ‰å¤šä¸ªç±»å‹çš„ tupleï¼‰æ—¶ï¼Œä½¿ç”¨ <code>typealias</code> å¯ä»¥è®©ä»£ç æ›´æ¸…æ™°ã€‚</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//CardView.swift</span></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> card: <span class="type">Card</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(<span class="keyword">_</span> <span class="params">card</span>:<span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;.<span class="type">Card</span>)&#123;</span><br><span class="line">        <span class="keyword">self</span>.card <span class="operator">=</span> card</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView_Previews</span>:<span class="title class_ inherited__">PreviewProvider</span> &#123;</span><br><span class="line">	<span class="keyword">typealias</span> <span class="type">Card</span> <span class="operator">=</span> <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;.<span class="type">Card</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> previews: <span class="keyword">some</span> <span class="type">View</span>&#123;</span><br><span class="line">    	<span class="type">CardView</span>(<span class="type">Card</span>(content: <span class="string">&quot;X&quot;</span>, id: <span class="string">&quot;test1&quot;</span>))</span><br><span class="line">    	    .padding()</span><br><span class="line">    	    .foregroundColor(.green)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ç”±äºä½¿ç”¨ç±»å‹åˆ«åçš„å‘½åç©ºé—´ä¸åŒï¼Œåœ¨ <code>struct CardView</code> ä¸­æ— æ³•å°† <code>MemoryGame&lt;String&gt;.Card</code> æ›¿æ¢ä¸º <code>Card</code>ï¼Œéœ€è¦åœ¨ <code>CardView</code> ç»“æ„ä½“ä¸­å†æ¬¡ä½¿ç”¨ç±»å‹åˆ«å <code>typealias</code> æ¥ç®€åŒ–ä»£ç ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//CardView.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">typealias</span> <span class="type">Card</span> <span class="operator">=</span> <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;.<span class="type">Card</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> card: <span class="type">Card</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(<span class="keyword">_</span> <span class="params">card</span>:<span class="type">Card</span>)&#123;</span><br><span class="line">        <span class="keyword">self</span>.card <span class="operator">=</span> card</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>å¦å¤–ï¼Œå¯¹ <code>EmojiMemoryGame</code> çš„ <code>MemoryGame&lt;String&gt;.Card</code> åšåŒæ ·çš„å¤„ç†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//EmojiMemoryGame.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiMemoryGame</span>:<span class="title class_ inherited__">ObservableObject</span>&#123;</span><br><span class="line">	<span class="keyword">typealias</span> <span class="type">Card</span> <span class="operator">=</span> <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;.<span class="type">Card</span></span><br><span class="line"></span><br><span class="line">	<span class="operator">...</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> cards: <span class="type">Array</span>&lt;<span class="type">Card</span>&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> model.cards</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">choose</span>(<span class="keyword">_</span> <span class="params">card</span>:<span class="type">Card</span>)&#123;</span><br><span class="line">        model.choose(card)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç”±äºæˆ‘ä»¬åœ¨ <code>CardView</code> ç»“æ„ä½“ä¸­å·²ç»å®šä¹‰äº†ç±»å‹åˆ«åï¼Œæˆ‘ä»¬å¯ä»¥å°†é¢„è§ˆä¸­çš„ç±»å‹åˆ«åèµ‹å€¼ä¸º <code>CardView.Card</code>ï¼Œè¿˜å¯ä»¥åˆ›å»ºå¤šä¸ª CardView è§†å›¾æ¥æä¾›é¢„è§ˆæ•ˆæœã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//CardView.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView_Previews</span>: <span class="title class_ inherited__">PreviewProvider</span> &#123;</span><br><span class="line">       <span class="keyword">typealias</span> <span class="type">Card</span> <span class="operator">=</span> <span class="type">CardView</span>.<span class="type">Card</span></span><br><span class="line">       <span class="keyword">static</span> <span class="keyword">var</span> previews: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">           <span class="type">VStack</span> &#123;</span><br><span class="line">               <span class="type">HStack</span> &#123;</span><br><span class="line">                   <span class="type">CardView</span>(<span class="type">Card</span>(isFaceUp: <span class="literal">true</span>, content: <span class="string">&quot;X&quot;</span>, id: <span class="string">&quot;test1&quot;</span>))</span><br><span class="line">                   <span class="type">CardView</span>(<span class="type">Card</span>(content: <span class="string">&quot;X&quot;</span>, id: <span class="string">&quot;test1&quot;</span>))</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">               <span class="type">HStack</span> &#123;</span><br><span class="line">                   <span class="type">CardView</span>(<span class="type">Card</span>(isFaceUp: <span class="literal">true</span>, isMatched: <span class="literal">true</span>, content: <span class="string">&quot;long long long string and i hope it fits&quot;</span>,id: <span class="string">&quot;test1&quot;</span>))</span><br><span class="line">                   <span class="type">CardView</span>(<span class="type">Card</span>(content: <span class="string">&quot;X&quot;</span>, id: <span class="string">&quot;test1&quot;</span>))</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line">           .padding()</span><br><span class="line">           .foregroundColor(.green)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>é¢„è§ˆæ•ˆæœå¦‚ä¸‹ï¼š</p>
<!-- ä½¿å›¾ç‰‡å±…ä¸­æ˜¾ç¤º -->
<div style="text-align:center">
    <img src="/2025/01/05/Stanford-cs193p-07%EF%BD%9CShape-ViewModifier-Constants/cs193p|07|1.png">
</div>

<p>æˆ‘ä»¬å‘ç°åœ¨æœ‰å¤šè¡Œæ–‡æœ¬æ—¶ï¼Œè§†å›¾æ–‡æœ¬ä¼šé å·¦å¯¹é½ï¼Œå¯¹ <code>CardView</code> è§†å›¾è¿›è¡Œè°ƒæ•´ä½¿å…¶åœ¨å¤šè¡Œæ–‡æœ¬æ—¶å±…ä¸­æ˜¾ç¤ºã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//CardView.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">        	<span class="operator">...</span></span><br><span class="line">            <span class="type">Group</span> &#123;</span><br><span class="line">            	<span class="operator">...</span></span><br><span class="line">                <span class="type">Text</span>(card.content)</span><br><span class="line">                    .font(.system(size: <span class="number">200</span>))</span><br><span class="line">                    .minimumScaleFactor(<span class="number">0.01</span>)</span><br><span class="line">                    .multilineTextAlignment(.center)</span><br><span class="line">                    .aspectRatio(<span class="number">1</span>, contentMode: .fit)</span><br><span class="line">                    .padding()</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="operator">...</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="operator">...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-å¤„ç†å¸¸é‡"><a href="#2-2-å¤„ç†å¸¸é‡" class="headerlink" title="2.2 å¤„ç†å¸¸é‡"></a>2.2 å¤„ç†å¸¸é‡</h3><p>ä¸ºäº†æ›´æ–¹ä¾¿å¯¹è§†å›¾çš„å¸ƒå±€è¿›è¡Œç»Ÿä¸€è°ƒæ•´ï¼Œæˆ‘ä»¬ä½¿ç”¨ç§æœ‰ç»“æ„ä½“æ¥ä¸ºè¿™äº›è§†å›¾è°ƒæ•´å™¨çš„å¸¸é‡åˆ›å»ºå‘½åç©ºé—´ï¼Œå¹¶å£°æ˜ç±»å‹ã€‚è¿™æ ·å¯ä»¥ä½¿å¾—ä»£ç ç»“æ„æ›´æ¸…æ™°ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//CardView.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>:<span class="title class_ inherited__">View</span>&#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">	<span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">	        <span class="type">ZStack</span> &#123;</span><br><span class="line">	            <span class="keyword">let</span> base <span class="operator">=</span> <span class="type">RoundedRectangle</span>(cornerRadius: <span class="type">Constants</span>.cornerRadius)</span><br><span class="line">	            <span class="type">Group</span> &#123;</span><br><span class="line">	                base.fill(.white)</span><br><span class="line">	                base.strokeBorder(lineWidth: <span class="type">Constants</span>.lineWidth)</span><br><span class="line">	                <span class="type">Text</span>(card.content)</span><br><span class="line">	                    .font(.system(size: <span class="type">Constants</span>.<span class="type">FontSize</span>.largest))</span><br><span class="line">	                    .minimumScaleFactor(<span class="type">Constants</span>.<span class="type">FontSize</span>.scaleFactor)</span><br><span class="line">	                    .multilineTextAlignment(.center)</span><br><span class="line">	                    .aspectRatio(<span class="number">1</span>, contentMode: .fit)</span><br><span class="line">	                    .padding(<span class="type">Constants</span>.in<span class="keyword">set</span>)</span><br><span class="line">	            &#125;</span><br><span class="line">	            .opacity(card.isFaceUp <span class="operator">?</span> <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line">	            base.fill().opacity(card.isFaceUp <span class="operator">?</span> <span class="number">0</span> : <span class="number">1</span>)</span><br><span class="line">	        &#125;</span><br><span class="line">	        .opacity(card.isFaceUp <span class="operator">||</span> <span class="operator">!</span>card.isMatched <span class="operator">?</span> <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line">	    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">struct</span> <span class="title class_">Constants</span> &#123;</span><br><span class="line">		<span class="keyword">static</span> <span class="keyword">let</span> cornerRadius:<span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">12</span></span><br><span class="line">		<span class="keyword">static</span> <span class="keyword">let</span> lineWidth:<span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">2</span></span><br><span class="line">		<span class="keyword">static</span> <span class="keyword">let</span> inset:<span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">5</span></span><br><span class="line">		<span class="keyword">struct</span> <span class="title class_">FontSize</span> &#123;</span><br><span class="line">			<span class="keyword">static</span> <span class="keyword">let</span> largest:<span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">200</span></span><br><span class="line">			<span class="keyword">static</span> <span class="keyword">let</span> smallest:<span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">10</span></span><br><span class="line">			<span class="keyword">static</span> <span class="keyword">let</span> scaleFactor <span class="operator">=</span> smallest <span class="operator">/</span> largest</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä½†æˆ‘ä»¬ä¼šæ³¨æ„åˆ°ï¼Œè¿˜ä¼šæœ‰ä¸€äº›å¸¸é‡ <code>1</code> ã€<code>0</code> æˆ–è€…é¢œè‰²å¸¸é‡æ²¡æœ‰æ·»åŠ åˆ°ç»“æ„ä½“ä¸­ï¼Œå› ä¸ºé€šå¸¸ä¸å…·æœ‰ç‰¹åˆ«çš„æ„ä¹‰ï¼Œå½“ç„¶æ ¹æ®æƒ…å†µä¹Ÿå¯ä»¥æ·»åŠ åˆ°ç§å…¶ä¸­ã€‚</p>
<p>å¦å¤–ï¼Œè¿˜æœ‰ä¸€äº›ç‰¹åˆ«çš„é¢œè‰²ï¼Œæ¯”å¦‚å¡ç‰‡æ¸¸æˆä¸­çš„é¢œè‰²èƒŒæ™¯ï¼Œæ²¡æœ‰æ·»åŠ ã€‚å› ä¸ºæˆ‘ä»¬å¸Œæœ›å°†å…¶ç½®äºè§†å›¾å±‚çº§æ¥è°ƒæ•´å®ƒä»¬ï¼Œå®ƒå±äºæ¸¸æˆé…ç½®ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//EmojiMemoryGameView.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span>&#123;</span><br><span class="line">            cards</span><br><span class="line">                .foregroundColor(viewModel.color)</span><br><span class="line">                .animation(.default, value: viewModel.cards)</span><br><span class="line">                .padding()</span><br><span class="line">		<span class="operator">...</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">AspectVGrid</span>(items:viewModel.cards,aspectRatio:aspectRatio) &#123; card <span class="keyword">in</span></span><br><span class="line">            <span class="type">CardView</span>(card)</span><br><span class="line">                .aspectRatio(aspectRatio, contentMode: .fit)</span><br><span class="line">                .padding(<span class="number">8</span>)</span><br><span class="line">                .onTapGesture &#123;</span><br><span class="line">                    viewModel.choose(card)</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//EmojiMemoryGame.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiMemoryGame</span>:<span class="title class_ inherited__">ObservableObject</span> &#123;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> color:<span class="type">Color</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> .orange</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-å›¾å½¢ï¼ˆShapeï¼‰"><a href="#2-å›¾å½¢ï¼ˆShapeï¼‰" class="headerlink" title="2. å›¾å½¢ï¼ˆShapeï¼‰"></a><strong>2. å›¾å½¢ï¼ˆShapeï¼‰</strong></h2><p><code>Shape</code> æ˜¯ä¸€ç§ç»§æ‰¿è‡ª <code>View</code> çš„åè®®ï¼ˆprotocolï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰çš„ <code>shape</code> éƒ½æ˜¯ <code>View</code>ï¼Œæ¯”å¦‚ <code>RoundedRectangle</code> ã€<code>Circle</code>ã€<code>Capsule</code> ç­‰ã€‚</p>
<h3 id="2-1-ç»˜åˆ¶è‡ªå®šä¹‰å›¾å½¢"><a href="#2-1-ç»˜åˆ¶è‡ªå®šä¹‰å›¾å½¢" class="headerlink" title="2.1 ç»˜åˆ¶è‡ªå®šä¹‰å›¾å½¢"></a><strong>2.1 ç»˜åˆ¶è‡ªå®šä¹‰å›¾å½¢</strong></h3><p>è‡ªå®šä¹‰å›¾å½¢çš„å®ç°åŸºäº SwiftUI çš„ <code>Shape</code> åè®®ï¼š</p>
<h4 id="2-1-1-Shape-åè®®çš„é»˜è®¤è¡Œä¸ºï¼š"><a href="#2-1-1-Shape-åè®®çš„é»˜è®¤è¡Œä¸ºï¼š" class="headerlink" title="2.1.1 Shape åè®®çš„é»˜è®¤è¡Œä¸ºï¼š"></a>2.1.1 <strong><code>Shape</code> åè®®çš„é»˜è®¤è¡Œä¸ºï¼š</strong></h4><p>å›¾å½¢é€šè¿‡å½“å‰çš„å‰æ™¯è‰²ï¼ˆ<code>foregroundColor</code>ï¼‰è¿›è¡Œå¡«å……ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>.fill()</code> å’Œ <code>.stroke()</code> æ–¹æ³•è‡ªå®šä¹‰ç»˜åˆ¶æ–¹å¼ã€‚</p>
<p>è¿™äº›ä¿®é¥°ç¬¦è¿”å›ä¸€ä¸ªä»¥æŒ‡å®šæ–¹å¼ï¼ˆé€šè¿‡æè¾¹æˆ–å¡«å……ï¼‰ç»˜åˆ¶å½¢çŠ¶çš„è§†å›¾ã€‚åœ¨æˆ‘ä»¬çš„æ¼”ç¤ºä¸­ï¼Œ<code>fill</code> çš„å‚æ•°çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªé¢œè‰²ï¼ˆä¾‹å¦‚ï¼Œ<code>Color.white</code>ï¼‰ã€‚ä½†æƒ…å†µå¹¶éå®Œå…¨å¦‚æ­¤â€¦</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">fill</span>&lt;<span class="type">S</span>&gt;(<span class="keyword">_</span> <span class="params">whatToFillWith</span>: <span class="type">S</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> <span class="keyword">where</span> <span class="type">S</span>: <span class="type">ShapeStyle</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯ä¸€ä¸ªæ³›å‹å‡½æ•°ï¼ˆç±»ä¼¼äºä½†ä¸åŒäºæ³›å‹ç±»å‹ï¼‰ã€‚<code>S</code> æ˜¯ä¸€ä¸ªä¸å…³å¿ƒçš„ç±»å‹ï¼ˆä½†ç”±äºæœ‰ <code>where</code> è¯­å¥ï¼Œå®ƒå˜æˆäº†â€œç¨å¾®å…³å¿ƒä¸€ä¸‹â€ï¼‰ã€‚<code>S</code> å¯ä»¥æ˜¯ä»»ä½•å®ç°äº† <code>ShapeStyle</code> åè®®çš„ç±»å‹ã€‚<code>ShapeStyle</code> åè®®é€šè¿‡å¯¹å½¢çŠ¶åº”ç”¨æŸäº›æ ·å¼<strong>å°†å½¢çŠ¶è½¬æ¢ä¸ºè§†å›¾</strong>ã€‚è¿™æ ·çš„ä¾‹å­åŒ…æ‹¬ï¼š<code>Color</code>ã€<code>ImagePaint</code>ã€<code>AngularGradient</code>ã€<code>LinearGradient</code>ã€‚</p>
<h4 id="2-1-2-å®ç°-Shape-åè®®çš„æ–¹æ³•ï¼š"><a href="#2-1-2-å®ç°-Shape-åè®®çš„æ–¹æ³•ï¼š" class="headerlink" title="2.1.2 å®ç° Shape åè®®çš„æ–¹æ³•ï¼š"></a>2.1.2 <strong>å®ç° <code>Shape</code> åè®®çš„æ–¹æ³•ï¼š</strong></h4><p>ä½†æ˜¯è¦æ€ä¹ˆå®ç°è‡ªå®šä¹‰ <code>Shape</code> å‘¢ï¼Ÿ</p>
<p>å®ç° <code>shape</code> åè®®å¿…é¡»å®ç°ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">path</span>(<span class="params">in</span> <span class="params">rect</span>: <span class="type">CGRect</span>) -&gt; <span class="type">Path</span></span><br></pre></td></tr></table></figure>

<p>è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ª <code>Path</code>ï¼Œç”¨äºå®šä¹‰å›¾å½¢çš„è·¯å¾„ã€‚</p>
<p><strong>Path çš„èƒ½åŠ›ï¼š</strong></p>
<ul>
<li>æ”¯æŒæ·»åŠ çº¿æ¡ã€å¼§çº¿ã€è´å¡å°”æ›²çº¿ç­‰ã€‚</li>
<li>å¯ä»¥é€šè¿‡ç»„åˆè¿™äº›è·¯å¾„åˆ›å»ºä»»æ„å½¢çŠ¶ã€‚</li>
</ul>
<h3 id="2-2-Demo-ç¤ºä¾‹ï¼šç»˜åˆ¶ä¸€ä¸ªæœªåŠ¨ç”»åŒ–çš„â€œå€’è®¡æ—¶é¥¼å›¾â€"><a href="#2-2-Demo-ç¤ºä¾‹ï¼šç»˜åˆ¶ä¸€ä¸ªæœªåŠ¨ç”»åŒ–çš„â€œå€’è®¡æ—¶é¥¼å›¾â€" class="headerlink" title="2.2 Demo ç¤ºä¾‹ï¼šç»˜åˆ¶ä¸€ä¸ªæœªåŠ¨ç”»åŒ–çš„â€œå€’è®¡æ—¶é¥¼å›¾â€"></a>2.2 Demo ç¤ºä¾‹ï¼šç»˜åˆ¶ä¸€ä¸ªæœªåŠ¨ç”»åŒ–çš„â€œå€’è®¡æ—¶é¥¼å›¾â€</h3><p>ä¸ºäº†æ›´æ¸…æ™°çš„è§‚å¯Ÿé¥¼å›¾çš„æ ·å¼:</p>
<ul>
<li>æˆ‘ä»¬å…ˆå°†å¡ç‰‡æ•°é‡è®¾ç½®ä¸º 4 å¼ ï¼ˆEmojiMemoryGame.swiftï¼‰</li>
<li>ä½¿å¡ç‰‡é»˜è®¤æœä¸Š(MemoryGame.swift)</li>
<li>åœ¨ Card ä¸­æ·»åŠ ä¸€ä¸ª <code>Circle</code> å¹¶è°ƒæ•´ <code>padding</code> å’Œ <code>opacity</code>ï¼Œå°† <code>Text</code> æ”¾ç½®åœ¨ <code>circle</code> çš„ <code>overlay</code> ä¸­ï¼Œç”±äº <code>padding</code> å’Œ <code>opacity</code> çš„å€¼ä¸ºå¸¸æ•°ï¼Œæˆ‘ä»¬å°†å…¶æ·»åŠ åˆ°ä¸‹é¢çš„å¸¸é‡ä¸­ï¼ˆCardView.swiftï¼‰</li>
</ul>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EMojiMemoryGame.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiMemoryGame</span>:<span class="title class_ inherited__">ObservableObject</span> &#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">createMemoryGame</span>() -&gt; <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">MemoryGame</span>(numberOfPairsOfCards: <span class="number">2</span>) &#123; <span class="type">Index</span> <span class="keyword">in</span></span><br><span class="line">        	<span class="operator">...</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="operator">...</span></span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//MemoryGame.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MemoryGame</span>&lt;<span class="type">CardContent</span>&gt; <span class="keyword">where</span> <span class="type">CardContent</span>: <span class="type">Equatable</span> &#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Card</span>: <span class="title class_ inherited__">Equatable</span>,<span class="title class_ inherited__">Identifiable</span>,<span class="title class_ inherited__">CustomDebugStringConvertible</span>  &#123;</span><br><span class="line">		<span class="operator">...</span></span><br><span class="line">        <span class="keyword">var</span> isFaceUp <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">		<span class="operator">...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  CardView.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">		 <span class="type">ZStack</span> &#123;</span><br><span class="line">			 <span class="keyword">let</span> base <span class="operator">=</span> <span class="type">RoundedRectangle</span>(cornerRadius: <span class="type">Constants</span>.cornerRadius)</span><br><span class="line">			 <span class="type">Group</span> &#123;</span><br><span class="line">				 base.fill(.white)</span><br><span class="line">				 base.strokeBorder(lineWidth: <span class="type">Constants</span>.lineWidth)</span><br><span class="line">				 <span class="type">Circle</span>()</span><br><span class="line">					 .opacity(<span class="type">Constants</span>.<span class="type">Pie</span>.opacity)</span><br><span class="line">					 .overlay(</span><br><span class="line">						 <span class="type">Text</span>(card.content)</span><br><span class="line">							 .font(.system(size: <span class="type">Constants</span>.<span class="type">FontSize</span>.largest))</span><br><span class="line">							 .minimumScaleFactor(<span class="type">Constants</span>.<span class="type">FontSize</span>.scaleFactor)</span><br><span class="line">							 .multilineTextAlignment(.center)</span><br><span class="line">							 .aspectRatio(<span class="number">1</span>, contentMode: .fit)</span><br><span class="line">							 .padding(<span class="type">Constants</span>.<span class="type">Pie</span>.in<span class="keyword">set</span>)</span><br><span class="line">					 )</span><br><span class="line">					 .padding(<span class="type">Constants</span>.in<span class="keyword">set</span>)</span><br><span class="line"></span><br><span class="line">			 &#125;</span><br><span class="line">			 .opacity(card.isFaceUp <span class="operator">?</span> <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line">			 base.fill().opacity(card.isFaceUp <span class="operator">?</span> <span class="number">0</span> : <span class="number">1</span>)</span><br><span class="line">		 &#125;</span><br><span class="line">		 .opacity(card.isFaceUp <span class="operator">||</span> <span class="operator">!</span>card.isMatched <span class="operator">?</span> <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">struct</span> <span class="title class_">Constants</span> &#123;</span><br><span class="line">	   <span class="keyword">static</span> <span class="keyword">let</span> cornerRadius:<span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">12</span></span><br><span class="line">	   <span class="keyword">static</span> <span class="keyword">let</span> lineWidth:<span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">2</span></span><br><span class="line">	   <span class="keyword">static</span> <span class="keyword">let</span> inset:<span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">5</span></span><br><span class="line">	   <span class="keyword">struct</span> <span class="title class_">FontSize</span> &#123;</span><br><span class="line">		   <span class="keyword">static</span> <span class="keyword">let</span> largest:<span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">200</span></span><br><span class="line">		   <span class="keyword">static</span> <span class="keyword">let</span> smallest:<span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">10</span></span><br><span class="line">		   <span class="keyword">static</span> <span class="keyword">let</span> scaleFactor <span class="operator">=</span> smallest <span class="operator">/</span> largest</span><br><span class="line">	   &#125;</span><br><span class="line"></span><br><span class="line">	   <span class="keyword">struct</span> <span class="title class_">Pie</span> &#123;</span><br><span class="line">		   <span class="keyword">static</span> <span class="keyword">let</span> opacity:<span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">0.5</span></span><br><span class="line">		   <span class="keyword">static</span> <span class="keyword">let</span> inset:<span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">5</span></span><br><span class="line">	   &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-1-åˆ›å»ºä¸€ä¸ª-Pieï¼ˆshapeï¼‰"><a href="#2-2-1-åˆ›å»ºä¸€ä¸ª-Pieï¼ˆshapeï¼‰" class="headerlink" title="2.2.1 åˆ›å»ºä¸€ä¸ª Pieï¼ˆshapeï¼‰"></a>2.2.1 åˆ›å»ºä¸€ä¸ª Pieï¼ˆshapeï¼‰</h4><p>è™½ç„¶ <code>Pie</code> æ˜¯ä¸€ä¸ª <code>View</code>ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ª <code>Shape</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <code>swift</code> æ–‡æ¡£ï¼Œè€Œé <code>swiftUI</code>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  Pie.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> CoreGraphics</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Pie</span>: <span class="title class_ inherited__">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> startAngle: <span class="type">Angle</span> <span class="operator">=</span> .zero</span><br><span class="line">    <span class="keyword">let</span> endAngle: <span class="type">Angle</span></span><br><span class="line">    <span class="comment">// é¡ºæ—¶é’ˆ</span></span><br><span class="line">    <span class="keyword">var</span> clockwise <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Shapeåè®® æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">path</span>(<span class="params">in</span> <span class="params">rect</span>: <span class="type">CGRect</span>) -&gt; <span class="type">Path</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> center <span class="operator">=</span> <span class="type">CGPoint</span>(x: rect.midX, y: rect.midY)</span><br><span class="line">        <span class="keyword">let</span> radius <span class="operator">=</span> <span class="built_in">min</span>(rect.width, rect.height) <span class="operator">/</span> <span class="number">2</span></span><br><span class="line">        <span class="keyword">let</span> start <span class="operator">=</span> <span class="type">CGPoint</span>(</span><br><span class="line">            x: center.x <span class="operator">+</span> radius <span class="operator">*</span> cos(startAngle.radians),</span><br><span class="line">            y: center.y <span class="operator">+</span> radius <span class="operator">*</span> sin(startAngle.radians)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> p <span class="operator">=</span> <span class="type">Path</span>()</span><br><span class="line">        p.move(to: center)</span><br><span class="line">        p.addLine(to: start)</span><br><span class="line">        p.addArc(</span><br><span class="line">            center: center,</span><br><span class="line">            radius: radius,</span><br><span class="line">            startAngle: startAngle,</span><br><span class="line">            endAngle: endAngle,</span><br><span class="line">            clockwise: clockwise</span><br><span class="line">        )</span><br><span class="line">        p.addLine(to: center)</span><br><span class="line">        <span class="keyword">return</span> p</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å†å°† <code>CardView.swift</code> ä¸­çš„ <code>circle()</code> æ”¹ä¸º <code>Pie()</code>ã€‚</p>
<p>æˆ‘ä»¬è¯•å›¾åˆ›å»ºä¸€ä¸ªä» 12 ç‚¹é’Ÿæ–¹å‘åˆ° 8 ç‚¹é’Ÿæ–¹å‘çš„é¡ºæ—¶é’ˆé¥¼å›¾ï¼Œä½†è¿™ä¼¼ä¹ä¸å¤ªå¯¹åŠ²ï¼š</p>
<p><img src="/2025/01/05/Stanford-cs193p-07%EF%BD%9CShape-ViewModifier-Constants/cs193p%7C07%7C2.png"></p>
<p>å› ä¸ºè¿™çš„ 0 åº¦å’Œæ—¶é’Ÿä¸åŒï¼Œå®ƒéµå¾ªç›´è§’åæ ‡ç³»ï¼Œæ˜¯ x è½´æ­£å‘ã€‚</p>
<p>å¦å¤–ï¼Œæ­¤å¤„çš„åæ ‡ç³»åŸç‚¹æ˜¯åœ¨å·¦ä¸Šè§’ï¼Œy è½´æ­£å‘æ˜¯å‘ä¸‹çš„ï¼Œæ‰€ä»¥é¡ºæ—¶é’ˆæ–¹å‘ä¹Ÿå’Œé€šå¸¸çš„æƒ…å†µç›¸åã€‚æ¥ä¸‹æ¥è¿›è¡Œä¿®æ­£ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  Pie.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Pie</span>: <span class="title class_ inherited__">Shape</span> &#123;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">path</span>(<span class="params">in</span> <span class="params">rect</span>: <span class="type">CGRect</span>) -&gt; <span class="type">Path</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> startAngle <span class="operator">=</span> startAngle <span class="operator">-</span> .degrees(<span class="number">90</span>)</span><br><span class="line">        <span class="keyword">let</span> endAngle <span class="operator">=</span> endAngle <span class="operator">-</span> .degrees(<span class="number">90</span>)</span><br><span class="line">        <span class="operator">...</span></span><br><span class="line">        p.addArc(</span><br><span class="line">            center: center,</span><br><span class="line">            radius: radius,</span><br><span class="line">            startAngle: startAngle,</span><br><span class="line">            endAngle: endAngle,</span><br><span class="line">            clockwise: <span class="operator">!</span>clockwise</span><br><span class="line">        )</span><br><span class="line">		<span class="operator">...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¿®æ­£åé¢„è§ˆæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="/2025/01/05/Stanford-cs193p-07%EF%BD%9CShape-ViewModifier-Constants/cs193p%7C07%7C3.png"></p>
<h2 id="3-åŠ¨ç”»ï¼ˆAnimationï¼‰"><a href="#3-åŠ¨ç”»ï¼ˆAnimationï¼‰" class="headerlink" title="3. åŠ¨ç”»ï¼ˆAnimationï¼‰"></a><strong>3. åŠ¨ç”»ï¼ˆAnimationï¼‰</strong></h2><h3 id="3-1-åŠ¨ç”»çš„å·¥ä½œåŸç†"><a href="#3-1-åŠ¨ç”»çš„å·¥ä½œåŸç†" class="headerlink" title="3.1 åŠ¨ç”»çš„å·¥ä½œåŸç†"></a><strong>3.1 åŠ¨ç”»çš„å·¥ä½œåŸç†</strong></h3><p>åŠ¨ç”»æ˜¯æå‡ç§»åŠ¨ç«¯ç”¨æˆ·ç•Œé¢äº¤äº’ä½“éªŒçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p>
<p>SwiftUI æä¾›äº†ä¾¿æ·çš„åŠ¨ç”»å·¥å…·ï¼š</p>
<ul>
<li>é€šè¿‡ Shape åŠ¨ç”»åŒ–å›¾å½¢ã€‚</li>
<li>ä½¿ç”¨ ViewModifiers åŠ¨ç”»åŒ–è§†å›¾ã€‚</li>
</ul>
<h3 id="3-2-ç¤ºä¾‹ï¼šåŠ¨ç”»åŒ–-Shape"><a href="#3-2-ç¤ºä¾‹ï¼šåŠ¨ç”»åŒ–-Shape" class="headerlink" title="3.2 ç¤ºä¾‹ï¼šåŠ¨ç”»åŒ– Shape"></a><strong>3.2 ç¤ºä¾‹ï¼šåŠ¨ç”»åŒ– Shape</strong></h3><p>åŠ¨ç”»åŒ–ä¸€ä¸ª <code>Shape</code>ï¼ˆä¾‹å¦‚ç§»åŠ¨çš„é¥¼å›¾ï¼‰ï¼š</p>
<ul>
<li>å¯ä»¥é€šè¿‡åœ¨ <code>Shape</code> çš„å±æ€§ä¸Šæ·»åŠ åŠ¨ç”»æ”¯æŒã€‚</li>
<li>ç¤ºä¾‹å°†åœ¨ä¸‹ä¸€èŠ‚æ¼”ç¤ºä¸­è¡¥å……ã€‚</li>
</ul>
<hr>
<h2 id="4-è§†å›¾ä¿®é¥°ç¬¦ï¼ˆViewModifierï¼‰"><a href="#4-è§†å›¾ä¿®é¥°ç¬¦ï¼ˆViewModifierï¼‰" class="headerlink" title="4. è§†å›¾ä¿®é¥°ç¬¦ï¼ˆViewModifierï¼‰"></a><strong>4. è§†å›¾ä¿®é¥°ç¬¦ï¼ˆViewModifierï¼‰</strong></h2><h3 id="4-1-ä»€ä¹ˆæ˜¯-ViewModifierï¼Ÿ"><a href="#4-1-ä»€ä¹ˆæ˜¯-ViewModifierï¼Ÿ" class="headerlink" title="4.1 ä»€ä¹ˆæ˜¯ ViewModifierï¼Ÿ"></a><strong>4.1 ä»€ä¹ˆæ˜¯ ViewModifierï¼Ÿ</strong></h3><p>SwiftUI ä¸­çš„ä¿®é¥°ç¬¦ï¼ˆå¦‚ <code>foregroundColor</code>ã€<code>font</code>ã€<code>padding</code>ï¼‰æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</p>
<p>å®ƒä»¬æ˜¯ <code>ViewModifier</code> åè®®çš„å®ç°ã€‚ç¤ºä¾‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">.aspectRatio(<span class="number">2</span><span class="operator">/</span><span class="number">3</span>)</span><br><span class="line"><span class="comment">// å®é™…ä¸Šç­‰ä»·äºï¼š</span></span><br><span class="line">.modifier(<span class="type">AspectModifier</span>(<span class="number">2</span><span class="operator">/</span><span class="number">3</span>))</span><br></pre></td></tr></table></figure>

<p><strong><code>ViewModifier</code> çš„æ ¸å¿ƒåŠŸèƒ½</strong>æ˜¯é€šè¿‡ <code>body(content:)</code> æ–¹æ³•æ¥æ”¶ä¸€ä¸ªè§†å›¾å¹¶è¿”å›ä¿®æ”¹åçš„è§†å›¾ã€‚ <code>ViewModifier</code> åè®®åªæœ‰ä¸€ä¸ªå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°çš„å”¯ä¸€ä»»åŠ¡æ˜¯æ ¹æ®ä¼ å…¥çš„å†…å®¹åˆ›å»ºä¸€ä¸ªæ–°çš„è§†å›¾ã€‚ä»æ¦‚å¿µä¸Šè®²ï¼Œè¿™ä¸ªåè®®å¤§è‡´å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protocol</span> <span class="title class_">ViewModifier</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">body</span>(<span class="params">content</span>: <span class="type">Content</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="comment">// Content æ˜¯ä¸€ä¸ªâ€œç¨å¾®å…³å¿ƒä¸€ä¸‹â€çš„è§†å›¾ï¼Œå³è¢«ä¿®é¥°çš„è§†å›¾</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">some</span> <span class="type">Viewï¼Œå‡ ä¹è‚¯å®šä¼šåŒ…å«å†…å®¹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“æˆ‘ä»¬åœ¨ä¸€ä¸ªè§†å›¾ä¸Šè°ƒç”¨ <code>modifier</code> æ—¶ï¼Œä¼ é€’ç»™è¿™ä¸ª <code>body</code> å‡½æ•°çš„å†…å®¹å°±æ˜¯è¯¥è§†å›¾ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">aView.modifier(<span class="type">MyViewModifier</span>(arguments: <span class="operator">...</span>))</span><br></pre></td></tr></table></figure>

<p><code>MyViewModifier</code> å®ç°äº† <code>ViewModifier</code> åè®®ï¼Œè€Œ <code>aView</code> å°†é€šè¿‡ <code>content</code> ä¼ é€’ç»™å®ƒçš„ <code>body</code> å‡½æ•°ã€‚</p>
<h3 id="4-2-åˆ›å»ºè‡ªå®šä¹‰-ViewModifier"><a href="#4-2-åˆ›å»ºè‡ªå®šä¹‰-ViewModifier" class="headerlink" title="4.2 åˆ›å»ºè‡ªå®šä¹‰ ViewModifier"></a><strong>4.2 åˆ›å»ºè‡ªå®šä¹‰ ViewModifier</strong></h3><p><strong>ç›®æ ‡</strong></p>
<ul>
<li>å°†ä»»æ„è§†å›¾è½¬æ¢ä¸ºâ€œå¡ç‰‡â€æ ·å¼ã€‚</li>
</ul>
<p><strong>ä½¿ç”¨æ–¹æ³•</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">Text</span>(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">	.modifier(<span class="type">Cardify</span>(isFaceUp: <span class="literal">true</span>))</span><br></pre></td></tr></table></figure>

<p><code>.modifier</code> å°†è¿”å›ä¸€ä¸ªå¦‚ä¸‹çš„è§†å›¾</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Cardify</span>: <span class="title class_ inherited__">ViewModifier</span> &#123;</span><br><span class="line">	<span class="keyword">var</span> isFaceUp: <span class="type">Bool</span></span><br><span class="line">	<span class="keyword">func</span> <span class="title function_">body</span>(<span class="params">content</span>: <span class="type">Content</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">		<span class="type">ZStack</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> isFaceUp &#123;</span><br><span class="line">				<span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">10</span>).fill(<span class="type">Color</span>.white)</span><br><span class="line">				<span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">10</span>).stroke()</span><br><span class="line">				content</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">10</span>).fill(<span class="type">Color</span>.gray)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‚£æˆ‘ä»¬è¦å¦‚ä½•å°†å…¶ä» <code>.modifier(Cardify(isFaceUp: true))</code> è½¬å˜ä¸º <code>.cardify(isFaceUp:true)</code> å‘¢ï¼Ÿé€šè¿‡ <code>extension</code> æ¥å®ç°</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">View</span> &#123;</span><br><span class="line">   <span class="keyword">func</span> <span class="title function_">cardify</span>(<span class="params">isFaceUp</span>: <span class="type">Bool</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">	   modifier(<span class="type">Cardify</span>(isFaceUp: isFaceUp))</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="4-3-Demoï¼šï¼šå®ç°-Cardify-ä¿®é¥°ç¬¦"><a href="#4-3-Demoï¼šï¼šå®ç°-Cardify-ä¿®é¥°ç¬¦" class="headerlink" title="4.3 Demoï¼šï¼šå®ç° Cardify ä¿®é¥°ç¬¦"></a>4.3 Demoï¼šï¼šå®ç° <code>Cardify</code> ä¿®é¥°ç¬¦</h3><p>å› ä¸ºä¸éœ€è¦é¢„è§ˆï¼ˆpreviewï¼‰ï¼Œæ‰€ä»¥åˆ›å»ºä¸€ä¸ª swift æ–‡ä»¶ï¼Œå‘½åä¸º <code>Cardify.swift</code> ã€‚</p>
<p>æˆ‘ä»¬åœ¨ <code>CardView</code> ä¸­æˆªå– Card éƒ¨åˆ†ï¼Œå¹¶åˆ é™¤ä¼šè¢« <code>Cardify</code> çš„éƒ¨åˆ†ï¼ˆå³é¥¼å›¾ï¼‰ä½œä¸º contentï¼Œå¹¶å£°æ˜ç§æœ‰ç»“æ„ä½“ <code>Constants</code> åˆ›å»ºå¸¸æ•°çš„å‘½åç©ºé—´ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  Cardify.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Cardify</span>: <span class="title class_ inherited__">ViewModifier</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> isFaceUp: <span class="type">Bool</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">body</span>(<span class="params">content</span>: <span class="type">Content</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">        	<span class="keyword">let</span> base <span class="operator">=</span> <span class="type">RoundedRectangle</span>(cornerRadius: <span class="type">Constants</span>.cornerRadius)</span><br><span class="line">        	<span class="type">Group</span> &#123;</span><br><span class="line">        		base.fill(.white)</span><br><span class="line">        		base.strokeBorder(lineWidth: <span class="type">Constants</span>.lineWidth)</span><br><span class="line">        		content</span><br><span class="line">			 &#125;</span><br><span class="line">			 .opacity(isFaceUp <span class="operator">?</span> <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">            base.fill()</span><br><span class="line">                .opacity(isFaceUp <span class="operator">?</span> <span class="number">0</span> : <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">struct</span> <span class="title class_">Constants</span> &#123;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">let</span> cornerRadius: <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">12</span></span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">let</span> lineWidth: <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  CardView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">   	<span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Pie</span>(endAngle: .degrees(<span class="number">240</span>))</span><br><span class="line">            .opacity(<span class="type">Constants</span>.<span class="type">Pie</span>.opacity)</span><br><span class="line">            .overlay(</span><br><span class="line">                <span class="type">Text</span>(card.content)</span><br><span class="line">                    .font(.system(size: <span class="type">Constants</span>.<span class="type">FontSize</span>.largest))</span><br><span class="line">                    .minimumScaleFactor(<span class="type">Constants</span>.<span class="type">FontSize</span>.scaleFactor)</span><br><span class="line">                    .multilineTextAlignment(.center)</span><br><span class="line">                    .aspectRatio(<span class="number">1</span>, contentMode: .fit)</span><br><span class="line">                    .padding(<span class="type">Constants</span>.<span class="type">Pie</span>.in<span class="keyword">set</span>)</span><br><span class="line">            )</span><br><span class="line">            .padding(<span class="type">Constants</span>.in<span class="keyword">set</span>)</span><br><span class="line">            .modifier(<span class="type">Cardify</span>(isFaceUp: card.isFaceUp))</span><br><span class="line">            .opacity(card.isFaceUp <span class="operator">||</span> <span class="operator">!</span>card.isMatched <span class="operator">?</span> <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">struct</span> <span class="title class_">Constants</span> &#123;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">let</span> inset: <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">5</span></span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">FontSize</span> &#123;</span><br><span class="line">        	<span class="operator">...</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">Pie</span> &#123;</span><br><span class="line">            <span class="operator">...</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æƒ³å°† <code>.modifier</code> å˜ä¸º <code>.cardify</code> åˆ™éœ€è¦æ·»åŠ ä¸€ä¸ªåè®®æ‰©å±•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Cardify.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Cardify</span>: <span class="title class_ inherited__">ViewModifier</span> &#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">body</span>(<span class="params">content</span>: <span class="type">Content</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> base <span class="operator">=</span> <span class="type">RoundedRectangle</span>(cornerRadius: <span class="type">Constants</span>.cornerRadius)</span><br><span class="line">            base.strokeBorder(lineWidth: <span class="type">Constants</span>.lineWidth)</span><br><span class="line">                .background(base.fill(.white))</span><br><span class="line">                .overlay(content)</span><br><span class="line">                .opacity(isFaceUp <span class="operator">?</span> <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line">            base.fill()</span><br><span class="line">                .opacity(isFaceUp <span class="operator">?</span> <span class="number">0</span> : <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">cardify</span>(<span class="params">isFaceUp</span>: <span class="type">Bool</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        modifier(<span class="type">Cardify</span>(isFaceUp: isFaceUp))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  CardView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">   	<span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Pie</span>(endAngle: .degrees(<span class="number">240</span>))</span><br><span class="line">            .opacity(<span class="type">Constants</span>.<span class="type">Pie</span>.opacity)</span><br><span class="line">            .overlay(</span><br><span class="line">                <span class="operator">...</span></span><br><span class="line">            )</span><br><span class="line">            .padding(<span class="type">Constants</span>.in<span class="keyword">set</span>)</span><br><span class="line">            .<span class="type">Cardify</span>(isFaceUp: card.isFaceUp)</span><br><span class="line">            .opacity(card.isFaceUp <span class="operator">||</span> <span class="operator">!</span>card.isMatched <span class="operator">?</span> <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<h2 id="5-åè®®ï¼ˆProtocolï¼‰"><a href="#5-åè®®ï¼ˆProtocolï¼‰" class="headerlink" title="5. åè®®ï¼ˆProtocolï¼‰"></a><strong>5. åè®®ï¼ˆProtocolï¼‰</strong></h2><h3 id="5-1-åè®®çš„ç”¨é€”"><a href="#5-1-åè®®çš„ç”¨é€”" class="headerlink" title="5.1 åè®®çš„ç”¨é€”"></a>5.1 åè®®çš„ç”¨é€”</h3><h4 id="5-1-1-åè®®çš„æ ¸å¿ƒä½œç”¨"><a href="#5-1-1-åè®®çš„æ ¸å¿ƒä½œç”¨" class="headerlink" title="5.1.1 åè®®çš„æ ¸å¿ƒä½œç”¨"></a><strong>5.1.1 åè®®çš„æ ¸å¿ƒä½œç”¨</strong></h4><ul>
<li>åè®®æ˜¯ Swift ä¸­ç”¨äº<strong>å®šä¹‰è¡Œä¸ºå’Œçº¦å®š</strong>çš„å·¥å…·ã€‚</li>
<li>å®ƒæ˜¯ä»£ç å…±äº«çš„æ ¸å¿ƒï¼Œå…è®¸åœ¨å¤šä¸ªç±»å‹ä¹‹é—´å¤ç”¨åŠŸèƒ½ã€‚</li>
<li>åè®®å¯ä»¥é€šè¿‡<strong>æ‰©å±•ï¼ˆ<code>extension</code>ï¼‰</strong>æ¥æ·»åŠ å®ç°ã€‚<ul>
<li>ç¤ºä¾‹ï¼š<ul>
<li><code>View</code> åè®®çš„æ‰©å±•ä¸ºè§†å›¾æä¾›äº†è®¸å¤šä¿®é¥°ç¬¦ï¼Œä¾‹å¦‚ <code>foregroundColor</code> å’Œ <code>font</code>ã€‚</li>
<li>é€šè¿‡æ‰©å±•ï¼Œå¼€å‘è€…å¯ä»¥åœ¨åè®®ä¸­æ·»åŠ å‡½æ•°å’Œå±æ€§çš„é»˜è®¤å®ç°ã€‚</li>
<li>ä¾‹å¦‚ï¼š<code>ObservableObject</code> åè®®é€šè¿‡æ‰©å±•è·å¾—äº† <code>objectWillChange</code> çš„é»˜è®¤å®ç°ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="5-1-2-åè®®æ‰©å±•çš„ä¾‹å­"><a href="#5-1-2-åè®®æ‰©å±•çš„ä¾‹å­" class="headerlink" title="5.1.2 åè®®æ‰©å±•çš„ä¾‹å­"></a><strong>5.1.2 åè®®æ‰©å±•çš„ä¾‹å­</strong></h4><h5 id="5-1-2-1-ç¤ºä¾‹-1ï¼šåœ¨åè®®ä¸­æ·»åŠ ä¿®é¥°ç¬¦åŠŸèƒ½"><a href="#5-1-2-1-ç¤ºä¾‹-1ï¼šåœ¨åè®®ä¸­æ·»åŠ ä¿®é¥°ç¬¦åŠŸèƒ½" class="headerlink" title="5.1.2.1 ç¤ºä¾‹ 1ï¼šåœ¨åè®®ä¸­æ·»åŠ ä¿®é¥°ç¬¦åŠŸèƒ½"></a><strong>5.1.2.1 ç¤ºä¾‹ 1ï¼šåœ¨åè®®ä¸­æ·»åŠ ä¿®é¥°ç¬¦åŠŸèƒ½</strong></h5><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">foregroundColor</span>(<span class="keyword">_</span> <span class="params">color</span>: <span class="type">Color</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="comment">// å®ç°ä»£ç </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">font</span>(<span class="keyword">_</span> <span class="params">font</span>: <span class="type">Font</span>?) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="comment">// å®ç°ä»£ç </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>è¿™äº›æ‰©å±•ä½¿è§†å›¾ç±»å‹ï¼ˆå¦‚ <code>Text</code> å’Œ <code>Image</code>ï¼‰è‡ªåŠ¨è·å¾—ä¸Šè¿°ä¿®é¥°ç¬¦åŠŸèƒ½ã€‚</li>
</ul>
<h5 id="5-1-2-2-ç¤ºä¾‹-2ï¼šfilter-çš„å®ç°"><a href="#5-1-2-2-ç¤ºä¾‹-2ï¼šfilter-çš„å®ç°" class="headerlink" title="5.1.2.2 ç¤ºä¾‹ 2ï¼šfilter çš„å®ç°"></a><strong>5.1.2.2 ç¤ºä¾‹ 2ï¼š<code>filter</code> çš„å®ç°</strong></h5><p><code>filter</code> å‡½æ•°é€šè¿‡æ‰©å±•è¢«æ·»åŠ åˆ° <code>Sequence</code> åè®®ä¸­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">Sequence</span> &#123;</span><br><span class="line">	<span class="keyword">func</span> <span class="title function_">filter</span>(<span class="keyword">_</span> <span class="params">isIncluded</span>: (<span class="type">Element</span>) -&gt; <span class="type">Bool</span>) -&gt; [<span class="type">Element</span>] &#123;</span><br><span class="line">		<span class="comment">// å®ç°ä»£ç </span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ„å‘³ç€ï¼Œ<code>filter</code> å¯ä»¥ç›´æ¥ç”¨äº <code>Array</code>ã€<code>Range</code> å’Œ <code>Dictionary</code> ç­‰ç±»å‹ï¼Œè€Œæ— éœ€å•ç‹¬å®ç°ã€‚</p>
<h3 id="5-2-æ³›å‹ä¸åè®®"><a href="#5-2-æ³›å‹ä¸åè®®" class="headerlink" title="5.2 æ³›å‹ä¸åè®®"></a><strong>5.2 æ³›å‹ä¸åè®®</strong></h3><h4 id="5-2-1-åè®®ä¸­çš„æ³›å‹ç±»å‹"><a href="#5-2-1-åè®®ä¸­çš„æ³›å‹ç±»å‹" class="headerlink" title="5.2.1 åè®®ä¸­çš„æ³›å‹ç±»å‹"></a><strong>5.2.1 åè®®ä¸­çš„æ³›å‹ç±»å‹</strong></h4><ul>
<li>åè®®æ”¯æŒæ³›å‹ï¼ˆâ€donâ€™t careâ€ ç±»å‹ï¼‰ï¼Œå…è®¸å®ƒä¸ä¸åŒç±»å‹ç»“åˆä½¿ç”¨ã€‚</li>
<li><strong><code>associatedtype</code> å…³é”®å­—ï¼š</strong><ul>
<li>ç”¨äºå£°æ˜åè®®ä¸­çš„æ³›å‹ç±»å‹ã€‚</li>
<li>ç¤ºä¾‹ï¼š<code>Identifiable</code> åè®®ï¼š<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protocol</span> <span class="title class_">Identifiable</span> &#123;</span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">ID</span></span><br><span class="line">    <span class="keyword">var</span> id: <span class="type">ID</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>ID</code> æ˜¯ä¸€ä¸ªæ³›å‹ç±»å‹ï¼Œå®ƒå¯ä»¥æ˜¯ä»»ä½•ç±»å‹ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="5-2-2-ä½¿ç”¨æ³›å‹çº¦æŸ"><a href="#5-2-2-ä½¿ç”¨æ³›å‹çº¦æŸ" class="headerlink" title="5.2.2 ä½¿ç”¨æ³›å‹çº¦æŸ"></a><strong>5.2.2 ä½¿ç”¨æ³›å‹çº¦æŸ</strong></h4><ul>
<li>å¯ä»¥é€šè¿‡æ³›å‹çº¦æŸé™åˆ¶æ³›å‹ç±»å‹çš„è¡Œä¸ºã€‚<ul>
<li>ç¤ºä¾‹ï¼šè®© <code>ID</code> å¿…é¡»éµå¾ª <code>Hashable</code> åè®®ï¼š<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protocol</span> <span class="title class_">Identifiable</span> &#123;</span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">ID</span>: <span class="type">Hashable</span></span><br><span class="line">    <span class="keyword">var</span> id: <span class="type">ID</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>è§£é‡Šï¼š<ul>
<li><code>Hashable</code> æ˜¯ä¸€ä¸ªåè®®ï¼Œä¿è¯ <code>ID</code> å¯ä»¥è¢«ç”¨äºå“ˆå¸Œè¡¨ä¸­ï¼ˆä¾‹å¦‚å­—å…¸æˆ–é›†åˆï¼‰ã€‚</li>
<li>è¿™æ ·å¯ä»¥ç¡®ä¿ <code>Identifiable</code> ç±»å‹çš„å¯¹è±¡æ˜¯å¯æŸ¥æ‰¾çš„ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="5-3-View-åè®®ä¸-SwiftUI-ç±»å‹ç³»ç»Ÿ"><a href="#5-3-View-åè®®ä¸-SwiftUI-ç±»å‹ç³»ç»Ÿ" class="headerlink" title="5.3 View åè®®ä¸ SwiftUI ç±»å‹ç³»ç»Ÿ"></a><strong>5.3 <code>View</code> åè®®ä¸ SwiftUI ç±»å‹ç³»ç»Ÿ</strong></h3><h4 id="5-3-1-View-åè®®çš„ç»“æ„"><a href="#5-3-1-View-åè®®çš„ç»“æ„" class="headerlink" title="5.3.1 View åè®®çš„ç»“æ„"></a><strong>5.3.1 <code>View</code> åè®®çš„ç»“æ„</strong></h4><ul>
<li>SwiftUI ä¸­çš„ <code>View</code> åè®®å¤§è‡´å¦‚ä¸‹ï¼š<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protocol</span> <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ‰€æœ‰çš„è§†å›¾ï¼ˆå¦‚ <code>Text</code>ã€<code>Button</code> ç­‰ï¼‰éƒ½éœ€è¦å®ç° <code>body</code> å±æ€§ï¼Œå¹¶è¿”å›ä¸€ä¸ªç¬¦åˆ <code>View</code> åè®®çš„ç±»å‹ã€‚</li>
</ul>
</li>
</ul>
<h4 id="5-3-2-æ‰©å±•-View-åè®®"><a href="#5-3-2-æ‰©å±•-View-åè®®" class="headerlink" title="5.3.2 æ‰©å±• View åè®®"></a><strong>5.3.2 æ‰©å±• <code>View</code> åè®®</strong></h4><ul>
<li>é€šè¿‡æ‰©å±• <code>View</code> åè®®ï¼ŒSwiftUI æ·»åŠ äº†è®¸å¤šå¸¸ç”¨åŠŸèƒ½ï¼š<ul>
<li>ä¿®é¥°ç¬¦æ–¹æ³•ï¼ˆå¦‚ <code>foregroundColor</code> å’Œ <code>font</code>ï¼‰ï¼š<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">foregroundColor</span>(<span class="keyword">_</span> <span class="params">color</span>: <span class="type">Color</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="comment">// å®ç°</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">font</span>(<span class="keyword">_</span> <span class="params">font</span>: <span class="type">Font</span>?) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="comment">// å®ç°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>è¿™äº›æ–¹æ³•ä¸ºå®ç°äº† <code>View</code> åè®®çš„æ‰€æœ‰ç±»å‹ï¼ˆå¦‚ <code>Text</code>ï¼‰æä¾›äº†é¢å¤–çš„åŠŸèƒ½ã€‚</li>
</ul>
</li>
</ul>
<h3 id="5-4-some-å’Œ-any-çš„ç”¨æ³•"><a href="#5-4-some-å’Œ-any-çš„ç”¨æ³•" class="headerlink" title="5.4 some å’Œ any çš„ç”¨æ³•"></a><strong>5.4 <code>some</code> å’Œ <code>any</code> çš„ç”¨æ³•</strong></h3><h4 id="5-4-1-some-å…³é”®å­—"><a href="#5-4-1-some-å…³é”®å­—" class="headerlink" title="5.4.1 some å…³é”®å­—"></a><strong>5.4.1 <code>some</code> å…³é”®å­—</strong></h4><ul>
<li><code>some</code> ç”¨äºè¿”å›<strong>ä¸é€æ˜ç±»å‹</strong>ã€‚</li>
<li><strong>è¿”å›ä¸é€æ˜ç±»å‹çš„ç¤ºä¾‹ï¼š</strong><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">10</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>body</code> çš„è¿”å›å€¼æ˜¯ <code>some View</code>ï¼Œè¡¨ç¤ºå®ƒè¿”å›çš„æ˜¯ä¸€ç§ç¬¦åˆ <code>View</code> åè®®çš„å…·ä½“ç±»å‹ï¼Œä½†å…·ä½“æ˜¯ä»€ä¹ˆç±»å‹ç”± Swift æ¨æ–­ã€‚</li>
<li>æ³¨æ„ï¼š<code>some</code> ç±»å‹åœ¨æ‰€æœ‰æ‰§è¡Œè·¯å¾„ä¸­å¿…é¡»ä¸€è‡´ã€‚</li>
</ul>
</li>
</ul>
<h4 id="5-4-2-ä½¿ç”¨-some-åˆ›å»ºå‡½æ•°ç¤ºä¾‹"><a href="#5-4-2-ä½¿ç”¨-some-åˆ›å»ºå‡½æ•°ç¤ºä¾‹" class="headerlink" title="5.4.2 ä½¿ç”¨ some åˆ›å»ºå‡½æ•°ç¤ºä¾‹"></a><strong>5.4.2 ä½¿ç”¨ <code>some</code> åˆ›å»ºå‡½æ•°ç¤ºä¾‹</strong></h4><p>ç¤ºä¾‹ï¼šè¿”å›ä¸åŒçš„ <code>Shape</code> ç±»å‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">getShape</span>(<span class="params">rounded</span>: <span class="type">Bool</span>) -&gt; <span class="keyword">some</span> <span class="type">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> rounded &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">12</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Rectangle</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿”å›å€¼æ˜¯ <code>some Shape</code>ï¼Œä¿è¯è°ƒç”¨æ–¹åªéœ€çŸ¥é“ç»“æœæ˜¯æŸç§ <code>Shape</code>ã€‚</p>
<h4 id="5-4-3-any-å…³é”®å­—"><a href="#5-4-3-any-å…³é”®å­—" class="headerlink" title="5.4.3 any å…³é”®å­—"></a><strong>5.4.3 <code>any</code> å…³é”®å­—</strong></h4><ul>
<li><p><code>any</code> ç”¨äºåˆ›å»ºåè®®ç±»å‹çš„å¼‚æ„é›†åˆã€‚</p>
</li>
<li><p><strong>ç¤ºä¾‹ï¼šåè®®ç±»å‹æ•°ç»„</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> ids: [<span class="keyword">any</span> <span class="type">Identifiable</span>] <span class="operator">=</span> []</span><br></pre></td></tr></table></figure>
<ul>
<li><code>ids</code> æ˜¯ä¸€ä¸ªå¯ä»¥å­˜æ”¾ä¸åŒ <code>Identifiable</code> ç±»å‹å®ä¾‹çš„æ•°ç»„ã€‚</li>
</ul>
</li>
<li><p><strong>é™åˆ¶ï¼š</strong></p>
<ul>
<li>è¦æ“ä½œ <code>any</code> åè®®ç±»å‹çš„å¯¹è±¡ï¼Œå¿…é¡»é€šè¿‡æ¥å—å…·ä½“åè®®çš„å‡½æ•°ã€‚</li>
<li>ç¤ºä¾‹ï¼š<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">printId</span>(<span class="params">of</span> <span class="params">identifiable</span>: <span class="keyword">some</span> <span class="type">Identifiable</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(identifiable.id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="5-6-Identifiable-åè®®çš„ä¾‹å­"><a href="#5-6-Identifiable-åè®®çš„ä¾‹å­" class="headerlink" title="5.6 Identifiable åè®®çš„ä¾‹å­"></a><strong>5.6 <code>Identifiable</code> åè®®çš„ä¾‹å­</strong></h3><h4 id="5-6-1-åè®®å®šä¹‰"><a href="#5-6-1-åè®®å®šä¹‰" class="headerlink" title="5.6.1 åè®®å®šä¹‰"></a><strong>5.6.1 åè®®å®šä¹‰</strong></h4><ul>
<li><code>Identifiable</code> æ˜¯ä¸€ä¸ª Swift æ ‡å‡†åº“åè®®ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protocol</span> <span class="title class_">Identifiable</span> &#123;</span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">ID</span>: <span class="type">Hashable</span></span><br><span class="line">    <span class="keyword">var</span> id: <span class="type">ID</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ç”¨é€”ï¼šé€šè¿‡å”¯ä¸€æ ‡è¯†ç¬¦ <code>id</code> åŒºåˆ†å¯¹è±¡ã€‚</li>
</ul>
</li>
</ul>
<h4 id="5-6-2-ç¤ºä¾‹åº”ç”¨"><a href="#5-6-2-ç¤ºä¾‹åº”ç”¨" class="headerlink" title="5.6.2 ç¤ºä¾‹åº”ç”¨"></a><strong>5.6.2 ç¤ºä¾‹åº”ç”¨</strong></h4><ul>
<li>åœ¨å†…å­˜æ¸¸æˆä¸­ï¼Œä¸ºå¡ç‰‡å®šä¹‰æ ‡è¯†ç¬¦ï¼š<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Card</span>: <span class="title class_ inherited__">Identifiable</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> id: <span class="type">String</span> <span class="comment">// `id` éµå¾ª `Hashable` åè®®</span></span><br><span class="line">    <span class="keyword">var</span> isFaceUp: <span class="type">Bool</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>code</category>
        <category>swift</category>
      </categories>
      <tags>
        <tag>cs193p</tag>
      </tags>
  </entry>
  <entry>
    <title>Stanford-cs193p-08ï½œAnimation</title>
    <url>/2025/01/20/Stanford-cs193p-08%EF%BD%9CAnimation/</url>
    <content><![CDATA[<p>æœ¬æ–‡æ˜¯æ–¯å¦ç¦å¤§å­¦ cs193p å…¬å¼€è¯¾ç¨‹ç¬¬08é›†çš„ç›¸å…³ç¬”è®°ã€‚</p>
<span id="more"></span>
<p>cs193p è¯¾ç¨‹ä»‹ç»:</p>
<blockquote>
<p> The lectures for the Spring 2023 version of Stanford Universityâ€™s course CS193p (Developing Applications for iOS using SwiftUI) were given in person but, unfortunately, were not video recorded. However, we did capture the laptop screen of the presentations and demos as well as the associated audio. You can watch these screen captures using the links below. Youâ€™ll also find links to supporting material that was distributed to students during the quarter (homework, demo code, etc.). </p>
</blockquote>
<p>cs193p è¯¾ç¨‹ç½‘å€: [<a href="https://cs193p.sites.stanford.edu/2023]">https://cs193p.sites.stanford.edu/2023]</a></p>
<h2 id="1-åŠ¨ç”»çš„åŸºç¡€æ¦‚å¿µ"><a href="#1-åŠ¨ç”»çš„åŸºç¡€æ¦‚å¿µ" class="headerlink" title="1. åŠ¨ç”»çš„åŸºç¡€æ¦‚å¿µ"></a>1. åŠ¨ç”»çš„åŸºç¡€æ¦‚å¿µ</h2><h3 id="1-1-åŠ¨ç”»çš„ä½œç”¨"><a href="#1-1-åŠ¨ç”»çš„ä½œç”¨" class="headerlink" title="1.1 åŠ¨ç”»çš„ä½œç”¨"></a>1.1 åŠ¨ç”»çš„ä½œç”¨</h3><ul>
<li>åŠ¨ç”»å±•ç¤ºäº†å·²ç»å‘ç”Ÿçš„æ”¹å˜ï¼ˆå³â€œæœ€è¿‘çš„è¿‡å»â€ï¼‰ã€‚</li>
<li>åŠ¨ç”»çš„æ ¸å¿ƒæ˜¯é€šè¿‡æ”¹å˜ <strong>è§†å›¾ä¿®é¥°ç¬¦ï¼ˆViewModifiersï¼‰</strong> æˆ– <strong>å½¢çŠ¶ï¼ˆshapesï¼‰</strong> æ¥å‘ˆç°æ•ˆæœã€‚</li>
<li>è§†å›¾çš„å‡ºç°ä¸æ¶ˆå¤±ï¼ˆå­˜åœ¨ä¸å¦ï¼‰ä¹Ÿå¯ä»¥é€šè¿‡åŠ¨ç”»ä½“ç°ã€‚</li>
</ul>
<h3 id="1-2-åŠ¨ç”»çš„å‰ææ¡ä»¶"><a href="#1-2-åŠ¨ç”»çš„å‰ææ¡ä»¶" class="headerlink" title="1.2 åŠ¨ç”»çš„å‰ææ¡ä»¶"></a>1.2 åŠ¨ç”»çš„å‰ææ¡ä»¶</h3><ul>
<li>åŠ¨ç”»ä»…é€‚ç”¨äºå·²ç»åœ¨ç”¨æˆ·ç•Œé¢ä¸­ï¼ˆuiï¼‰çš„è§†å›¾ã€‚</li>
<li>å¦‚æœè§†å›¾æ˜¯æ–°åŠ å…¥çš„ï¼Œå®ƒå¿…é¡»æ·»åŠ åˆ°ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å®¹å™¨ä¸­ï¼ˆå³â€œå·²åœ¨å±å¹•ä¸Šçš„å®¹å™¨â€ï¼Œç®€ç§° ctaaosï¼‰ã€‚</li>
</ul>
<h2 id="2-åŠ¨ç”»çš„å®ç°æ–¹å¼"><a href="#2-åŠ¨ç”»çš„å®ç°æ–¹å¼" class="headerlink" title="2. åŠ¨ç”»çš„å®ç°æ–¹å¼"></a>2. åŠ¨ç”»çš„å®ç°æ–¹å¼</h2><h3 id="2-1-éšå¼åŠ¨ç”»ï¼ˆimplicit-animationï¼‰"><a href="#2-1-éšå¼åŠ¨ç”»ï¼ˆimplicit-animationï¼‰" class="headerlink" title="2.1 éšå¼åŠ¨ç”»ï¼ˆimplicit animationï¼‰"></a>2.1 éšå¼åŠ¨ç”»ï¼ˆimplicit animationï¼‰</h3><ul>
<li>éšå¼åŠ¨ç”»é€šè¿‡ <code>animation</code> ä¿®é¥°ç¬¦è‡ªåŠ¨åº”ç”¨åˆ°è§†å›¾çš„æ›´æ”¹ä¸Šã€‚</li>
<li>ç¤ºä¾‹ï¼š<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">Text</span>(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">    .opacity(isVisible <span class="operator">?</span> <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line">    .animation(.easeInOut, value: isVisible)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>isVisible</code> çš„å˜åŒ–ä¼šè§¦å‘ <code>opacity</code> çš„åŠ¨ç”»ã€‚</li>
<li>é€‚ç”¨äºâ€œå¶å­è§†å›¾â€ï¼ˆç‹¬ç«‹äºå…¶ä»–è§†å›¾å·¥ä½œçš„éå®¹å™¨è§†å›¾ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h3 id="2-2-æ˜¾å¼åŠ¨ç”»ï¼ˆexplicit-animationï¼‰"><a href="#2-2-æ˜¾å¼åŠ¨ç”»ï¼ˆexplicit-animationï¼‰" class="headerlink" title="2.2 æ˜¾å¼åŠ¨ç”»ï¼ˆexplicit animationï¼‰"></a>2.2 æ˜¾å¼åŠ¨ç”»ï¼ˆexplicit animationï¼‰</h3><ul>
<li>æ˜¾å¼åŠ¨ç”»éœ€è¦é€šè¿‡ <code>withAnimation</code> å‡½æ•°æ‰‹åŠ¨è§¦å‘ï¼Œé€‚åˆéœ€è¦åœ¨å¤šä¸ªå±æ€§å˜åŒ–ä¹‹é—´åè°ƒæˆ–ç²¾ç»†å¯æ§åˆ¶åŠ¨ç”»çš„åœºæ™¯</li>
<li>ç¤ºä¾‹ï¼š<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">    </span><br><span class="line"><span class="keyword">import</span> SwiftUI  </span><br><span class="line">   </span><br><span class="line">   <span class="keyword">struct</span> <span class="title class_">ExplicitAnimationExample</span>: <span class="title class_ inherited__">View</span> &#123;  </span><br><span class="line">       <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> rotationAngle <span class="operator">=</span> <span class="number">0.0</span>  </span><br><span class="line">   </span><br><span class="line">       <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;  </span><br><span class="line">           <span class="type">VStack</span> &#123;  </span><br><span class="line">               <span class="type">Image</span>(systemName: <span class="string">&quot;arrow.right.circle.fill&quot;</span>)  </span><br><span class="line">                   .font(.largeTitle)  </span><br><span class="line">                   .rotationEffect(.degrees(rotationAngle)) <span class="comment">// åº”ç”¨æ—‹è½¬æ•ˆæœ  </span></span><br><span class="line">               </span><br><span class="line">               <span class="type">Button</span>(<span class="string">&quot;Rotate&quot;</span>) &#123;  </span><br><span class="line">                   withAnimation(.spring()) &#123; <span class="comment">// æ˜¾å¼è§¦å‘åŠ¨ç”»  </span></span><br><span class="line">                       rotationAngle <span class="operator">+=</span> <span class="number">90</span>  </span><br><span class="line">                   &#125;  </span><br><span class="line">               &#125;  </span><br><span class="line">           &#125;  </span><br><span class="line">           .padding()  </span><br><span class="line">       &#125;  </span><br><span class="line">   &#125;  </span><br><span class="line">   </span><br><span class="line">   <span class="keyword">struct</span> <span class="title class_">ExplicitAnimationExample_PreViews</span>: <span class="title class_ inherited__">PreViewProvider</span> &#123;  </span><br><span class="line">       <span class="keyword">static</span> <span class="keyword">var</span> preViews: <span class="keyword">some</span> <span class="type">View</span> &#123;  </span><br><span class="line">           <span class="type">ExplicitAnimationExample</span>()  </span><br><span class="line">       &#125;  </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ä½¿ç”¨ <code>withAnimation</code> åŒ…è£¹ <code>rotationAngle</code> çš„æ›´æ”¹ï¼Œè§†å›¾çš„æ—‹è½¬ä¼šä»¥åŠ¨ç”»å½¢å¼æ›´æ–°ã€‚</li>
<li>æ˜¾ç¤ºåŠ¨ç”»å¸¸ç”¨äºå¤šä¸ªè§†å›¾åŒæ­¥åŠ¨ç”»ï¼Œä¾‹å¦‚å“åº”ç”¨æˆ·äº¤äº’æ—¶ã€‚</li>
</ul>
</li>
</ul>
<h3 id="2-3-è½¬åœºåŠ¨ç”»ï¼ˆtransitionï¼‰"><a href="#2-3-è½¬åœºåŠ¨ç”»ï¼ˆtransitionï¼‰" class="headerlink" title="2.3 è½¬åœºåŠ¨ç”»ï¼ˆtransitionï¼‰"></a>2.3 è½¬åœºåŠ¨ç”»ï¼ˆtransitionï¼‰</h3><ul>
<li>è½¬åœºåŠ¨ç”»å®šä¹‰è§†å›¾<strong>å‡ºç°ï¼ˆæ’å…¥ï¼‰æˆ–æ¶ˆå¤±</strong>çš„æ–¹å¼ã€‚è¿‡æ¸¡åªåœ¨è§†å›¾æ·»åŠ åˆ°æˆ–ä»è§†å›¾å±‚æ¬¡ç»“æ„ç§»é™¤æ—¶ç”Ÿæ•ˆï¼Œå¸¸ç”¨äºåˆ‡æ¢è§†å›¾æˆ–åŠ¨æ€è§†å›¾æ›´æ–°ã€‚å¿…é¡»é…åˆæ¡ä»¶æ¸²æŸ“ï¼ˆå¦‚ <code>if</code> æˆ– <code>@state</code>ï¼‰ä»¥åŠ <code>.transition</code> ä½¿ç”¨ã€‚</li>
<li>æœ¬è´¨ä¸Šæ˜¯ä¸¤ä¸ªè§†å›¾ä¿®é¥°ç¬¦çš„ç»„åˆï¼š<ul>
<li>ä¸€ä¸ªä¿®é¥°ç¬¦å®šä¹‰è§†å›¾æ’å…¥æ—¶çš„åˆå§‹çŠ¶æ€ã€‚</li>
<li>å¦ä¸€ä¸ªä¿®é¥°ç¬¦å®šä¹‰è§†å›¾ç§»é™¤åçš„æœ€ç»ˆçŠ¶æ€ã€‚</li>
</ul>
</li>
<li>ç¤ºä¾‹ï¼š<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> isfaceup &#123;</span><br><span class="line">    roundedrectangle(cornerradius: <span class="number">10</span>).transition(.scale)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    roundedrectangle(cornerradius: <span class="number">10</span>).transition(.opacity)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å½“ <code>isfaceup</code> å˜åŒ–æ—¶ï¼Œè§†å›¾ä¼šæŒ‰å®šä¹‰çš„æ–¹å¼å‡ºç°æˆ–æ¶ˆå¤±ã€‚</li>
<li><strong>åŠ¨ç”»ç»†èŠ‚è®¾ç½®ï¼š</strong><ul>
<li>ä½¿ç”¨ <code>anytransition</code> æä¾›åŠ¨ç”»å‚æ•°ï¼Œä¾‹å¦‚ï¼š<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">.transition(anytransition.opacity.animation(.easeInOut))</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-4-åŠ¨ç”»æ›²çº¿ï¼ˆanimation-curveï¼‰"><a href="#2-4-åŠ¨ç”»æ›²çº¿ï¼ˆanimation-curveï¼‰" class="headerlink" title="2.4 åŠ¨ç”»æ›²çº¿ï¼ˆanimation curveï¼‰"></a>2.4 åŠ¨ç”»æ›²çº¿ï¼ˆanimation curveï¼‰</h3><h2 id="åŠ¨ç”»æ›²çº¿å†³å®šåŠ¨ç”»çš„æ’­æ”¾èŠ‚å¥ï¼š-linear-ï¼šåŒ€é€ŸåŠ¨ç”»ã€‚"><a href="#åŠ¨ç”»æ›²çº¿å†³å®šåŠ¨ç”»çš„æ’­æ”¾èŠ‚å¥ï¼š-linear-ï¼šåŒ€é€ŸåŠ¨ç”»ã€‚" class="headerlink" title="åŠ¨ç”»æ›²çº¿å†³å®šåŠ¨ç”»çš„æ’­æ”¾èŠ‚å¥ï¼š- **linear**ï¼šåŒ€é€ŸåŠ¨ç”»ã€‚"></a>åŠ¨ç”»æ›²çº¿å†³å®šåŠ¨ç”»çš„æ’­æ”¾èŠ‚å¥ï¼š<br>- **<code>linear</code>**ï¼šåŒ€é€ŸåŠ¨ç”»ã€‚</h2><p>&#96;**ï¼šç¼“æ…¢å¼€å§‹å’Œç»“æŸï¼Œä¸­é—´åŠ é€Ÿã€‚</p>
<ul>
<li>**<code>spring</code>**ï¼šå¸¦å¼¹æ€§æ•ˆæœçš„åŠ¨ç”»ï¼Œç»“å°¾ä¼šæœ‰â€œåå¼¹â€æ•ˆæœã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">Text</span>(<span class="string">&quot;hello, animation!&quot;</span>)</span><br><span class="line">    .scaleeffect(scale)</span><br><span class="line">    .animation(.spring(response: <span class="number">0.5</span>, dampingFraction: <span class="number">0.7</span>), value: scale)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-5-åŒºåˆ«å¯¹æ¯”ï¼šéšå¼åŠ¨ç”»ã€æ˜¾ç¤ºåŠ¨ç”»ã€è¿‡æ¸¡"><a href="#2-5-åŒºåˆ«å¯¹æ¯”ï¼šéšå¼åŠ¨ç”»ã€æ˜¾ç¤ºåŠ¨ç”»ã€è¿‡æ¸¡" class="headerlink" title="2.5 åŒºåˆ«å¯¹æ¯”ï¼šéšå¼åŠ¨ç”»ã€æ˜¾ç¤ºåŠ¨ç”»ã€è¿‡æ¸¡"></a>2.5 åŒºåˆ«å¯¹æ¯”ï¼šéšå¼åŠ¨ç”»ã€æ˜¾ç¤ºåŠ¨ç”»ã€è¿‡æ¸¡</h3><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th><strong>éšå¼åŠ¨ç”»</strong></th>
<th><strong>æ˜¾å¼åŠ¨ç”»</strong></th>
<th><strong>è¿‡æ¸¡ï¼ˆtransitionï¼‰</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>è§¦å‘æ–¹å¼</strong></td>
<td>ä½¿ç”¨ <code>.animation()</code> ä¿®é¥°ç¬¦ç»‘å®šå±æ€§å˜åŒ–</td>
<td>ä½¿ç”¨ <code>withAnimation()</code> åŒ…è£¹çŠ¶æ€æ›´æ”¹</td>
<td>é…åˆ <code>if</code> æˆ–æ¡ä»¶æ¸²æŸ“ï¼Œä½¿ç”¨ <code>.transition()</code> å®šä¹‰</td>
</tr>
<tr>
<td><strong>é€‚ç”¨åœºæ™¯</strong></td>
<td>å±æ€§çš„å€¼éšçŠ¶æ€å˜åŒ–è‡ªåŠ¨åº”ç”¨åŠ¨ç”»</td>
<td>éœ€è¦æ‰‹åŠ¨è§¦å‘åŠ¨ç”»æˆ–åè°ƒå¤šä¸ªåŠ¨ç”»æ—¶</td>
<td>è§†å›¾æ’å…¥æˆ–ç§»é™¤æ—¶åº”ç”¨åŠ¨ç”»</td>
</tr>
<tr>
<td><strong>æ§åˆ¶åŠ›åº¦</strong></td>
<td>ç®€å•ç»‘å®šï¼Œé€‚åˆå•ä¸ªå±æ€§å˜åŒ–</td>
<td>æ›´çµæ´»ï¼Œå¯ç²¾ç¡®æ§åˆ¶åŠ¨ç”»çš„æ‰§è¡Œ</td>
<td>ä¸“æ³¨äºè§†å›¾çš„å‡ºç°å’Œæ¶ˆå¤±</td>
</tr>
<tr>
<td><strong>æ˜¯å¦ç»‘å®šçŠ¶æ€</strong></td>
<td>æ˜¯</td>
<td>æ˜¯</td>
<td>æ˜¯ï¼ˆé’ˆå¯¹è§†å›¾çš„æ’å…¥å’Œç§»é™¤ï¼‰</td>
</tr>
<tr>
<td><strong>ç¤ºä¾‹</strong></td>
<td><code>.animation(.easeInOut(duration: 1))</code></td>
<td><code>withAnimation(.spring()) &#123; state.toggle() &#125;</code></td>
<td><code>.transition(.opacity)</code></td>
</tr>
</tbody></table>
<p><strong>ç¤ºä¾‹ï¼šéšå¼åŠ¨ç”»ã€æ˜¾å¼åŠ¨ç”»å’Œè¿‡æ¸¡çš„ç»“åˆ</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI  </span><br><span class="line">   </span><br><span class="line">   <span class="keyword">struct</span> <span class="title class_">CombinedAnimationExample</span>: <span class="title class_ inherited__">View</span> &#123;  </span><br><span class="line">       <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> showRectangle <span class="operator">=</span> <span class="literal">false</span>  </span><br><span class="line">       <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> rotationAngle <span class="operator">=</span> <span class="number">0.0</span>  </span><br><span class="line">   </span><br><span class="line">       <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;  </span><br><span class="line">           <span class="type">VStack</span> &#123;  </span><br><span class="line">               <span class="keyword">if</span> showRectangle &#123;  </span><br><span class="line">                   <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">25</span>)  </span><br><span class="line">                       .fill(<span class="type">Color</span>.blue)  </span><br><span class="line">                       .frame(width: <span class="number">200</span>, height: <span class="number">200</span>)  </span><br><span class="line">                       .rotationEffect(.degrees(rotationAngle)) <span class="comment">// åŠ¨æ€æ—‹è½¬  </span></span><br><span class="line">                       .transition(.slide) <span class="comment">// å®šä¹‰è¿‡æ¸¡æ•ˆæœ  </span></span><br><span class="line">                       .animation(.easeInOut(duration: <span class="number">1</span>), value: rotationAngle) <span class="comment">// éšå¼åŠ¨ç”»  </span></span><br><span class="line">               &#125;  </span><br><span class="line">   </span><br><span class="line">               <span class="type">Button</span>(<span class="string">&quot;Toggle Rectangle&quot;</span>) &#123;  </span><br><span class="line">                   withAnimation(.easeInOut) &#123; <span class="comment">// æ˜¾å¼è§¦å‘åŠ¨ç”»  </span></span><br><span class="line">                       showRectangle.toggle()  </span><br><span class="line">                       rotationAngle <span class="operator">+=</span> <span class="number">180</span> <span class="comment">// åŠ¨æ€æ—‹è½¬  </span></span><br><span class="line">                   &#125;  </span><br><span class="line">               &#125;  </span><br><span class="line">           &#125;  </span><br><span class="line">           .padding()  </span><br><span class="line">       &#125;  </span><br><span class="line">   &#125;  </span><br><span class="line">   </span><br><span class="line">   <span class="keyword">struct</span> <span class="title class_">CombinedAnimationExample_PreViews</span>: <span class="title class_ inherited__">PreViewProvider</span> &#123;  </span><br><span class="line">       <span class="keyword">static</span> <span class="keyword">var</span> preViews: <span class="keyword">some</span> <span class="type">View</span> &#123;  </span><br><span class="line">           <span class="type">CombinedAnimationExample</span>()  </span><br><span class="line">       &#125;  </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>éšå¼åŠ¨ç”»</strong>ï¼š<code>animation</code> ä¿®é¥°ç¬¦ç»‘å®š <code>rotationAngle</code>ï¼ŒåŠ¨æ€æ—‹è½¬æ—¶ä½¿ç”¨å¹³æ»‘åŠ¨ç”»ã€‚</li>
<li><strong>æ˜¾å¼åŠ¨ç”»</strong>ï¼š<code>withAnimation</code> æ§åˆ¶è§†å›¾çš„æ’å…¥å’Œç§»é™¤ã€‚</li>
<li><strong>è¿‡æ¸¡</strong>ï¼š<code>.transition(.slide)</code>ï¼Œå®šä¹‰è§†å›¾æ’å…¥æˆ–ç§»é™¤æ—¶çš„æ»‘åŠ¨æ•ˆæœã€‚</li>
</ul>
<h2 id="3-åŠ¨ç”»çš„é«˜çº§ä¸»é¢˜"><a href="#3-åŠ¨ç”»çš„é«˜çº§ä¸»é¢˜" class="headerlink" title="3. åŠ¨ç”»çš„é«˜çº§ä¸»é¢˜"></a>3. åŠ¨ç”»çš„é«˜çº§ä¸»é¢˜</h2><h3 id="3-1-åŒ¹é…å‡ ä½•æ•ˆæœï¼ˆmatched-geometry-effectï¼‰"><a href="#3-1-åŒ¹é…å‡ ä½•æ•ˆæœï¼ˆmatched-geometry-effectï¼‰" class="headerlink" title="3.1 åŒ¹é…å‡ ä½•æ•ˆæœï¼ˆmatched geometry effectï¼‰"></a>3.1 åŒ¹é…å‡ ä½•æ•ˆæœï¼ˆmatched geometry effectï¼‰</h3><p><strong>å®šä¹‰</strong><br><code>matchedGeometryEffect</code> æ˜¯ä¸€ç§åŠ¨ç”»å·¥å…·ï¼Œç”¨äºåœ¨è§†å›¾é—´åˆ‡æ¢æ—¶åˆ›å»ºæµç•…çš„åŠ¨ç”»è¿‡æ¸¡æ•ˆæœã€‚å®ƒå¯ä»¥å°†ä¸¤ä¸ªè§†å›¾å…³è”èµ·æ¥ï¼Œswiftui ä¼šè‡ªåŠ¨ä¸ºå®ƒä»¬åœ¨å‡ ä½•ç©ºé—´ä¸Šçš„å˜åŒ–æ·»åŠ åŠ¨ç”»æ•ˆæœã€‚</p>
<p><strong>ç‰¹ç‚¹</strong></p>
<ul>
<li>é€šè¿‡åœ¨ä¸¤ä¸ªè§†å›¾ä¹‹é—´å…±äº«ä¸€ä¸ªå”¯ä¸€çš„ <code>namespace</code> æ ‡è¯†ï¼Œswiftui çŸ¥é“å®ƒä»¬æ˜¯åŒä¸€ä¸ªå…ƒç´ åœ¨ä¸åŒçŠ¶æ€ä¸‹çš„è¡¨ç¤ºã€‚</li>
<li>æ”¯æŒä½ç½®ã€å¤§å°ã€å½¢çŠ¶å’Œæ ·å¼ç­‰å‡ ä½•å±æ€§çš„åŠ¨ç”»ã€‚</li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯</strong></p>
<ul>
<li>åŠ¨æ€åˆ‡æ¢è§†å›¾æˆ–å¸ƒå±€ã€‚</li>
<li>åˆ›å»ºå¤æ‚çš„è¿‡æ¸¡åŠ¨ç”»ï¼Œä¾‹å¦‚ä»ç½‘æ ¼åˆ°è¯¦ç»†è§†å›¾çš„åˆ‡æ¢ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šç®€å•åº”ç”¨</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  matchegeometryexample.swift</span></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MatchedGeometryExample</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="meta">@Namespace</span> <span class="keyword">private</span> <span class="keyword">var</span> animationnamespace <span class="comment">// åˆ›å»º namespace</span></span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> isExpanded <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> isExpanded &#123;</span><br><span class="line">                <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">25</span>)</span><br><span class="line">                    .fill(<span class="type">Color</span>.blue)</span><br><span class="line">                    .matchedGeometryEffect(id: <span class="string">&quot;rectangle&quot;</span>, in: animationnamespace)</span><br><span class="line">                    .frame(width: <span class="number">300</span>, height: <span class="number">200</span>)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">25</span>)</span><br><span class="line">                    .fill(<span class="type">Color</span>.blue)</span><br><span class="line">                    .matchedGeometryEffect(id: <span class="string">&quot;rectangle&quot;</span>, in: animationnamespace)</span><br><span class="line">                    .frame(width: <span class="number">100</span>, height: <span class="number">100</span>)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">Button</span>(<span class="string">&quot;toggle&quot;</span>) &#123;</span><br><span class="line">                withAnimation(.easeInOut) &#123;</span><br><span class="line">                    isExpanded.toggle()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#<span class="type">PreView</span> &#123;</span><br><span class="line">    <span class="type">MatchedGeometryExample</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>**<code>@namespace</code>**ï¼šåˆ›å»ºä¸€ä¸ªåŠ¨ç”»èŒƒå›´ï¼ˆ<code>namespace</code>ï¼‰ã€‚</li>
<li>**<code>matchedGeometryEffect</code>**ï¼šå°†ä¸¤ä¸ªè§†å›¾ç»‘å®šåˆ°åŒä¸€ä¸ª <code>id</code> å’Œ <code>namespace</code>ï¼Œswiftui ä¼šåœ¨å®ƒä»¬ä¹‹é—´è‡ªåŠ¨æ’å…¥åŠ¨ç”»è¿‡æ¸¡ã€‚</li>
<li><strong>æ•ˆæœ</strong>ï¼šç‚¹å‡»æŒ‰é’®åï¼ŒçŸ©å½¢åœ¨å¤§å°å’Œä½ç½®ä¹‹é—´å¹³æ»‘è¿‡æ¸¡ã€‚</li>
</ul>
<h3 id="3-2-onappear"><a href="#3-2-onappear" class="headerlink" title="3.2 onappear"></a>3.2 onappear</h3><p><strong>å®šä¹‰</strong><br><code>onAppear</code> æ˜¯ä¸€ä¸ª swiftui çš„è§†å›¾ä¿®é¥°ç¬¦ï¼Œç”¨äºåœ¨è§†å›¾ç¬¬ä¸€æ¬¡å‡ºç°æ—¶è§¦å‘ç‰¹å®šçš„æ“ä½œã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>é€‚ç”¨äºåŠ è½½æ•°æ®ã€åˆå§‹åŒ–çŠ¶æ€æˆ–å¯åŠ¨åŠ¨ç”»ã€‚</li>
<li>æ¯å½“è§†å›¾è¿›å…¥å±å¹•æ—¶éƒ½ä¼šè§¦å‘ï¼ŒåŒ…æ‹¬é¦–æ¬¡åŠ è½½å’Œè¢«éšè—è§†å›¾é‡æ–°æ˜¾ç¤ºã€‚</li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯</strong></p>
<ul>
<li>è§†å›¾åˆå§‹åŒ–é€»è¾‘ï¼Œä¾‹å¦‚ä»ç½‘ç»œåŠ è½½æ•°æ®ã€‚</li>
<li>åœ¨è§†å›¾å‡ºç°æ—¶å¼€å§‹åŠ¨ç”»ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šåŠ è½½æ•°æ®</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">onappearexample</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="meta">@state</span> <span class="keyword">private</span> <span class="keyword">var</span> message <span class="operator">=</span> <span class="string">&quot;loading...&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(message)</span><br><span class="line">            .onappear &#123;</span><br><span class="line">                <span class="comment">// æ¨¡æ‹Ÿæ•°æ®åŠ è½½</span></span><br><span class="line">                dispatchqueue.main.asyncafter(deadline: .now() <span class="operator">+</span> <span class="number">2</span>) &#123;</span><br><span class="line">                    message <span class="operator">=</span> <span class="string">&quot;data loaded!&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>**<code>onappear</code>**ï¼šåœ¨è§†å›¾ç¬¬ä¸€æ¬¡å‡ºç°åœ¨å±å¹•ä¸Šæ—¶è§¦å‘ï¼Œæ›´æ–° <code>message</code>ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šå¯åŠ¨åŠ¨ç”»</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI  </span><br><span class="line">   </span><br><span class="line">   <span class="keyword">struct</span> <span class="title class_">AnimationOnAppear</span>: <span class="title class_ inherited__">View</span> &#123;  </span><br><span class="line">       <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> scale <span class="operator">=</span> <span class="number">0.5</span>  </span><br><span class="line">   </span><br><span class="line">       <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;  </span><br><span class="line">           <span class="type">Circle</span>()  </span><br><span class="line">               .frame(width: <span class="number">100</span>, height: <span class="number">100</span>)  </span><br><span class="line">               .scaleEffect(scale)  </span><br><span class="line">               .onAppear &#123;  </span><br><span class="line">                   withAnimation(.spring()) &#123;  </span><br><span class="line">                       scale <span class="operator">=</span> <span class="number">1.0</span>  </span><br><span class="line">                   &#125;  </span><br><span class="line">               &#125;  </span><br><span class="line">       &#125;  </span><br><span class="line">   &#125;  </span><br><span class="line">   </span><br><span class="line">   <span class="keyword">struct</span> <span class="title class_">AnimationOnAppear_PreViews</span>: <span class="title class_ inherited__">PreViewProvider</span> &#123;  </span><br><span class="line">       <span class="keyword">static</span> <span class="keyword">var</span> preViews: <span class="keyword">some</span> <span class="type">View</span> &#123;  </span><br><span class="line">           <span class="type">AnimationOnAppear</span>()  </span><br><span class="line">       &#125;  </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>æ•ˆæœ</strong>ï¼šåœ†å½¢ä»ç¼©å°çŠ¶æ€å¹³æ»‘æ‰©å±•åˆ°åŸå§‹å¤§å°ã€‚</li>
</ul>
<h3 id="3-3-animatable-åè®®"><a href="#3-3-animatable-åè®®" class="headerlink" title="3.3 animatable åè®®"></a>3.3 animatable åè®®</h3><p><strong>å®šä¹‰</strong><br><code>animatable</code> åè®®æ˜¯ swiftui çš„ä¸€ä¸ªåè®®ï¼Œç”¨äºåˆ›å»ºè‡ªå®šä¹‰åŠ¨ç”»ã€‚ç¬¦åˆ <code>animatable</code> çš„ç±»å‹éœ€è¦å®šä¹‰ä¸€ä¸ª <code>animatableData</code> å±æ€§ï¼Œè¯¥å±æ€§ä¼šåœ¨åŠ¨ç”»è¿‡ç¨‹ä¸­è‡ªåŠ¨æ›´æ–°ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> animatableData: type</span><br></pre></td></tr></table></figure>
<p><code>type</code> å¿…é¡»å®ç° <code>vectorarithmetic</code> åè®®ï¼Œç”¨äºåˆ†å‰²åŠ¨ç”»è·¯å¾„ã€‚</p>
<p><strong>ç‰¹ç‚¹</strong></p>
<ul>
<li>é€‚åˆéœ€è¦å¯¹è‡ªå®šä¹‰å±æ€§è¿›è¡ŒåŠ¨ç”»çš„åœºæ™¯ã€‚</li>
<li>é€šè¿‡ <code>animatabledata</code> å±æ€§æ’å…¥åŠ¨ç”»çš„æ’å€¼é€»è¾‘ã€‚</li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯</strong></p>
<ul>
<li>åˆ›å»ºå¤æ‚çš„åŠ¨ç”»æ•ˆæœï¼Œä¾‹å¦‚è·¯å¾„å˜æ¢ã€é¢œè‰²æ¸å˜ç­‰ã€‚</li>
<li>å¯¹ä¸ç›´æ¥æ”¯æŒåŠ¨ç”»çš„å±æ€§ï¼ˆå¦‚è‡ªå®šä¹‰ç»˜å›¾ï¼‰æ·»åŠ åŠ¨ç”»ã€‚</li>
</ul>
<h4 id="3-3-1-animatabledate-åŠ¨ç”»æ•°æ®çš„è¯»å†™"><a href="#3-3-1-animatabledate-åŠ¨ç”»æ•°æ®çš„è¯»å†™" class="headerlink" title="3.3.1 animatabledate åŠ¨ç”»æ•°æ®çš„è¯»å†™"></a>3.3.1 animatabledate åŠ¨ç”»æ•°æ®çš„è¯»å†™</h4><ul>
<li><code>animatableData</code> æ˜¯ä¸€ä¸ª<strong>è¯»å†™å±æ€§</strong>ï¼š<ul>
<li><strong>å†™æ“ä½œï¼š</strong> åŠ¨ç”»ç³»ç»Ÿå‘Šè¯‰ <code>shape</code> æˆ– <code>ViewModifier</code> åº”è¯¥ç»˜åˆ¶çš„å½“å‰åŠ¨ç”»å¸§ã€‚</li>
<li><strong>è¯»æ“ä½œï¼š</strong> åŠ¨ç”»ç³»ç»Ÿè·å–åŠ¨ç”»çš„èµ·ç‚¹å’Œç»ˆç‚¹å€¼ã€‚</li>
</ul>
</li>
<li>ç¤ºä¾‹ï¼š<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Cardify</span>: <span class="title class_ inherited__">ViewModifier</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> rotation: <span class="type">Double</span></span><br><span class="line">    <span class="keyword">var</span> animatableData: <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; rotation &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123; rotation <span class="operator">=</span> newvalue &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">body</span>(<span class="params">content</span>: content) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="comment">// æ ¹æ® rotation å€¼ç»˜åˆ¶è§†å›¾</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="3-3-2-ç¤ºä¾‹ï¼šè·¯å¾„å˜æ¢åŠ¨ç”»"><a href="#3-3-2-ç¤ºä¾‹ï¼šè·¯å¾„å˜æ¢åŠ¨ç”»" class="headerlink" title="3.3.2 ç¤ºä¾‹ï¼šè·¯å¾„å˜æ¢åŠ¨ç”»"></a>3.3.2 ç¤ºä¾‹ï¼šè·¯å¾„å˜æ¢åŠ¨ç”»</h4><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI  </span><br><span class="line">   </span><br><span class="line">   <span class="keyword">struct</span> <span class="title class_">AnimatableShape</span>: <span class="title class_ inherited__">Shape</span> &#123;  </span><br><span class="line">       <span class="keyword">var</span> animatableData: <span class="type">CGFloat</span> <span class="comment">// å®šä¹‰å¯åŠ¨ç”»æ•°æ®  </span></span><br><span class="line">   </span><br><span class="line">       <span class="keyword">func</span> <span class="title function_">path</span>(<span class="params">in</span> <span class="params">rect</span>: <span class="type">CGRect</span>) -&gt; <span class="type">Path</span> &#123;  </span><br><span class="line">           <span class="keyword">var</span> path <span class="operator">=</span> <span class="type">Path</span>()  </span><br><span class="line">           path.move(to: <span class="type">CGPoint</span>(x: rect.midX, y: rect.minY))  </span><br><span class="line">           path.addLine(to: <span class="type">CGPoint</span>(x: rect.maxX, y: rect.maxY))  </span><br><span class="line">           path.addLine(to: <span class="type">CGPoint</span>(x: rect.minX, y: rect.maxY))  </span><br><span class="line">           path.closeSubpath()  </span><br><span class="line">           <span class="keyword">return</span> path  </span><br><span class="line">       &#125;  </span><br><span class="line">   &#125;  </span><br><span class="line">   </span><br><span class="line">   <span class="keyword">struct</span> <span class="title class_">AnimatableExample</span>: <span class="title class_ inherited__">View</span> &#123;  </span><br><span class="line">       <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> value: <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">0.0</span>  </span><br><span class="line">   </span><br><span class="line">       <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;  </span><br><span class="line">           <span class="type">AnimatableShape</span>(animatableData: value)  </span><br><span class="line">               .fill(<span class="type">Color</span>.blue)  </span><br><span class="line">               .frame(width: <span class="number">200</span>, height: <span class="number">200</span>)  </span><br><span class="line">               .onAppear &#123;  </span><br><span class="line">                   withAnimation(.easeInOut(duration: <span class="number">2</span>)) &#123;  </span><br><span class="line">                       value <span class="operator">=</span> <span class="number">1.0</span> <span class="comment">// è§¦å‘åŠ¨ç”»  </span></span><br><span class="line">                   &#125;  </span><br><span class="line">               &#125;  </span><br><span class="line">       &#125;  </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>**<code>animatabledata</code>**ï¼šå®šä¹‰å¯åŠ¨ç”»çš„å±æ€§ï¼Œåœ¨åŠ¨ç”»è¿‡ç¨‹ä¸­æ’å€¼å˜åŒ–ã€‚</li>
<li><strong>æ•ˆæœ</strong>ï¼š<code>animatableshape</code> ä¼šæ ¹æ®åŠ¨ç”»æ•°æ®çš„å˜åŒ–åŠ¨æ€æ›´æ–°å…¶è·¯å¾„ã€‚</li>
</ul>
<h3 id="3-4-ç¤ºä¾‹ï¼šç»¼åˆä½¿ç”¨-matchedGeometryEffect-å’Œ-animatable"><a href="#3-4-ç¤ºä¾‹ï¼šç»¼åˆä½¿ç”¨-matchedGeometryEffect-å’Œ-animatable" class="headerlink" title="3.4 ç¤ºä¾‹ï¼šç»¼åˆä½¿ç”¨ matchedGeometryEffect å’Œ animatable"></a>3.4 ç¤ºä¾‹ï¼šç»¼åˆä½¿ç”¨ matchedGeometryEffect å’Œ animatable</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI  </span><br><span class="line">   </span><br><span class="line">   <span class="keyword">struct</span> <span class="title class_">CombinedExample</span>: <span class="title class_ inherited__">View</span> &#123;  </span><br><span class="line">       <span class="meta">@Namespace</span> <span class="keyword">private</span> <span class="keyword">var</span> namespace  </span><br><span class="line">       <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> isExpanded <span class="operator">=</span> <span class="literal">false</span>  </span><br><span class="line">       <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> customValue: <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">0.5</span>  </span><br><span class="line">   </span><br><span class="line">       <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;  </span><br><span class="line">           <span class="type">VStack</span> &#123;  </span><br><span class="line">               <span class="keyword">if</span> isExpanded &#123;  </span><br><span class="line">                   <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">25</span>)  </span><br><span class="line">                       .fill(<span class="type">Color</span>.blue)  </span><br><span class="line">                       .matchedGeometryEffect(id: <span class="string">&quot;rectangle&quot;</span>, in: namespace)  </span><br><span class="line">                       .frame(width: <span class="number">300</span>, height: <span class="number">200</span>)  </span><br><span class="line">               &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">                   <span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">25</span>)  </span><br><span class="line">                       .fill(<span class="type">Color</span>.blue)  </span><br><span class="line">                       .matchedGeometryEffect(id: <span class="string">&quot;rectangle&quot;</span>, in: namespace)  </span><br><span class="line">                       .frame(width: <span class="number">100</span>, height: <span class="number">100</span>)  </span><br><span class="line">               &#125;  </span><br><span class="line">   </span><br><span class="line">               <span class="type">Slider</span>(value: <span class="variable">$customValue</span>)  </span><br><span class="line">                   .padding()  </span><br><span class="line">                   .onAppear &#123;  </span><br><span class="line">                       withAnimation(.easeInOut) &#123;  </span><br><span class="line">                           customValue <span class="operator">=</span> <span class="number">1.0</span>  </span><br><span class="line">                       &#125;  </span><br><span class="line">                   &#125;  </span><br><span class="line">   </span><br><span class="line">               <span class="type">Button</span>(<span class="string">&quot;Toggle&quot;</span>) &#123;  </span><br><span class="line">                   withAnimation(.spring()) &#123;  </span><br><span class="line">                       isExpanded.toggle()  </span><br><span class="line">                   &#125;  </span><br><span class="line">               &#125;  </span><br><span class="line">           &#125;  </span><br><span class="line">           .padding()  </span><br><span class="line">       &#125;  </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>-<br>ï¼šç”¨äºçŸ©å½¢çš„å¤§å°å’Œä½ç½®åŠ¨ç”»ã€‚</p>
<ul>
<li><strong>onAppear</strong>ï¼šåœ¨è§†å›¾é¦–æ¬¡åŠ è½½æ—¶è§¦å‘æ»‘å—çš„åŠ¨ç”»ã€‚</li>
<li><strong>animatable</strong>ï¼šé€šè¿‡æ»‘å—è°ƒæ•´è‡ªå®šä¹‰åŠ¨ç”»å±æ€§ï¼ˆå¦‚è·¯å¾„ï¼‰ã€‚</li>
</ul>
<h3 id="4-demo"><a href="#4-demo" class="headerlink" title="4. demo"></a>4. demo</h3><h4 id="4-1-æ˜¾å¼åŠ¨ç”»ï¼ˆshuffle-and-choosing-cardsï¼‰"><a href="#4-1-æ˜¾å¼åŠ¨ç”»ï¼ˆshuffle-and-choosing-cardsï¼‰" class="headerlink" title="4.1 æ˜¾å¼åŠ¨ç”»ï¼ˆshuffle and choosing cardsï¼‰"></a>4.1 æ˜¾å¼åŠ¨ç”»ï¼ˆshuffle and choosing cardsï¼‰</h4><p><strong>shuffle cards</strong></p>
<p>shuffle åŠ¨ç”»ç”¨äºå“åº”ç”¨æˆ·äº¤äº’ï¼Œæ­¤æ—¶æ›´é€‚åˆä½¿ç”¨æ˜¾ç¤ºåŠ¨ç”»ï¼ˆ<br>ï¼‰ã€‚å¦‚æœä½¿ç”¨éšå¼åŠ¨ç”»ï¼Œå½“ç”¨æˆ·é¢‘ç¹ç‚¹å‡» <code>shuffle</code> æ—¶ï¼ŒåŠ¨ç”»æœ‰æ—¶éš¾ä»¥åŠæ—¶å“åº”ã€‚</p>
<p>shuffle æ—¶å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–ï¼Ÿå®ƒå¯¹ <code>LazyVGrid</code> è§†å›¾ä¸­çš„ <code>ForEach</code> ä¸­<br>s&#96; çš„ä½ç½®å‚æ•°è¿›è¡Œäº†é‡æ’åºã€‚</p>
<p><strong>choose cards</strong></p>
<p>choose card çš„åŠ¨ç”»åŒæ ·ç”¨äºå“åº”ç”¨æˆ·äº¤äº’ï¼Œé€‚åˆä½¿ç”¨æ˜¾ç¤ºåŠ¨ç”»ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// EmojiMemoryGameView.swift  </span></span><br><span class="line">   </span><br><span class="line">   <span class="keyword">import</span> SwiftUI  </span><br><span class="line">   </span><br><span class="line">   <span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>: <span class="title class_ inherited__">View</span> &#123;  </span><br><span class="line">       <span class="comment">// ...  </span></span><br><span class="line">   </span><br><span class="line">       <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;  </span><br><span class="line">           <span class="type">VStack</span> &#123;  </span><br><span class="line">               cards  </span><br><span class="line">                   .foregroundColor(<span class="type">ViewModel</span>.color)  </span><br><span class="line">               <span class="type">Button</span>(<span class="string">&quot;Shuffle&quot;</span>) &#123;  </span><br><span class="line">                   <span class="comment">// ä½¿ç”¨æ˜¾å¼åŠ¨ç”»æ¥å¤„ç†ç”¨æˆ·äº¤äº’ï¼šshuffle  </span></span><br><span class="line">                   withAnimation &#123;  </span><br><span class="line">                       <span class="type">ViewModel</span>.shuffle()  </span><br><span class="line">                   &#125;  </span><br><span class="line">               &#125;  </span><br><span class="line">           &#125;  </span><br><span class="line">           .padding()  </span><br><span class="line">       &#125;  </span><br><span class="line">   </span><br><span class="line">       <span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;  </span><br><span class="line">           <span class="type">AspectVGrid</span>(items: <span class="type">ViewModel</span>.cards, aspectRatio: aspectRatio) &#123; card <span class="keyword">in</span>  </span><br><span class="line">               <span class="type">CardView</span>(card)  </span><br><span class="line">                   .aspectRatio(aspectRatio, contentMode: .fit)  </span><br><span class="line">                   .padding(<span class="number">8</span>)  </span><br><span class="line">                   .overlay(<span class="type">FlyingNumber</span>(number: scoreChange(causedBy: card)))  </span><br><span class="line">                   .onTapGesture &#123;  </span><br><span class="line">                       <span class="comment">// ä½¿ç”¨æ˜¾å¼åŠ¨ç”»å¤„ç†ç”¨æˆ·äº¤äº’ï¼šchoose  </span></span><br><span class="line">                       withAnimation &#123;  </span><br><span class="line">                           <span class="type">ViewModel</span>.choose(card)  </span><br><span class="line">                       &#125;  </span><br><span class="line">                   &#125;  </span><br><span class="line">           &#125;  </span><br><span class="line">       &#125;  </span><br><span class="line">   &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>
<h4 id="4-2-éšå¼åŠ¨ç”»ï¼ˆcelebrating-a-match-ï¼‰"><a href="#4-2-éšå¼åŠ¨ç”»ï¼ˆcelebrating-a-match-ï¼‰" class="headerlink" title="4.2 éšå¼åŠ¨ç”»ï¼ˆcelebrating a match!ï¼‰"></a>4.2 éšå¼åŠ¨ç”»ï¼ˆcelebrating a match!ï¼‰</h4><p>å½“å¡ç‰‡æœä¸Šæ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›ç»™å¡ç‰‡è®¾ç½®ä¸€ä¸ªåº†ç¥åŠ¨ä½œã€‚ï¼ˆä¸è®ºç”¨æˆ·æ˜¯å¦ç‚¹å‡»è¯¥å¡ç‰‡ï¼Œå½“å¡ç‰‡ <code>isMatched</code> å‚æ•°ä¸º <code>true</code> æ—¶ï¼Œæ˜¾ç¤ºåŠ¨ç”»ï¼Œä¸ç”¨æˆ·äº¤äº’æ— å…³ï¼Œshuffle ä¸ä¼šå½±å“è¯¥åŠ¨ç”»ï¼‰</p>
<p>æˆ‘ä»¬å¸Œæœ›ç®€åŒ–åŠ¨ç”»çš„ä»£ç ï¼Œä¸º <code>animation</code> æ·»åŠ ä¸€ä¸ªæ‰©å±• <code>spin</code> åŠ¨ç”»ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  cardView.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> SwiftUI  </span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;  </span><br><span class="line">    <span class="comment">// ...  </span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;  </span><br><span class="line">        <span class="type">Pie</span>(endAngle: .degrees(<span class="number">240</span>))  </span><br><span class="line">            .opacity(<span class="type">Constants</span>.pie.opacity)  </span><br><span class="line">            .overlay(  </span><br><span class="line">                <span class="type">Text</span>(card.content)  </span><br><span class="line">                    .font(.system(size: <span class="type">Constants</span>.fontSize.largest))  </span><br><span class="line">                    .minimumScaleFactor(<span class="type">Constants</span>.fontSize.scaleFactor)  </span><br><span class="line">                    .multilineTextAlignment(.center)  </span><br><span class="line">                    .aspectRatio(<span class="number">1</span>, contentMode: .fit)  </span><br><span class="line">                    .padding(<span class="type">Constants</span>.pie.in<span class="keyword">set</span>)  </span><br><span class="line">                    .rotationEffect(.degrees(card.isMatched <span class="operator">?</span> <span class="number">360</span> : <span class="number">0</span>))  </span><br><span class="line">                    .animation(.spin(duration: <span class="number">1</span>), value: card.isMatched)  </span><br><span class="line">            )  </span><br><span class="line">            <span class="comment">// ...  </span></span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="comment">// ...  </span></span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">Animation</span> &#123;  </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">spin</span>(<span class="params">duration</span>: <span class="type">TimeInterval</span>) -&gt; <span class="type">Animation</span> &#123;  </span><br><span class="line">        .linear(duration: duration).repeatForever(autoreverses: <span class="literal">false</span>)  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>
<h4 id="4-3-animate-Viewmodifier-flipping-the-cards-over"><a href="#4-3-animate-Viewmodifier-flipping-the-cards-over" class="headerlink" title="4.3 animate Viewmodifier (flipping the cards over)"></a>4.3 animate Viewmodifier (flipping the cards over)</h4><p>æˆ‘ä»¬æƒ³è¦ä¸ºå¡ç‰‡æ·»åŠ ä¸€ä¸ªç¿»è½¬åŠ¨ç”»ï¼Œæ˜¾ç„¶è¿™ä¸ <code>cardify</code> Viewmodifier æœ‰å…³ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Cardify.swift  </span></span><br><span class="line"> </span><br><span class="line"> <span class="keyword">import</span> SwiftUI  </span><br><span class="line"> </span><br><span class="line"> <span class="keyword">struct</span> <span class="title class_">Cardify</span>: <span class="title class_ inherited__">ViewModifier</span>, <span class="title class_ inherited__">Animatable</span> &#123;  </span><br><span class="line">     <span class="comment">// isFaceUp ä¸º true æ—¶ï¼Œå†æ¬¡ç‚¹å‡»å¡ç‰‡ä¸ä¼šæœ‰åŠ¨ç”»æ•ˆæœ  </span></span><br><span class="line">     <span class="keyword">init</span>(<span class="params">isFaceUp</span>: <span class="type">Bool</span>) &#123;  </span><br><span class="line">         rotation <span class="operator">=</span> isFaceUp <span class="operator">?</span> <span class="number">0</span> : <span class="number">180</span>  </span><br><span class="line">     &#125;  </span><br><span class="line"> </span><br><span class="line">     <span class="comment">// ä»¤æ­¤å¤„çš„ isFaceUp ä¸ºä¸€ä¸ªè®¡ç®—å±æ€§ï¼Œç¡®ä¿åœ¨è¿˜æœªç¿»è½¬ 90 åº¦å‰ï¼Œçœ‹ä¸åˆ°å¡ç‰‡å†…å®¹  </span></span><br><span class="line">     <span class="keyword">var</span> isFaceUp: <span class="type">Bool</span> &#123;  </span><br><span class="line">         rotation <span class="operator">&lt;</span> <span class="number">90</span>  </span><br><span class="line">     &#125;  </span><br><span class="line"> </span><br><span class="line">     <span class="keyword">var</span> rotation: <span class="type">Double</span>  </span><br><span class="line"> </span><br><span class="line">     <span class="comment">// ç¬¦åˆ Animatable åè®®ï¼Œéœ€è¦ animatableData å¯è¯»å†™çš„è®¡ç®—å±æ€§  </span></span><br><span class="line">     <span class="keyword">var</span> animatableData: <span class="type">Double</span> &#123;  </span><br><span class="line">         <span class="keyword">get</span> &#123;  </span><br><span class="line">             <span class="keyword">return</span> rotation  </span><br><span class="line">         &#125;  </span><br><span class="line">         <span class="keyword">set</span> &#123;  </span><br><span class="line">             rotation <span class="operator">=</span> newValue  </span><br><span class="line">         &#125;  </span><br><span class="line">     &#125;  </span><br><span class="line"> </span><br><span class="line">     <span class="keyword">func</span> <span class="title function_">body</span>(<span class="params">content</span>: <span class="type">Content</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;  </span><br><span class="line">         <span class="type">ZStack</span> &#123;  </span><br><span class="line">             <span class="keyword">let</span> base <span class="operator">=</span> <span class="type">RoundedRectangle</span>(cornerRadius: <span class="type">Constants</span>.cornerRadius)  </span><br><span class="line">             base.strokeBorder(lineWidth: <span class="type">Constants</span>.lineWidth)  </span><br><span class="line">                 .background(base.fill(<span class="type">Color</span>.white))  </span><br><span class="line">                 .overlay(content)  </span><br><span class="line">                 .opacity(isFaceUp <span class="operator">?</span> <span class="number">1</span> : <span class="number">0</span>)  </span><br><span class="line">             base.fill()  </span><br><span class="line">                 .opacity(isFaceUp <span class="operator">?</span> <span class="number">0</span> : <span class="number">1</span>)  </span><br><span class="line">         &#125;  </span><br><span class="line">         .rotation3DEffect(.degrees(rotation), axis: (<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>))  </span><br><span class="line">     &#125;  </span><br><span class="line">     <span class="operator">...</span></span><br><span class="line"> &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>
<h4 id="4-4-å–æ¶ˆä¸æƒ³è¦çš„åŠ¨ç”»ï¼ˆ-animation-nil-ï¼‰"><a href="#4-4-å–æ¶ˆä¸æƒ³è¦çš„åŠ¨ç”»ï¼ˆ-animation-nil-ï¼‰" class="headerlink" title="4.4 å–æ¶ˆä¸æƒ³è¦çš„åŠ¨ç”»ï¼ˆ.animation(nil)ï¼‰"></a>4.4 å–æ¶ˆä¸æƒ³è¦çš„åŠ¨ç”»ï¼ˆ.animation(nil)ï¼‰</h4><p>æ¥ä¸‹æ¥ï¼Œè¦å®ç°è®°åˆ†çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>memorygame</code> ä¸­æ·»åŠ åˆ†æ•°çš„è®¡ç®—å±æ€§ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// MemorizeGame.swift  </span></span><br><span class="line">   </span><br><span class="line">   <span class="keyword">import</span> Foundation  </span><br><span class="line">   </span><br><span class="line">   <span class="keyword">struct</span> <span class="title class_">MemoryGame</span>&lt;<span class="type">CardContent</span>&gt; <span class="keyword">where</span> <span class="type">CardContent</span>: <span class="type">Equatable</span> &#123;  </span><br><span class="line">       <span class="keyword">private(set)</span> <span class="keyword">var</span> cards: [<span class="type">Card</span>]  </span><br><span class="line">       <span class="keyword">private(set)</span> <span class="keyword">var</span> score <span class="operator">=</span> <span class="number">0</span>  </span><br><span class="line">       </span><br><span class="line">       <span class="keyword">init</span>(<span class="params">numberOfPairsOfCards</span>: <span class="type">Int</span>, <span class="params">cardContentFactory</span>: (<span class="type">Int</span>) -&gt; <span class="type">CardContent</span>) &#123;  </span><br><span class="line">           <span class="comment">// ...  </span></span><br><span class="line">       &#125;  </span><br><span class="line">   </span><br><span class="line">       <span class="comment">// ...  </span></span><br><span class="line">       <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">choose</span>(<span class="keyword">_</span> <span class="params">card</span>: <span class="type">Card</span>) &#123;  </span><br><span class="line">           <span class="keyword">if</span> <span class="keyword">let</span> chosenIndex <span class="operator">=</span> cards.firstIndex(where: &#123; <span class="variable">$0</span>.id <span class="operator">==</span> card.id &#125;) &#123;  </span><br><span class="line">               <span class="keyword">if</span> <span class="operator">!</span>cards[chosenIndex].isFaceUp <span class="operator">&amp;&amp;</span> <span class="operator">!</span>cards[chosenIndex].isMatched &#123;  </span><br><span class="line">                   <span class="keyword">if</span> <span class="keyword">let</span> potentialMatchIndex <span class="operator">=</span> indexOfTheOneAndOnlyFaceUpCard &#123;  </span><br><span class="line">                       <span class="keyword">if</span> cards[chosenIndex].content <span class="operator">==</span> cards[potentialMatchIndex].content &#123;  </span><br><span class="line">                           cards[chosenIndex].isMatched <span class="operator">=</span> <span class="literal">true</span>  </span><br><span class="line">                           cards[potentialMatchIndex].isMatched <span class="operator">=</span> <span class="literal">true</span>  </span><br><span class="line">                           score <span class="operator">+=</span> <span class="number">2</span>  </span><br><span class="line">                       &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">                           <span class="keyword">if</span> cards[chosenIndex].hasBeenSeen &#123;  </span><br><span class="line">                               score <span class="operator">-=</span> <span class="number">1</span>  </span><br><span class="line">                           &#125;  </span><br><span class="line">                           <span class="keyword">if</span> cards[potentialMatchIndex].hasBeenSeen &#123;  </span><br><span class="line">                               score <span class="operator">-=</span> <span class="number">1</span>  </span><br><span class="line">                           &#125;  </span><br><span class="line">                       &#125;  </span><br><span class="line">                   &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">                       indexOfTheOneAndOnlyFaceUpCard <span class="operator">=</span> chosenIndex  </span><br><span class="line">                   &#125;  </span><br><span class="line">                   cards[chosenIndex].isFaceUp <span class="operator">=</span> <span class="literal">true</span>  </span><br><span class="line">               &#125;  </span><br><span class="line">           &#125;  </span><br><span class="line">       &#125;  </span><br><span class="line">       </span><br><span class="line">       <span class="keyword">struct</span> <span class="title class_">Card</span>: <span class="title class_ inherited__">Identifiable</span>, <span class="title class_ inherited__">Equatable</span>, <span class="title class_ inherited__">CustomDebugStringConvertible</span> &#123;  </span><br><span class="line">           <span class="keyword">var</span> isFaceUp <span class="operator">=</span> <span class="literal">false</span> &#123;  </span><br><span class="line">               <span class="keyword">didSet</span> &#123;  </span><br><span class="line">                   <span class="keyword">if</span> oldValue <span class="operator">&amp;&amp;</span> <span class="operator">!</span>isFaceUp &#123;  </span><br><span class="line">                       hasBeenSeen <span class="operator">=</span> <span class="literal">true</span>  </span><br><span class="line">                   &#125;  </span><br><span class="line">               &#125;  </span><br><span class="line">           &#125;  </span><br><span class="line">           <span class="keyword">var</span> isMatched <span class="operator">=</span> <span class="literal">false</span>  </span><br><span class="line">           <span class="keyword">var</span> hasBeenSeen <span class="operator">=</span> <span class="literal">false</span>  </span><br><span class="line">           <span class="keyword">var</span> content: <span class="type">CardContent</span>  </span><br><span class="line">           </span><br><span class="line">           <span class="keyword">var</span> id: <span class="type">String</span>  </span><br><span class="line">           <span class="keyword">var</span> debugDescription: <span class="type">String</span> &#123;  </span><br><span class="line">               <span class="string">&quot;<span class="subst">\(id)</span>: <span class="subst">\(content)</span> <span class="subst">\(isFaceUp <span class="operator">?</span> <span class="string">&quot;up&quot;</span> : <span class="string">&quot;down&quot;</span>)</span> <span class="subst">\(isMatched <span class="operator">?</span> <span class="string">&quot;matched&quot;</span> : <span class="string">&quot;&quot;</span>)</span>&quot;</span>  </span><br><span class="line">           &#125;  </span><br><span class="line">       &#125;  </span><br><span class="line">   &#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ <code>EmojiMemoryGameView</code> ä¸­æ·»åŠ  <code>score</code> è§†å›¾å¹¶è°ƒæ•´å¸ƒå±€ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// EmojiMemoryGameView.swift  </span></span><br><span class="line">   </span><br><span class="line">   <span class="keyword">import</span> SwiftUI  </span><br><span class="line">   </span><br><span class="line">   <span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>: <span class="title class_ inherited__">View</span> &#123;  </span><br><span class="line">       <span class="keyword">typealias</span> <span class="type">Card</span> <span class="operator">=</span> <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;.<span class="type">Card</span>  </span><br><span class="line">   </span><br><span class="line">       <span class="comment">// @StateObject æ„å‘³ç€ä½ ä¸èƒ½å’Œå…¶ä»– View å…±äº« EmojiMemoryGame è¿™ä¸ªå¯¹è±¡  </span></span><br><span class="line">       <span class="comment">// @ObservedObject è¡¨æ˜ä½ ä¼šè§‚å¯Ÿè¿™ä¸ªå˜é‡ï¼Œä¸€æ—¦è¿™ä¸ªå˜é‡å‘ç”Ÿæ”¹å˜ï¼Œä¼šé‡æ–°æ¸²æŸ“è¿™ä¸ª UI ç•Œé¢  </span></span><br><span class="line">       <span class="meta">@ObservedObject</span> <span class="keyword">var</span> <span class="type">ViewModel</span>: <span class="type">EmojiMemoryGame</span>  </span><br><span class="line">       <span class="keyword">private</span> <span class="keyword">let</span> aspectRatio: <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">2</span> <span class="operator">/</span> <span class="number">3</span>  </span><br><span class="line">   </span><br><span class="line">       <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;  </span><br><span class="line">           <span class="type">VStack</span> &#123;  </span><br><span class="line">               cards  </span><br><span class="line">                   .foregroundColor(<span class="type">ViewModel</span>.color)  </span><br><span class="line">               <span class="type">HStack</span> &#123;  </span><br><span class="line">                   score  </span><br><span class="line">                   <span class="type">Spacer</span>()  </span><br><span class="line">                   shuffle  </span><br><span class="line">               &#125;  </span><br><span class="line">               .font(.largeTitle)  </span><br><span class="line">           &#125;  </span><br><span class="line">           .padding()  </span><br><span class="line">       &#125;  </span><br><span class="line">   </span><br><span class="line">       <span class="keyword">private</span> <span class="keyword">var</span> score: <span class="keyword">some</span> <span class="type">View</span> &#123;  </span><br><span class="line">           <span class="type">Text</span>(<span class="string">&quot;Score: <span class="subst">\(ViewModel.score)</span>&quot;</span>)  </span><br><span class="line">               <span class="comment">// å–æ¶ˆ Score è§†å›¾çš„åŠ¨ç”»æ•ˆæœ  </span></span><br><span class="line">               .animation(<span class="literal">nil</span>)  </span><br><span class="line">       &#125;  </span><br><span class="line">   </span><br><span class="line">       <span class="keyword">private</span> <span class="keyword">var</span> shuffle: <span class="keyword">some</span> <span class="type">View</span> &#123;  </span><br><span class="line">           <span class="type">Button</span>(<span class="string">&quot;Shuffle&quot;</span>) &#123;  </span><br><span class="line">               withAnimation &#123;  </span><br><span class="line">                   <span class="type">ViewModel</span>.shuffle()  </span><br><span class="line">               &#125;  </span><br><span class="line">           &#125;  </span><br><span class="line">       &#125;  </span><br><span class="line">       <span class="comment">// ...  </span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-5-onappear-åŠ¨ç”»ï¼ˆé£è¡Œçš„åˆ†æ•°å˜åŒ–ï¼‰"><a href="#4-5-onappear-åŠ¨ç”»ï¼ˆé£è¡Œçš„åˆ†æ•°å˜åŒ–ï¼‰" class="headerlink" title="4.5 onappear åŠ¨ç”»ï¼ˆé£è¡Œçš„åˆ†æ•°å˜åŒ–ï¼‰"></a>4.5 onappear åŠ¨ç”»ï¼ˆé£è¡Œçš„åˆ†æ•°å˜åŒ–ï¼‰</h4><p>è¿™é‡Œå¸Œæœ›æ¯å½“å‡ºç°å¾—åˆ†ï¼Œæˆ–è€…è´Ÿåˆ†ç­‰ä¸ä¸º 0 çš„æƒ…å†µæ—¶ï¼Œä¼šæœ‰é£è¡Œçš„è®°åˆ†åŠ¨ç”»ã€‚</p>
<p>æˆ‘ä»¬æ·»åŠ ä¸€ä¸ª <code>FlyingNumber</code> è§†å›¾é‡å åœ¨ <code>cards</code> è§†å›¾ä¸Šï¼Œå…³äº <code>scoreChange</code> å‡½æ•°ä¼šåœ¨ä¸‹ä¸€èŠ‚è¯¾ç»§ç»­ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGameView.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">typealias</span> <span class="type">Card</span> <span class="operator">=</span> <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;.<span class="type">Card</span></span><br><span class="line">	<span class="operator">...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">AspectVGrid</span>(items: <span class="type">ViewModel</span>.cards, aspectRatio: aspectRatio) &#123; card <span class="keyword">in</span></span><br><span class="line">            <span class="type">CardView</span>(card)</span><br><span class="line">                .aspectRatio(aspectRatio, contentMode: .fit)</span><br><span class="line">                .padding(<span class="number">8</span>)</span><br><span class="line">                .overlay(<span class="type">FlyingNumber</span>(number: scoreChange(causedBy: card)))</span><br><span class="line">                .onTapGesture &#123;</span><br><span class="line">                    withAnimation &#123;</span><br><span class="line">                        <span class="type">ViewModel</span>.choose(card)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">func</span> <span class="title function_">scoreChange</span>(<span class="params">causedBy</span> <span class="params">card</span>: <span class="type">Card</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#<span class="type">PreView</span> &#123;</span><br><span class="line">    <span class="type">EmojiMemoryGameView</span>(ViewModel: <span class="type">EmojiMemoryGame</span>())</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="5-è¯¾ç¨‹é¢„å‘Š-09"><a href="#5-è¯¾ç¨‹é¢„å‘Š-09" class="headerlink" title="5. è¯¾ç¨‹é¢„å‘Š 09"></a>5. è¯¾ç¨‹é¢„å‘Š 09</h2><ul>
<li>TimelineView ï¼ˆanimating our pie-shaped countdown timerï¼‰</li>
<li>è¿‡æ¸¡åŠ¨ç”»ï¼ˆanimating the arrival and departure of Viewsï¼‰</li>
<li>matchedGeometryEffectï¼ˆdealing our cards outï¼‰</li>
</ul>
]]></content>
      <categories>
        <category>code</category>
        <category>swift</category>
      </categories>
      <tags>
        <tag>cs193p</tag>
      </tags>
  </entry>
  <entry>
    <title>Stanford-cs193p-09ï½œAnimation-2</title>
    <url>/2025/01/20/Stanford-cs193p-09%EF%BD%9CAnimation-2/</url>
    <content><![CDATA[<p>æœ¬æ–‡æ˜¯æ–¯å¦ç¦å¤§å­¦ cs193p å…¬å¼€è¯¾ç¨‹ç¬¬ 09 é›†çš„ç›¸å…³ç¬”è®°ã€‚</p>
<span id="more"></span>

<p>cs193p è¯¾ç¨‹ä»‹ç»:</p>
<blockquote>
<p>The lectures for the Spring 2023 version of Stanford Universityâ€™s course CS193p (Developing Applications for iOS using SwiftUI) were given in person but, unfortunately, were not video recorded. However, we did capture the laptop screen of the presentations and demos as well as the associated audio. You can watch these screen captures using the links below. Youâ€™ll also find links to supporting material that was distributed to students during the quarter (homework, demo code, etc.).</p>
</blockquote>
<p>cs193p è¯¾ç¨‹ç½‘å€: [<a href="https://cs193p.sites.stanford.edu/2023]">https://cs193p.sites.stanford.edu/2023]</a></p>
<h2 id="1-Demo-onAppear-animation"><a href="#1-Demo-onAppear-animation" class="headerlink" title="1. Demo: onAppear animation"></a>1. Demo: onAppear animation</h2><blockquote>
<p><strong>flying score change indications (incl. Property Observer and Tuples)</strong></p>
</blockquote>
<p>ä¸ºäº†åŒæ—¶è§‚å¯Ÿå½“å‰å¡ç‰‡ï¼Œå’Œå½“å‰å¡ç‰‡å¾—åˆ†çš„å˜åŒ–ï¼Œæˆ‘ä»¬ä½¿ç”¨ tuple <code>lastScoreChange = (scoreChange:Int,causeByCardId:&quot;&quot;)</code> æ¥è®°å½•ã€‚åœ¨ <code>withAnimation</code> ä¸­åˆ¶å®šå¡ç‰‡å¾—åˆ†å˜åŒ–çš„åŠ¨ç”»è§„åˆ™ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGameView.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">AspectVGrid</span>(items: viewModel.cards, aspectRatio: aspectRatio) &#123; card <span class="keyword">in</span></span><br><span class="line">            <span class="type">CardView</span>(card)</span><br><span class="line">                .aspectRatio(aspectRatio, contentMode: .fit)</span><br><span class="line">                .padding(<span class="number">4</span>)</span><br><span class="line">                .overlay(<span class="type">FlyingNumber</span>(number: scoreChange(causedBy: card)))</span><br><span class="line">                .onTapGesture &#123;</span><br><span class="line">                    withAnimation &#123;</span><br><span class="line">                        <span class="keyword">let</span> scoreBeforeChoosing <span class="operator">=</span> viewModel.score</span><br><span class="line">                        viewModel.choose(card)</span><br><span class="line">                        <span class="keyword">let</span> scoreChange <span class="operator">=</span> viewModel.score <span class="operator">-</span> scoreBeforeChoosing</span><br><span class="line">                        lastScoreChange <span class="operator">=</span> (scoreChange, causedByCardId:card.id)</span><br><span class="line">                        <span class="comment">// ç­‰åŒäºï¼šlastScoreChange = (scoreChange,card.id)ï¼Œä½†ä¸ºäº†ä»£ç çš„æ˜“è¯»æ€§ï¼Œæ›´æ¨èä¸Šä¸€ç§å†™æ³•</span></span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> lastScoreChange <span class="operator">=</span> (<span class="number">0</span>,causedByCardId:<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">func</span> <span class="title function_">scoreChange</span>(<span class="params">causedBy</span> <span class="params">card</span>: <span class="type">Card</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    	<span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<h3 id="1-1-tuple-è§£æ„"><a href="#1-1-tuple-è§£æ„" class="headerlink" title="1.1 tuple è§£æ„"></a>1.1 tuple è§£æ„</h3><p>è§£æ„ <code>tuple</code>ï¼šæˆ‘ä»¬å¯ä»¥é€šè¿‡åç§°æˆ–è€…ç´¢å¼•è§£æ„ <code>tuple</code>ï¼Œä¾‹å¦‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> person <span class="operator">=</span> (name: <span class="string">&quot;Alice&quot;</span>, age: <span class="number">25</span>)</span><br><span class="line"><span class="built_in">print</span>(person.age)  <span class="comment">// è¾“å‡ºï¼š25</span></span><br><span class="line"><span class="built_in">print</span>(person.<span class="number">0</span>)  <span class="comment">// è¾“å‡ºï¼š25</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥åŒæ—¶è§£æ„å¹¶èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡</span></span><br><span class="line"><span class="keyword">let</span> (name01,age01) <span class="operator">=</span> person</span><br><span class="line"><span class="built_in">print</span>(name01) <span class="comment">// è¾“å‡ºï¼šAlice</span></span><br><span class="line"><span class="built_in">print</span>(age01) <span class="comment">// è¾“å‡º:25</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ”¹ tuple å€¼åŒç†</span></span><br><span class="line">person.age <span class="operator">=</span> <span class="number">27</span></span><br><span class="line"><span class="built_in">print</span>(person.age) <span class="comment">//è¾“å‡º 27</span></span><br></pre></td></tr></table></figure>

<p>é€šå¸¸ä½¿ç”¨åç§°è§£æ„ä½¿ä»£ç æ˜“è¯»æ€§æ›´å¥½ã€‚</p>
<p>åœ¨ <code>scoreChange</code> ä¸­å¯¹ <code>lastScoreChange</code> è§£æ„å¹¶èµ‹å€¼ï¼Œè·å–å½“å‰å¡ç‰‡å¾—åˆ†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGameView.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">   <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> lastScoreChange <span class="operator">=</span> (<span class="number">0</span>,causedByCardId:<span class="string">&quot;&quot;</span>)</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">func</span> <span class="title function_">scoreChange</span>(<span class="params">causedBy</span> <span class="params">card</span>: <span class="type">Card</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> (amount,id) <span class="operator">=</span> lastScoreChange</span><br><span class="line">        <span class="keyword">return</span> card.id <span class="operator">==</span> id <span class="operator">?</span> amount : <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-2-number-sign-startegy-always"><a href="#1-2-number-sign-startegy-always" class="headerlink" title="1.2 .number.sign(startegy:.always())"></a>1.2 <code>.number.sign(startegy:.always())</code></h3><p>æ­¤æ—¶åœ¨åŒ¹é…æ—¶ä¼šæœ‰æ•°å­—æ˜¾ç¤ºï¼Œä½†ä¸æ˜æ˜¾ã€‚æˆ‘ä»¬è®©æ•°å­—æ›´æ¸…æ™°ä¸€äº›ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  FlyingNumber.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FlyingNumber</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> number: <span class="type">Int</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> number <span class="operator">!=</span> <span class="number">0</span> &#123;</span><br><span class="line">            <span class="type">Text</span>(number,format: .number.sign(strategy: .always()))</span><br><span class="line">                .font(.largeTitle)</span><br><span class="line">                .foregroundColor(number <span class="operator">&lt;</span> <span class="number">0</span> <span class="operator">?</span> .red : .green)</span><br><span class="line">                .shadow(color: .black, radius: <span class="number">1.5</span>, x: <span class="number">1</span>, y: <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>.number.sign(startegy:.always())</code> ç¡®ä¿æ•°å­—å§‹ç»ˆæ˜¾ç¤ºä¸€ä¸ªç¬¦å·ï¼Œæ­£æ•°æ˜¾ç¤º <code>+</code> ç¬¦å·ï¼Œè´Ÿæ•°æ˜¾ç¤º <code>-</code> ç¬¦å·ã€‚</p>
<h3 id="1-3-offsetã€onAppearã€onDisappear"><a href="#1-3-offsetã€onAppearã€onDisappear" class="headerlink" title="1.3 offsetã€onAppearã€onDisappear"></a>1.3 offsetã€onAppearã€onDisappear</h3><p>ç°åœ¨æ¥åˆ¶ä½œè¿™ä¸ªæ•°å­—çš„åç§»åŠ¨ç”»ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  FlyingNumber.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FlyingNumber</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> offset : <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> number <span class="operator">!=</span> <span class="number">0</span> &#123;</span><br><span class="line">            <span class="type">Text</span>(number,format: .number.sign(strategy: .always()))</span><br><span class="line">                .font(.largeTitle)</span><br><span class="line">                .foregroundColor(number <span class="operator">&lt;</span> <span class="number">0</span> <span class="operator">?</span> .red : .green)</span><br><span class="line">                .shadow(color: .black, radius: <span class="number">1.5</span>, x: <span class="number">1</span>, y: <span class="number">1</span>)</span><br><span class="line">                .offset(x : <span class="number">0</span>, y : offset)</span><br><span class="line">                .opacity(offset <span class="operator">!=</span> <span class="number">0</span> <span class="operator">?</span> <span class="number">0</span> : <span class="number">1</span>)</span><br><span class="line">                .onAppear &#123;</span><br><span class="line">                    withAnimation(.easeOut(duration: <span class="number">2.0</span>))&#123;</span><br><span class="line">                        offset <span class="operator">=</span> number <span class="operator">&lt;</span> <span class="number">0</span> <span class="operator">?</span> <span class="number">200</span>: <span class="operator">-</span><span class="number">200</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                .onDisappear &#123;</span><br><span class="line">                    offset <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>offset</code> æ˜¯ç›¸å¯¹äºå½“å‰ä½ç½®çš„ç»å¯¹ä½ç½®åç§»</li>
<li><code>.onAppear</code> è®¾ç½®å½“è¿™ä¸ªæ•°å­—å‡ºç°æ—¶äº§ç”Ÿçš„åŠ¨ç”»ã€‚</li>
<li><code>.onDisappear</code> è®¾ç½®å½“æ•°å­—æ¶ˆå¤±æ—¶è®©å…¶å›åˆ°åŸæ¥çš„ä½ç½®ï¼Œå¦åˆ™ä¸‹ä¸€æ¬¡æ•°å­—å‡ºç°æ—¶ä¼šåœ¨ä¸Šä¸€æ¬¡åç§»åçš„ä½ç½®ã€‚</li>
</ul>
<h4 id="1-4-zIndex"><a href="#1-4-zIndex" class="headerlink" title="1.4 zIndex"></a>1.4 <code>zIndex</code></h4><p>ä¸Šé¢çš„ä»£ç æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨ç‚¹å‡»ä¸¤å¼ ä¸åŒ¹é…çš„å¡ç‰‡æ—¶ï¼Œè´Ÿåˆ†åœ¨é£è¡Œæ—¶ä¼šåœ¨å…¶ä»–å¡ç‰‡ä¸‹æ–¹ä¸èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚å› ä¸ºåç”Ÿæˆçš„ Card å±‚çº§ä¼š overlay å‰è¾¹ç”Ÿæˆçš„ Card å±‚çº§ã€‚</p>
<p>ä¸ºç¡®ä¿åˆ†æ•°å§‹ç»ˆèƒ½åœ¨æ‰€æœ‰å¡ç‰‡ä¸Šæ–¹é£è¿‡ï¼Œä½¿ç”¨ <code>zIndex</code> æ¥æ‰‹åŠ¨è°ƒæ•´ FlyingNumber card çš„å±‚çº§ã€‚å½“ <code>scoreChange</code> ä¸ä¸º 0 æ—¶ï¼Œåˆ™è®©å…¶ä½äºæœ€ä¸Šæ–¹ã€‚</p>
<p>æˆ‘ä»¬å°† <code>onTApGesture</code> ä¸­çš„äº¤äº’åŠ¨ä½œæå–ä¸ºä¸€ä¸ªç§æœ‰å‡½æ•° <code>choose</code> ä»¥ä½¿å‡½æ•°æ›´æ˜“è¯»ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">AspectVGrid</span>(items: viewModel.cards, aspectRatio: aspectRatio) &#123; card <span class="keyword">in</span></span><br><span class="line">            <span class="type">CardView</span>(card)</span><br><span class="line">                .aspectRatio(aspectRatio, contentMode: .fit)</span><br><span class="line">                .padding(<span class="number">4</span>)</span><br><span class="line">                .overlay(<span class="type">FlyingNumber</span>(number: scoreChange(causedBy: card)))</span><br><span class="line">                .zIndex(scoreChange(causedBy: card) <span class="operator">!=</span> <span class="number">0</span> <span class="operator">?</span> <span class="number">100</span> : <span class="number">0</span>)</span><br><span class="line">                .onTapGesture &#123;</span><br><span class="line">                	choose(card)</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">func</span> <span class="title function_">choose</span>(<span class="keyword">_</span> <span class="params">card</span>:<span class="type">Card</span>) &#123;</span><br><span class="line">		withAnimation &#123;</span><br><span class="line">			<span class="keyword">let</span> scoreBeforeChoosing <span class="operator">=</span> viewModel.score</span><br><span class="line">			viewModel.choose(card)</span><br><span class="line">			<span class="keyword">let</span> scoreChange <span class="operator">=</span> viewModel.score <span class="operator">-</span> scoreBeforeChoosing</span><br><span class="line">			lastScoreChange <span class="operator">=</span> (scoreChange, causedByCardId:card.id)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> lastScoreChange <span class="operator">=</span> (<span class="number">0</span>,causedByCardId:<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">func</span> <span class="title function_">scoreChange</span>(<span class="params">causedBy</span> <span class="params">card</span>: <span class="type">Card</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> (amount,id) <span class="operator">=</span> lastScoreChange</span><br><span class="line">        <span class="keyword">return</span> card.id <span class="operator">==</span> id <span class="operator">?</span> amount : <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-Demo-TimelineView"><a href="#2-Demo-TimelineView" class="headerlink" title="2. Demo: TimelineView"></a>2. Demo: TimelineView</h2><blockquote>
<p><strong>animation our pie shaped countdown timer</strong></p>
</blockquote>
<p>å€’è®¡æ—¶éƒ¨åˆ†æ–°å¢ model ä»£ç ï¼Œåœ¨æ¯æ¬¡ç‰Œæœä¸Šæ—¶ä½¿ç”¨å¥–åŠ±æ—¶é—´ï¼Œåœ¨æ¯æ¬¡å¡ç‰Œé¢æœä¸‹æ—¶åœæ­¢å¥–åŠ±æ—¶é—´ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  MemoryGame.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MemoryGame</span>&lt;<span class="type">CardContent</span>&gt; <span class="keyword">where</span> <span class="type">CardContent</span>: <span class="type">Equatable</span> &#123;</span><br><span class="line">  	<span class="operator">...</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">choose</span>(<span class="keyword">_</span> <span class="params">card</span>: <span class="type">Card</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> chosenIndex <span class="operator">=</span> cards.firstIndex(where: &#123; <span class="variable">$0</span>.id <span class="operator">==</span> card.id &#125;) &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="operator">!</span>cards[chosenIndex].isFaceUp <span class="operator">&amp;&amp;</span> <span class="operator">!</span>cards[chosenIndex].isMatched &#123;</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">let</span> potentialMatchIndex <span class="operator">=</span> indexOfTheOneAndOnlyFaceUpCard &#123;</span><br><span class="line">                    <span class="keyword">if</span> cards[chosenIndex].content <span class="operator">==</span> cards[potentialMatchIndex].content &#123;</span><br><span class="line">                        cards[chosenIndex].isMatched <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">                        cards[potentialMatchIndex].isMatched <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">                        score <span class="operator">+=</span> <span class="number">2</span> <span class="operator">+</span> cards[chosenIndex].bonus <span class="operator">+</span> cards[potentialMatchIndex].bonus</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> cards[chosenIndex].hasBeenSeen &#123;</span><br><span class="line">                            score <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span> cards[potentialMatchIndex].hasBeenSeen &#123;</span><br><span class="line">                            score <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    indexOfTheOneAndOnlyFaceUpCard <span class="operator">=</span> chosenIndex</span><br><span class="line">                &#125;</span><br><span class="line">                cards[chosenIndex].isFaceUp <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Card</span>: <span class="title class_ inherited__">Equatable</span>, <span class="title class_ inherited__">Identifiable</span>, <span class="title class_ inherited__">CustomStringConvertible</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> isFaceUp <span class="operator">=</span> <span class="literal">false</span> &#123;</span><br><span class="line">            <span class="keyword">didSet</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> isFaceUp &#123;</span><br><span class="line">                    startUsingBonusTime()</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    stopUsingBonusTime()</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> oldValue <span class="operator">&amp;&amp;</span> <span class="operator">!</span>isFaceUp &#123;</span><br><span class="line">                    hasBeenSeen <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> hasBeenSeen <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">var</span> isMatched <span class="operator">=</span> <span class="literal">false</span> &#123;</span><br><span class="line">            <span class="keyword">didSet</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> isMatched &#123;</span><br><span class="line">                    stopUsingBonusTime()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> content: <span class="type">CardContent</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> id: <span class="type">String</span></span><br><span class="line">        <span class="keyword">var</span> description: <span class="type">String</span> &#123;</span><br><span class="line">            <span class="string">&quot;<span class="subst">\(id)</span>: <span class="subst">\(content)</span> <span class="subst">\(isFaceUp <span class="operator">?</span> <span class="string">&quot;up&quot;</span> : <span class="string">&quot;down&quot;</span>)</span><span class="subst">\(isMatched <span class="operator">?</span> <span class="string">&quot; matched&quot;</span> : <span class="string">&quot;&quot;</span>)</span>&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// MARK: - Bonus Time</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// call this when the card transitions to face up state</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">startUsingBonusTime</span>() &#123;</span><br><span class="line">            <span class="keyword">if</span> isFaceUp <span class="operator">&amp;&amp;</span> <span class="operator">!</span>isMatched <span class="operator">&amp;&amp;</span> bonusPercentRemaining <span class="operator">&gt;</span> <span class="number">0</span>, lastFaceUpDate <span class="operator">==</span> <span class="literal">nil</span> &#123;</span><br><span class="line">                lastFaceUpDate <span class="operator">=</span> <span class="type">Date</span>()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// call this when the card goes back face down or gets matched</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">stopUsingBonusTime</span>() &#123;</span><br><span class="line">            pastFaceUpTime <span class="operator">=</span> faceUpTime</span><br><span class="line">            lastFaceUpDate <span class="operator">=</span> <span class="literal">nil</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// the bonus earned so far (one point for every second of the bonusTimeLimit that was not used)</span></span><br><span class="line">        <span class="comment">// this gets smaller and smaller the longer the card remains face up without being matched</span></span><br><span class="line">        <span class="keyword">var</span> bonus: <span class="type">Int</span> &#123;</span><br><span class="line">            <span class="type">Int</span>(bonusTimeLimit <span class="operator">*</span> bonusPercentRemaining)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// percentage of the bonus time remaining</span></span><br><span class="line">        <span class="keyword">var</span> bonusPercentRemaining: <span class="type">Double</span> &#123;</span><br><span class="line">            bonusTimeLimit <span class="operator">&gt;</span> <span class="number">0</span> <span class="operator">?</span> <span class="built_in">max</span>(<span class="number">0</span>, bonusTimeLimit <span class="operator">-</span> faceUpTime)<span class="operator">/</span>bonusTimeLimit : <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// how long this card has ever been face up and unmatched during its lifetime</span></span><br><span class="line">        <span class="comment">// basically, pastFaceUpTime + time since lastFaceUpDate</span></span><br><span class="line">        <span class="keyword">var</span> faceUpTime: <span class="type">TimeInterval</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> lastFaceUpDate &#123;</span><br><span class="line">                <span class="keyword">return</span> pastFaceUpTime <span class="operator">+</span> <span class="type">Date</span>().timeIntervalSince(lastFaceUpDate)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> pastFaceUpTime</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// can be zero which would mean &quot;no bonus available&quot; for matching this card quickly</span></span><br><span class="line">        <span class="keyword">var</span> bonusTimeLimit: <span class="type">TimeInterval</span> <span class="operator">=</span> <span class="number">6</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// the last time this card was turned face up</span></span><br><span class="line">        <span class="keyword">var</span> lastFaceUpDate: <span class="type">Date</span>?</span><br><span class="line"></span><br><span class="line">        <span class="comment">// the accumulated time this card was face up in the past</span></span><br><span class="line">        <span class="comment">// (i.e. not including the current time it&#x27;s been face up if it is currently so)</span></span><br><span class="line">        <span class="keyword">var</span> pastFaceUpTime: <span class="type">TimeInterval</span> <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<h3 id="2-1-TimelineView"><a href="#2-1-TimelineView" class="headerlink" title="2.1 TimelineView"></a>2.1 <code>TimelineView</code></h3><p><code>TimeLineView</code> æ˜¯ä¸€ä¸ªå¯ä»¥æ ¹æ®æ—¶é—´å˜åŒ–æ›´æ–°è§†å›¾çš„ç»„ä»¶ã€‚æˆ‘ä»¬å°†åŠ¨ç”»æ—¶é—´é—´éš”è®¾ç½®ä¸º 1&#x2F;5 ç§’ï¼Œæ„å‘³ç€æ¯ 200 æ¯«ç§’ä¼šæ›´æ–°ä¸€æ¬¡è§†å›¾ã€‚</p>
<p>å¦å¤–å°† overlay é‡Œè¾¹çš„è§†å›¾æå–ä¸º <code>cardContent</code>ï¼Œä½¿ä»£ç æ›´æ˜“è¯»ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  CardView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">TimelineView</span>(.animation(minimumInterval: <span class="number">1</span> <span class="operator">/</span> <span class="number">5</span>)) &#123; timeline <span class="keyword">in</span></span><br><span class="line">			<span class="type">Pie</span>(endAngle: .degrees(card.bonusPercentRemaining <span class="operator">*</span> <span class="number">360</span>))</span><br><span class="line">				.opacity(<span class="type">Constants</span>.<span class="type">Pie</span>.opacity)</span><br><span class="line">				.overlay(</span><br><span class="line">					cardContents.padding(<span class="type">Constants</span>.<span class="type">Pie</span>.in<span class="keyword">set</span>)</span><br><span class="line">				)</span><br><span class="line">				.padding(<span class="type">Constants</span>.in<span class="keyword">set</span>)</span><br><span class="line">				.cardify(isFaceUp: card.isFaceUp)</span><br><span class="line">				.opacity(card.isFaceup <span class="operator">||</span> <span class="operator">!</span>card.isMatched <span class="operator">?</span> <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> cardContents: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">	        <span class="type">Text</span>(card.content)</span><br><span class="line">	            .font(.system(size: <span class="type">Constants</span>.<span class="type">FontSize</span>.largest))</span><br><span class="line">	            .minimumScaleFactor(<span class="type">Constants</span>.<span class="type">FontSize</span>.scaleFactor)</span><br><span class="line">	            .multilineTextAlignment(.center)</span><br><span class="line">	            .aspectRatio(<span class="number">1</span>, contentMode: .fit)</span><br><span class="line">	            .padding(<span class="type">Constants</span>.<span class="type">Pie</span>.in<span class="keyword">set</span>)</span><br><span class="line">	            .rotationEffect(.degrees(card.isMatched <span class="operator">?</span> <span class="number">360</span> : <span class="number">0</span>))</span><br><span class="line">	            .animation(.spin(duration: <span class="number">1</span>), value: card.isMatched)</span><br><span class="line">	    &#125;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<h2 id="3-Demo-transitions"><a href="#3-Demo-transitions" class="headerlink" title="3. Demo: transitions"></a>3. Demo: transitions</h2><blockquote>
<p><strong>animation the arrival and departure of Views</strong></p>
</blockquote>
<p>å½“åŒ¹é…å¡ç‰‡æ¶ˆå¤±æ—¶ï¼Œä»ç„¶æ˜¯ç¿»è½¬åŠ¨ç”»ï¼Œä½†æ­¤æ—¶å¸Œæœ›è®©åŒ¹é…çš„å¡ç‰‡æ¶ˆå¤±è€Œéç¿»è½¬ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  CardView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">TimelineView</span>(.animation(minimumInterval: <span class="number">1</span> <span class="operator">/</span> <span class="number">5</span>)) &#123; timeline i</span><br><span class="line">			<span class="keyword">if</span> card.isFaceUp <span class="operator">||</span> <span class="operator">!</span>card.isMatched &#123;</span><br><span class="line">				<span class="type">Pie</span>(endAngle: .degrees(card.bonusPercentRemaining <span class="operator">*</span> <span class="number">360</span>))</span><br><span class="line">					.opacity(<span class="type">Constants</span>.<span class="type">Pie</span>.opacity)</span><br><span class="line">					.overlay(</span><br><span class="line">						cardContents.padding(<span class="type">Constants</span>.<span class="type">Pie</span>.in<span class="keyword">set</span>)</span><br><span class="line">					)</span><br><span class="line">					.padding(<span class="type">Constants</span>.in<span class="keyword">set</span>)</span><br><span class="line">					.cardify(isFaceUp: card.isFaceUp)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<h3 id="3-1-Color-clear-ã€transition"><a href="#3-1-Color-clear-ã€transition" class="headerlink" title="3.1 Color.clear ã€transition"></a>3.1 <code>Color.clear</code> ã€<code>transition</code></h3><p>æ­¤æ—¶ï¼Œå¡ç‰Œæœä¸‹ä¸”å¡ç‰ŒåŒ¹é…æ—¶ï¼Œview ä¸ºç©ºï¼Œ<code>AspectVGrid</code> ä¼šè®¤ä¸ºæ­¤æ—¶æ²¡æœ‰ viewï¼Œåè¾¹çš„å¡ç‰‡ä¼šæŒ¤å‹è‡³å‰è¾¹æ¥ã€‚ä¸ºé¿å…è¿™ç§æƒ…å†µï¼Œä½¿ç”¨ <code>Color.clear</code> æ¥ä¿ç•™ä¸€ä¸ªçœ‹ä¸åˆ°çŸ©å½¢ç©ºé—´ã€‚</p>
<p>åœ¨å¡ç‰‡æ¶ˆå¤±æ—¶æ·»åŠ  <code>transition(.scale)</code> åŠ¨ç”»ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  CardView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CardView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">TimelineView</span>(.animation(minimumInterval: <span class="number">1</span> <span class="operator">/</span> <span class="number">5</span>)) &#123; timeline i</span><br><span class="line">			<span class="keyword">if</span> card.isFaceUp <span class="operator">||</span> <span class="operator">!</span>card.isMatched &#123;</span><br><span class="line">				<span class="type">Pie</span>(endAngle: .degrees(card.bonusPercentRemaining <span class="operator">*</span> <span class="number">360</span>))</span><br><span class="line">					.opacity(<span class="type">Constants</span>.<span class="type">Pie</span>.opacity)</span><br><span class="line">					.overlay(</span><br><span class="line">						cardContents.padding(<span class="type">Constants</span>.<span class="type">Pie</span>.in<span class="keyword">set</span>)</span><br><span class="line">					)</span><br><span class="line">					.padding(<span class="type">Constants</span>.in<span class="keyword">set</span>)</span><br><span class="line">					.cardify(isFaceUp: card.isFaceUp)</span><br><span class="line">					.transition(.scale)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="type">Color</span>.clear</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<h2 id="4-Demo-matchedGeometryEffect"><a href="#4-Demo-matchedGeometryEffect" class="headerlink" title="4. Demo: matchedGeometryEffect"></a>4. Demo: matchedGeometryEffect</h2><blockquote>
<p><strong>dealing our cards out</strong></p>
</blockquote>
<p>æ€ä¹ˆå‘ç‰Œï¼Ÿæˆ‘ä»¬éœ€è¦é¦–å…ˆè®©å¡ç‰Œçš„å®¹å™¨è§†å›¾ <code>Aspect</code> å‡ºç°åœ¨å±å¹•ä¸­ï¼Œå½“å¡ç‰Œå®¹å™¨ä¸€å‡ºç°åˆ™å¼€å§‹å‘ç‰Œã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">	<span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">	        <span class="type">AspectVGrid</span>(items: viewModel.cards, aspectRatio: aspectRatio) &#123; card <span class="keyword">in</span></span><br><span class="line">	            <span class="keyword">if</span> isDealt(card)&#123;</span><br><span class="line">	                <span class="type">CardView</span>(card)</span><br><span class="line">	                    .aspectRatio(aspectRatio, contentMode: .fit)</span><br><span class="line">	                    .padding(<span class="number">8</span>)</span><br><span class="line">	                    .overlay(<span class="type">FlyingNumber</span>(number: scoreChange(causedBy: card)))</span><br><span class="line">	                    .zIndex(scoreChange(causedBy: card) <span class="operator">!=</span> <span class="number">0</span> <span class="operator">?</span> <span class="number">100</span> : <span class="number">0</span>)</span><br><span class="line">	                    .onTapGesture &#123;</span><br><span class="line">	                        choose(card)</span><br><span class="line">	                    &#125;</span><br><span class="line">	                    .transition(.offset(</span><br><span class="line">	                    	x: <span class="type">CGFloat</span>.random(in: <span class="operator">-</span><span class="number">1000</span><span class="operator">...</span><span class="number">1000</span>),</span><br><span class="line">	                    	y: <span class="type">CGFloat</span>.random(in: <span class="operator">-</span><span class="number">1000</span><span class="operator">...</span><span class="number">1000</span>)</span><br><span class="line">	                    ))</span><br><span class="line">	            &#125;</span><br><span class="line">	        &#125;</span><br><span class="line">	        .onAppear&#123;</span><br><span class="line">	            <span class="comment">// deal the cards</span></span><br><span class="line">	            withAnimation(.easeInOut(duration: <span class="number">2</span>)) &#123;</span><br><span class="line">	                <span class="keyword">for</span> card <span class="keyword">in</span> viewModel.cards &#123;</span><br><span class="line">	                    dealt.insert(card.id)</span><br><span class="line">	                &#125;</span><br><span class="line">	            &#125;</span><br><span class="line">	        &#125;</span><br><span class="line">	    &#125;</span><br><span class="line"></span><br><span class="line">	    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> dealt <span class="operator">=</span> <span class="type">Set</span>&lt;<span class="type">Card</span>.<span class="type">ID</span>&gt;()</span><br><span class="line"></span><br><span class="line">	    <span class="keyword">private</span> <span class="keyword">func</span> <span class="title function_">isDealt</span>(<span class="keyword">_</span> <span class="params">card</span>: <span class="type">Card</span>) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">	        dealt.contains(card.id)</span><br><span class="line">	    &#125;</span><br><span class="line"></span><br><span class="line">	    <span class="keyword">private</span> <span class="keyword">var</span> undealtCards: [<span class="type">Card</span>] &#123;</span><br><span class="line">	        viewModel.cards.filter&#123;<span class="operator">!</span>isDealt(<span class="variable">$0</span>)&#125;</span><br><span class="line">	    &#125;</span><br><span class="line">	    <span class="operator">...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ç”±äºå‘ç‰Œè¿™ä¸€åŠ¨ç”»åªä¸ UI æœ‰å…³ï¼Œä¸ model å’Œ viewModel éƒ½æ— å…³ï¼Œæ‰€ä»¥å¯ä»¥åˆ›å»ºä¸€ä¸ªç§æœ‰çš„ <code>@State</code> å˜é‡ <code>dealt</code> æ¥ç®¡ç†å‘ç‰Œçš„çŠ¶æ€ã€‚</li>
<li>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‡½æ•° <code>isDealt</code> æ¥åˆ¤æ–­å¡ç‰‡æ˜¯å¦å‘ç‰Œï¼Œ<code>undealtCards</code> ç”¨äºè·å–æœªå‘ç‰Œçš„å¡ç‰‡ã€‚</li>
<li>ä¸ºå¡ç‰‡çš„å‡ºç°æ·»åŠ  transitionï¼ˆä»éšæœºä½ç½®é£è‡³å¡ç‰‡ä½ç½®ï¼‰</li>
<li>å¡ç‰‡å®¹å™¨è§†å›¾ä¸­åªå‡ºç°å‘ç‰ŒçŠ¶æ€ä¸º <code>true</code> çš„å¡ç‰‡ã€‚</li>
</ul>
<p>ä½¿ç”¨é¢„è§ˆæ— æ³•è§‚å¯Ÿ <code>onAppear</code> çš„æ•ˆæœï¼Œè¿™é‡Œéœ€è¦ä½¿ç”¨æ¨¡æ‹Ÿå™¨è¿›è¡Œè§‚å¯Ÿã€‚</p>
<p>æˆ‘ä»¬å¸Œæœ›å¡ç‰‡ä¸æ˜¯ç›´æ¥å‘ˆç°åœ¨å±å¹•ä¸Šï¼Œè€Œæ˜¯é€šè¿‡ç‚¹å‡»æŸä¸€ä¸ªåœ°æ–¹ï¼Œå¼€å§‹éšæœºå‘ç‰Œã€‚åˆ›å»ºä¸€ä¸ª <code>deck</code> ç”¨äºè§¦å‘å‘ç‰Œäº‹ä»¶ã€‚å¹¶å°† <code>cards.onAppear()</code> ä¸­çš„åŠ¨ä½œæ”¾ç½®åœ¨ <code>deck.onTapGesture()</code> ä¸­ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            cards.foregroundColor(viewModel.color)</span><br><span class="line">            <span class="type">HStack</span> &#123;</span><br><span class="line">                score</span><br><span class="line">                <span class="type">Spacer</span>()</span><br><span class="line">                deck</span><br><span class="line">                <span class="type">Spacer</span>()</span><br><span class="line">                shuffle</span><br><span class="line">            &#125;</span><br><span class="line">            .font(.largeTitle)</span><br><span class="line">        &#125;</span><br><span class="line">        .padding()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="operator">...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">AspectVGrid</span>(items: viewModel.cards, aspectRatio: aspectRatio) &#123; card <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">if</span> isDealt(card)&#123;</span><br><span class="line">                <span class="type">CardView</span>(card)</span><br><span class="line">                    .aspectRatio(aspectRatio, contentMode: .fit)</span><br><span class="line">                    .padding(<span class="number">8</span>)</span><br><span class="line">                    .overlay(<span class="type">FlyingNumber</span>(number: scoreChange(causedBy: card)))</span><br><span class="line">                    .zIndex(scoreChange(causedBy: card) <span class="operator">!=</span> <span class="number">0</span> <span class="operator">?</span> <span class="number">100</span> : <span class="number">0</span>)</span><br><span class="line">                    .onTapGesture &#123;</span><br><span class="line">                        choose(card)</span><br><span class="line">                    &#125;</span><br><span class="line">                    .transition(.offset(</span><br><span class="line">                        x: <span class="type">CGFloat</span>.random(in: <span class="operator">-</span><span class="number">1000</span><span class="operator">...</span><span class="number">1000</span>),</span><br><span class="line">                        y: <span class="type">CGFloat</span>.random(in: <span class="operator">-</span><span class="number">1000</span><span class="operator">...</span><span class="number">1000</span>)</span><br><span class="line">                    ))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> deck: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="type">ForEach</span>(undealtCards) &#123; card <span class="keyword">in</span></span><br><span class="line">                <span class="type">CardView</span>(card)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .frame(width: deckWidth, height: deckWidth <span class="operator">/</span> aspectRatio)</span><br><span class="line">        .onTapGesture &#123;</span><br><span class="line">            <span class="comment">// deal the cards</span></span><br><span class="line">            withAnimation(.easeInOut(duration: <span class="number">2</span>)) &#123;</span><br><span class="line">                <span class="keyword">for</span> card <span class="keyword">in</span> viewModel.cards &#123;</span><br><span class="line">                    dealt.insert(card.id)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> deckWidth: <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">50</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-1-matchedGeometryEffect"><a href="#4-1-matchedGeometryEffect" class="headerlink" title="4.1 matchedGeometryEffect"></a>4.1 <code>matchedGeometryEffect</code></h3><p>æˆ‘ä»¬æƒ³è¦å¡ç‰‡ä» <code>deck</code> æ¶ˆå¤±åï¼Œå‡ºç°åœ¨ <code>AspectVGrid</code> ä¸­ã€‚é€šè¿‡åœ¨ <code>deck</code> å’Œ <code>AspectVGrid</code> ä¸¤ä¸ªåœ°æ–¹æ·»åŠ  <code>matchedGeometryEffect</code> æ¥å®ç°è¿™ä¸ªåŠ¨ç”»ã€‚</p>
<p>åœ¨å‘ç‰Œçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å‘ç°å¡ç‰‡åœ¨å‘å‡ºæ—¶ä¸ºé»‘è‰²çš„ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›å®ƒæ˜¯é»‘è‰²çš„ã€‚å½“æˆ‘ä»¬ä¸å¸Œæœ›å‡ºç°æŸä¸ªåŠ¨ç”»æ—¶ã€‚</p>
<p>è¿™é‡Œä½¿ç”¨ <code>.transition(.asymmetric(insertion: .identity, removal: .identity) </code> æ¥æ¸…æ¥šæ¶ˆå¤±å’Œå‡ºç°æ—¶çš„åŠ¨ç”»æ•ˆæœï¼Œå…¶ä¸­ï¼š</p>
<ul>
<li><code>.asymmetric</code> è¡¨ç¤ºæ’å…¥å’Œç§»é™¤çš„åŠ¨ç”»æ•ˆæœä¸åŒã€‚</li>
<li><code>insertion: .identity</code> è¡¨ç¤ºæ’å…¥æ—¶æ²¡æœ‰é¢å¤–çš„åŠ¨ç”»æ•ˆæœï¼ˆå³è§†å›¾å°†ç«‹å³å‡ºç°åœ¨å±å¹•ä¸Šï¼‰ã€‚</li>
<li><code>removal: .identity</code> æ„å‘³ç€åœ¨ç§»é™¤æ—¶åŒæ ·æ²¡æœ‰ä»»ä½•åŠ¨ç”»æ•ˆæœã€‚</li>
</ul>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGameView.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> cards: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">AspectVGrid</span>(items: viewModel.cards, aspectRatio: aspectRatio) &#123; card <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">if</span> isDealt(card)&#123;</span><br><span class="line">                <span class="type">CardView</span>(card)</span><br><span class="line">                    .matchedGeometryEffect(id: card.id, in: dealingNamespace)</span><br><span class="line">                    .transition(.asymmetric(insertion: .identity, removal: .identity))</span><br><span class="line">                    .aspectRatio(aspectRatio, contentMode: .fit)</span><br><span class="line">                    .padding(<span class="number">8</span>)</span><br><span class="line">                    .overlay(<span class="type">FlyingNumber</span>(number: scoreChange(causedBy: card)))</span><br><span class="line">                    .zIndex(scoreChange(causedBy: card) <span class="operator">!=</span> <span class="number">0</span> <span class="operator">?</span> <span class="number">100</span> : <span class="number">0</span>)</span><br><span class="line">                    .onTapGesture &#123;</span><br><span class="line">                        choose(card)</span><br><span class="line">                    &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Namespace</span> <span class="keyword">private</span> <span class="keyword">var</span> dealingNamespace</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> deck: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="type">ForEach</span>(undealtCards) &#123; card <span class="keyword">in</span></span><br><span class="line">                <span class="type">CardView</span>(card)</span><br><span class="line">                    .matchedGeometryEffect(id: card.id, in: dealingNamespace)</span><br><span class="line">                    .transition(.asymmetric(insertion: .identity, removal: .identity))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .frame(width: deckWidth, height: deckWidth <span class="operator">/</span> aspectRatio)</span><br><span class="line">        .onTapGesture &#123;</span><br><span class="line">            <span class="comment">// deal the cards</span></span><br><span class="line">            withAnimation(.easeInOut(duration: <span class="number">2</span>)) &#123;</span><br><span class="line">                <span class="keyword">for</span> card <span class="keyword">in</span> viewModel.cards &#123;</span><br><span class="line">                    dealt.insert(card.id)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> deckWidth: <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">50</span></span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šå¸¸åœ¨å‘ç‰Œæ—¶ï¼Œä¸ä¼šä¸€æ¬¡æ€§å‘å‡ºï¼Œå› æ­¤æˆ‘ä»¬ä¸ºå‘ç‰Œæ·»åŠ ä¸€äº›å»¶è¿Ÿã€‚æ¯ä¸€å¼ ç‰Œé—´éš” 0.15 s å‘å‡ºã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="operator">...</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> deck: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="type">ForEach</span>(undealtCards) &#123; card <span class="keyword">in</span></span><br><span class="line">                <span class="type">CardView</span>(card)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .frame(width: deckWidth, height: deckWidth <span class="operator">/</span> aspectRatio)</span><br><span class="line">        .onTapGesture &#123;</span><br><span class="line">            <span class="comment">// deal the cards</span></span><br><span class="line">            <span class="keyword">var</span> delay :<span class="type">TimeInterval</span> <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> card <span class="keyword">in</span> viewModel.cards &#123;</span><br><span class="line">            	withAnimation(.easeInOut(duration: <span class="number">1</span>).delay(delay)) &#123;</span><br><span class="line">                    <span class="keyword">_</span> <span class="operator">=</span> dealt.insert(card.id)</span><br><span class="line">                &#125;</span><br><span class="line">                delay <span class="operator">+=</span> <span class="number">0.15</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> deckWidth: <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">50</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-ä»£ç ä¼˜åŒ–"><a href="#4-2-ä»£ç ä¼˜åŒ–" class="headerlink" title="4.2 ä»£ç ä¼˜åŒ–"></a>4.2 ä»£ç ä¼˜åŒ–</h3><p>æå– constants å˜é‡å’ŒåŠ¨ç”»æ•ˆæœï¼Œ<code>onTapGesture</code> äº¤äº’åŠ¨ä½œã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiMemoryGameView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiMemoryGameView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">typealias</span> <span class="type">Card</span> <span class="operator">=</span> <span class="type">MemoryGame</span>&lt;<span class="type">String</span>&gt;.<span class="type">Card</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ObservedObject</span> <span class="keyword">var</span> viewModel: <span class="type">EmojiMemoryGame</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> aspectRatio: <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">2</span> <span class="operator">/</span> <span class="number">3</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> spacing: <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">4</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> delayInterval <span class="operator">=</span> <span class="number">0.15</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> deckWidth: <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">50</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> dealAnimation: <span class="type">Animation</span> <span class="operator">=</span> .easeInOut(duration: <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="operator">...</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Namespace</span> <span class="keyword">private</span> <span class="keyword">var</span> dealingNamespace</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> deck: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="type">ForEach</span>(undealtCards) &#123; card <span class="keyword">in</span></span><br><span class="line">                <span class="type">CardView</span>(card)</span><br><span class="line">                    .matchedGeometryEffect(id: card.id, in: dealingNamespace)</span><br><span class="line">                    .transition(.asymmetric(insertion: .identity, removal: .identity))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .frame(width: deckWidth, height: deckWidth <span class="operator">/</span> aspectRatio)</span><br><span class="line">        .onTapGesture &#123;</span><br><span class="line">            deal()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">func</span> <span class="title function_">deal</span>() &#123;</span><br><span class="line">        <span class="keyword">var</span> delay: <span class="type">TimeInterval</span> <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> card <span class="keyword">in</span> viewModel.cards &#123;</span><br><span class="line">            withAnimation(dealAnimation.delay(delay)) &#123;</span><br><span class="line">                <span class="keyword">_</span> <span class="operator">=</span> dealt.insert(card.id)</span><br><span class="line">            &#125;</span><br><span class="line">            delay <span class="operator">+=</span> <span class="number">0.15</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>code</category>
        <category>swift</category>
      </categories>
      <tags>
        <tag>cs193p</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸ªäººå‰ç«¯å­¦ä¹ è·¯å¾„åˆ†äº«ï½œé™„é¡¹ç›®åŠå¸¸ç”¨å·¥å…·</title>
    <url>/2025/02/19/%E4%B8%AA%E4%BA%BA%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E8%B7%AF%E5%BE%84%E5%88%86%E4%BA%AB%EF%BD%9C%E9%99%84%E9%A1%B9%E7%9B%AE%E5%8F%8A%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/</url>
    <content><![CDATA[<p>æœ¬æ–‡ä¸ºä¸ªäººå‰ç«¯å­¦ä¹ è·¯å¾„åˆ†äº«ï¼Œä¸»è¦åˆ†äº«å‰ç«¯å­¦ä¹ è·¯çº¿ï¼Œå‰ç«¯ä¸‰ä»¶å¥—ï¼Œå‰ç«¯é¡¹ç›®æ¨èï¼Œå‰ç«¯æ¡†æ¶ï¼Œå‰ç«¯ç›¸å…³å·¥å…·ï¼Œå…¶ä»–å¸¸ç”¨å·¥å…·èµ„æºç­‰ã€‚</p>
<span id="more"></span>

<ul>
<li><p><strong>äº†è§£å­¦ä¹ è·¯çº¿ï¼ˆ10 åˆ†é’Ÿï¼‰</strong></p>
<blockquote>
<p>å¿«é€Ÿäº†è§£å‰ç«¯å’Œå…¨æ ˆçš„æŠ€æœ¯æ ˆå’Œå­¦ä¹ è·¯çº¿ï¼ˆéå¸¸é‡è¦ï¼‰ã€‚</p>
</blockquote>
<ul>
<li><p>**å‰ç«¯å­¦ä¹ è·¯çº¿ (æ²¹ç®¡ï¼Œçº¦ 9 åˆ†é’Ÿ)**ï¼š<a href="https://www.youtube.com/watch?v=Tef1e9FiSR0">The Complete Frontend Developer Roadmap 2024</a></p>
</li>
<li><p><strong>å…¨æ ˆå­¦ä¹ è·¯çº¿ï¼ˆæ²¹ç®¡ï¼Œ15 åˆ†é’Ÿï¼‰</strong>ï¼š<a href="https://www.youtube.com/watch?v=GxmfcnU3feo">The Complete Web Development Roadmap 2024</a></p>
</li>
<li><p><strong>å‰ç«¯ä¸‰ä»¶å¥—ï¼ˆ2-3 ä¸ªæœˆï¼‰</strong></p>
<ul>
<li><p><strong>HTML+CSSï¼ˆ1 ä¸ªæœˆï¼‰</strong>ï¼š<a href="https://www.bilibili.com/video/BV14J4114768/?spm_id_from=333.337.search-card.all.click&vd_source=9a40fb262d68cbd3e674569c050a1028">é»‘é©¬ pink é›¶åŸºç¡€ h5+css3+ç§»åŠ¨ç«¯è§†é¢‘æ•™ç¨‹ï½œ B ç«™ pink</a></p>
<blockquote>
<p>pink è€å¸ˆçš„è¯¾ç¨‹åˆ†èŠ‚éƒ½å¾ˆç»†å¾ˆçŸ­ï¼ˆ1-10 åˆ†é’Ÿ&#x2F;èŠ‚ï¼‰ï¼Œè¯¾ç¨‹åˆ†èŠ‚å¾ˆç»†ï¼Œä¸€å°èŠ‚çš„æ—¶é•¿å¾ˆçŸ­ï¼ˆå¤§éƒ¨åˆ† 5 -15 åˆ†é’Ÿï¼‰ï¼Œå¯ä»¥æ ¹æ®æ¯å¤©çš„æ—¶é—´è°ƒæ•´è§‚çœ‹çš„æ•°é‡ï¼Œå»ºè®®æ¯å¤©éƒ½è¦çœ‹ï¼Œä¸è®ºçœ‹å¤šå°‘ã€‚ï¼ˆæ¯å¤©å®šä¸€å°èŠ‚çš„ä»»åŠ¡ï¼Œèƒ½å‡å°å­¦ä¹ çš„é˜»åŠ›ï¼Œé€šå¸¸ä¼šæ˜¯è¶…é¢å®Œæˆï¼‰</p>
</blockquote>
</li>
<li><p><strong>JavaScriptï¼ˆ1 ä¸ªæœˆï¼‰</strong></p>
<blockquote>
<p>çœ‹å®Œç¬¬ä¸€ä¸ªï¼Œç¬¬äºŒä¸ªä»ç¬¬ 191 é›†å¼€å§‹çœ‹ï¼Œåç»­å¦‚æœé‡åˆ°ä¸æ˜ç™½çš„ï¼Œå†å¾€å‰è·³åˆ°å¯¹åº”èŠ‚ç‚¹çœ‹å³å¯ã€‚å¦‚æœç”±äºç§‘å­¦ä¸Šç½‘é—®é¢˜ï¼Œç¬¬ä¸€ä¸ªæ— æ³•è§‚çœ‹ï¼Œå»ºè®®ä»ç¬¬äºŒä¸ªç¬¬ 1 é›†å¼€å§‹çœ‹ã€‚</p>
</blockquote>
<ul>
<li><strong>JS åŸºç¡€ï¼ˆä¸€å‘¨ï¼‰</strong>ï¼š<a href="https://www.youtube.com/watch?v=PkZNo7MFNFg&t=44s">JavaScript Beginer ï½œæ²¹ç®¡ freeCodeCamp</a></li>
<li><strong>js web apiï¼ˆä¸€ä¸ªæœˆï¼‰</strong>ï¼š<a href="https://www.bilibili.com/video/BV1Sy4y1C7ha?spm_id_from=333.788.videopod.episodes&vd_source=9a40fb262d68cbd3e674569c050a1028&p=191">JavaScript å‰ç«¯è¯¾ç¨‹-dom-bom-js-es6 æ–°è¯­æ³•ï½œ B ç«™ pink è€å¸ˆ</a></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>ç»ƒä¹ é¡¹ç›®æ¨è</strong>ï¼š</p>
<blockquote>
<p>å»ºè®®åœ¨å­¦å®Œ web api åå¯ä»¥åˆé€‚çš„é¡¹ç›®åšï¼Œè¾¹åšè¾¹å­¦ React æˆ–è€… Vueï¼ŒReact æˆ– Vue å­¦å¾—å·®ä¸å¤šäº†ï¼ŒåŒæ ·åœ¨è¿™æ‰¾é¡¹ç›®åšã€‚</p>
</blockquote>
<ul>
<li>è¿™ä¸ªå°±å¤Ÿç”¨äº†ï¼š <a href="https://github.com/florinpop17/app-ideas">florinpop17 ï½œ app-ideas ï½œ github</a>ã€‚æœ‰åˆ†åˆ«å¯¹åº”åˆå­¦è€…ã€ä¸­çº§ã€é«˜çº§ä¸‰ä¸ªé˜¶æ®µçš„é¡¹ç›®å’Œå‚è€ƒæºç ã€‚</li>
<li>è¡¥å……é¡¹ç›®ï¼š<a href="https://github.com/KelvinQiu802/project-ideas?tab=readme-ov-file">kelvinQiu802 ï½œé¡¹ç›®æ„æƒ³ï½œ github</a></li>
</ul>
</li>
<li><p><strong>å‰ç«¯æ¡†æ¶</strong>ï¼š</p>
<blockquote>
<p>React çš„è§†é¢‘æ•™ç¨‹è¾ƒå°‘ï¼Œå»ºè®®ç›´æ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œéå¸¸ç®€æ´æ˜“æ‡‚ï¼Œå°ç™½æ¨èã€‚</p>
</blockquote>
<ul>
<li><strong>React</strong>ï¼š<a href="https://react.docschina.org/learn">React ä¸­æ–‡å®˜ç½‘</a></li>
</ul>
</li>
<li><p><strong>å‰ç«¯ç›¸å…³å·¥å…·æˆ–èµ„æº</strong></p>
<ul>
<li>èµ„æºé›†é”¦ï¼š<a href="https://docschina.org/">å°è®°ä¸­æ–‡</a>ã€‚æ”¶é›†äº†ç¼–è¯‘æ„å»ºï¼ˆwebpackã€babel ç­‰ï¼‰ã€å‰ç«¯æ¡†æ¶ï¼ˆReactã€Vueã€Angularï¼‰ã€å‰ç«¯ç»„ä»¶åº“ï¼ˆAntDesignã€MaterialUIã€ï¼‰åŠå¯è§†åŒ–å›¾è¡¨ç»„ä»¶åº“ç­‰å¤§é‡å‰ç«¯å¼€å‘å­¦ä¹ åœ°å€ã€‚</li>
<li>UI ç»„ä»¶æºç ï¼š<a href="https://uiverse.io/">uiverse</a>ï¼Œ<a href="https://codepen.io/trending">codePen</a></li>
<li>css èƒŒæ™¯æ¸å˜ï¼š<a href="https://webgradients.com/">css ï½œ webgradients</a></li>
<li>css åŠ¨ç”»ï¼š<a href="https://animista.net/">animista</a></li>
</ul>
</li>
<li><p><strong>å…¶ä»–å¸¸ç”¨å·¥å…·èµ„æº</strong></p>
<ul>
<li>è®¡ç®—æœºè‡ªå­¦æŒ‡å—ï¼š<a href="https://csdiy.wiki/">cs è‡ªå­¦æŒ‡å—</a>ã€‚â­â­â­â­â­ï¼Œè¶…çº§å®è—çš„åšå®¢ï¼ŒåŒ…å«äº†ï¼šå¿…å­¦å·¥å…·ï¼ˆç§‘å­¦ä¸Šç½‘ï¼Œgitï¼Œvimï¼Œdockerâ€¦ï¼‰ã€æ•°å­¦åŸºç¡€ï¼Œç¼–ç¨‹åŸºç¡€ï¼ˆpythonã€cã€javaã€ï¼‰ã€æ•°æ®ç»“æ„ï¼Œäººå·¥æ™ºèƒ½ï¼Œæ·±åº¦å­¦ä¹ ç­‰å¤§é‡ä¼˜ç§€çš„ cs å›½å†…å¤–è¯¾ç¨‹æ”¶é›†åŠç»éªŒåˆ†äº«ã€‚</li>
<li>ç½‘é¡µè½¬ markdown æµè§ˆå™¨æ’ä»¶ï¼š<strong>obsidian webcliper</strong>ã€‚â­â­â­â­â­ï¼Œç½‘é¡µè½¬å­˜ markdown è‡ªåŠ¨ä¿å­˜åœ¨ obsidian ä»“åº“æ–‡ä»¶å¤¹ï¼Œå¯ä¿®æ”¹å¹¶å¯¼å‡ºä¸º pdf æ ¼å¼ï¼Œç›¸æ¯”ç›´æ¥å¯¼å‡ºå›¾ç‰‡ pdf æ›´æ–¹ä¾¿ç¾è§‚ã€‚æ•ˆæœå¦‚ä¸‹ï¼ˆä»å·¦è‡³å³ä¸ºç½‘ç«™ã€markdownã€pdfï¼‰ã€‚<br><img src="/2025/02/19/%E4%B8%AA%E4%BA%BA%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E8%B7%AF%E5%BE%84%E5%88%86%E4%BA%AB%EF%BD%9C%E9%99%84%E9%A1%B9%E7%9B%AE%E5%8F%8A%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/%E4%B8%AA%E4%BA%BA%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E8%B7%AF%E5%BE%84%E5%88%86%E4%BA%AB%EF%BD%9C%E9%99%84%E9%A1%B9%E7%9B%AE%E5%8F%8A%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7-1.png" alt="ä¸ªäººå‰ç«¯å­¦ä¹ è·¯å¾„åˆ†äº«ï½œé™„é¡¹ç›®åŠå¸¸ç”¨å·¥å…·-1"></li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>code</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>Stanford-cs193p-10ï½œEmojiArt</title>
    <url>/2025/01/24/Stanford-cs193p-10%EF%BD%9CEmojiArt/</url>
    <content><![CDATA[<p>æœ¬æ–‡æ˜¯æ–¯å¦ç¦å¤§å­¦ cs193p å…¬å¼€è¯¾ç¨‹ç¬¬ 10 é›†çš„ç›¸å…³ç¬”è®°ã€‚</p>
<span id="more"></span>

<p>cs193p è¯¾ç¨‹ä»‹ç»:</p>
<blockquote>
<p>The lectures for the Spring 2023 version of Stanford Universityâ€™s course CS193p (Developing Applications for iOS using SwiftUI) were given in person but, unfortunately, were not video recorded. However, we did capture the laptop screen of the presentations and demos as well as the associated audio. You can watch these screen captures using the links below. Youâ€™ll also find links to supporting material that was distributed to students during the quarter (homework, demo code, etc.).</p>
</blockquote>
<p>cs193p è¯¾ç¨‹ç½‘å€: [<a href="https://cs193p.sites.stanford.edu/2023]">https://cs193p.sites.stanford.edu/2023]</a></p>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è¿™å ‚è¯¾ä¼šä½¿ç”¨ MVVM æ¶æ„å†åˆ›å»ºä¸€ä¸ª appï¼šEmojiArtï¼Œå¹¶ä¸”åœ¨å½“ä¸­å®ç°å¤–éƒ¨ URL å’Œå†…éƒ¨ String çš„æ‹–æ‹½ï¼Œmultiple MVVMã€‚</p>
<h2 id="1-MVVM-åˆå®ç°"><a href="#1-MVVM-åˆå®ç°" class="headerlink" title="1. MVVM åˆå®ç°"></a>1. MVVM åˆå®ç°</h2><h3 id="1-1-åˆ›å»º-Model-EmojiArt"><a href="#1-1-åˆ›å»º-Model-EmojiArt" class="headerlink" title="1.1 åˆ›å»º Model EmojiArt"></a>1.1 åˆ›å»º <code>Model</code> EmojiArt</h3><p>æ–°å»ºä¸€ä¸ª swift æ–‡ä»¶ï¼Œç”¨äºåˆ›å»º <code>EmojiArt</code>ï¼ˆModelï¼‰å­˜å‚¨èƒŒæ™¯ã€è¡¨æƒ…ç¬¦å·ã€å¤§å°å’Œä½ç½®ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiArt.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiArt</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> background: <span class="type">URL</span>?</span><br><span class="line">    <span class="keyword">var</span> emojis <span class="operator">=</span> [<span class="type">Emoji</span>]()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Emoji</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> string: <span class="type">String</span></span><br><span class="line">        <span class="keyword">var</span> position: <span class="type">Position</span></span><br><span class="line">        <span class="keyword">var</span> size: <span class="type">Int</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">Position</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> x: <span class="type">Int</span></span><br><span class="line">            <span class="keyword">var</span> y: <span class="type">Int</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-2-åˆ›å»º-ViewModel-EmojiArtDocument"><a href="#1-2-åˆ›å»º-ViewModel-EmojiArtDocument" class="headerlink" title="1.2 åˆ›å»º ViewModel EmojiArtDocument"></a>1.2 åˆ›å»º <code>ViewModel</code> EmojiArtDocument</h3><p>æ–°å»ºä¸€ä¸ª swift æ–‡ä»¶ï¼Œç”¨äºåˆ›å»º <code>EmojiArtDocument</code> (ViewModel)ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiArtDocument.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiArtDocument</span>:<span class="title class_ inherited__">ObservableObject</span> &#123;</span><br><span class="line">    <span class="keyword">typealias</span> <span class="type">Emoji</span> <span class="operator">=</span> <span class="type">EmojiArt</span>.<span class="type">Emoji</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> emojiArt <span class="operator">=</span> <span class="type">EmojiArt</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> emojis: [<span class="type">Emoji</span>] &#123;</span><br><span class="line">        emojiArt.emojis</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> background: <span class="type">URL</span>?&#123;</span><br><span class="line">        emojiArt.background</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">setBackground</span>(<span class="keyword">_</span> <span class="params">url</span>: <span class="type">URL</span>?) &#123;</span><br><span class="line">        emojiArt.background <span class="operator">=</span> url</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-3-åˆ›å»º-View-EmojiArtDocument"><a href="#1-3-åˆ›å»º-View-EmojiArtDocument" class="headerlink" title="1.3 åˆ›å»º View EmojiArtDocument"></a>1.3 åˆ›å»º <code>View</code> EmojiArtDocument</h3><p>åˆ›å»ºä¸€ä¸ª <code>swiftUI</code> æ–‡ä»¶ï¼Œç”¨äºåˆ›å»º <code>EmojiArtDocumentView</code> (View)ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiArtDocumentView.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiArtDocumentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> emojis <span class="operator">=</span> <span class="string">&quot;ğŸ‘»ğŸğŸ˜ƒğŸ¤ªâ˜¹ï¸ğŸ¤¯ğŸ¶ğŸ­ğŸ¦ğŸµğŸ¦†ğŸğŸ¢ğŸ„ğŸ–ğŸŒ²ğŸŒ´ğŸŒµğŸ„ğŸŒğŸŒğŸ”¥ğŸŒˆğŸŒ§ï¸ğŸŒ¨ï¸â˜ï¸â›„ï¸â›³ï¸ğŸš—ğŸš™ğŸš“ğŸš²ğŸ›ºğŸï¸ğŸš˜âœˆï¸ğŸ›©ï¸ğŸš€ğŸšğŸ°ğŸ â¤ï¸ğŸ’¤â›µï¸&quot;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> paletteEmojiSize:<span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">40</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> (spacing:<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="type">Color</span>.yellow</span><br><span class="line">            <span class="type">ScrollingEmojis</span>(emojis)</span><br><span class="line">                .font(.system(size: paletteEmojiSize))</span><br><span class="line">                .padding(.horizontal)</span><br><span class="line">				<span class="comment">// éšè—åº•éƒ¨çš„æ»šåŠ¨æ </span></span><br><span class="line">                .scrollIndicators(.hidden)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸Œæœ›æ»šåŠ¨è¡¨æƒ…åœ¨åº•éƒ¨</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ScrollingEmojis</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> emojis: [<span class="type">String</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(<span class="keyword">_</span> <span class="params">emojis</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="comment">// String.init ç”¨äºåˆ›å»ºå­—ç¬¦ä¸²å®ä¾‹ï¼Œä¾‹å¦‚let Str = String(123), ç­‰ä»·äºlet str = String.init(123)</span></span><br><span class="line">		<span class="comment">// è¿™é‡Œä½œç”¨æ˜¯å°† emojis:String è½¬ä¸º [String] ç±»å‹</span></span><br><span class="line">        <span class="keyword">self</span>.emojis <span class="operator">=</span> emojis.uniqued.map(<span class="type">String</span>.<span class="keyword">init</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ScrollView</span>(.horizontal)&#123;</span><br><span class="line">            <span class="type">HStack</span> &#123;</span><br><span class="line">                <span class="type">ForEach</span>(emojis, id:\.<span class="keyword">self</span>) &#123; emoji <span class="keyword">in</span></span><br><span class="line">                    <span class="type">Text</span>(emoji)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#<span class="type">Preview</span> &#123;</span><br><span class="line">    <span class="type">EmojiArtDocumentView</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶çš„è§†å›¾å¦‚ä¸‹ï¼š<br><img src="/2025/01/24/Stanford-cs193p-10%EF%BD%9CEmojiArt/Stanford-cs193p-10%EF%BD%9CEmojArt-1.png" alt="Stanford-cs193p-10ï½œEmojArt-1"></p>
<h2 id="2-åŠŸèƒ½æ‰©å±•ä¸æ”¹è¿›"><a href="#2-åŠŸèƒ½æ‰©å±•ä¸æ”¹è¿›" class="headerlink" title="2. åŠŸèƒ½æ‰©å±•ä¸æ”¹è¿›"></a>2. åŠŸèƒ½æ‰©å±•ä¸æ”¹è¿›</h2><h3 id="2-1-æ·»åŠ èƒŒæ™¯æ”¯æŒ"><a href="#2-1-æ·»åŠ èƒŒæ™¯æ”¯æŒ" class="headerlink" title="2.1 æ·»åŠ èƒŒæ™¯æ”¯æŒ"></a>2.1 æ·»åŠ èƒŒæ™¯æ”¯æŒ</h3><p>æ·»åŠ ä¸€ä¸ªç§æœ‰è§†å›¾å˜é‡ <code>documentBody</code>ï¼Œç¡®ä¿èƒŒæ™¯å¤–éƒ¨åŒºåŸŸä¸ºç™½è‰²ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiArtDocumentView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiArtDocumentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="meta">@ObservedObject</span> <span class="keyword">var</span> document: <span class="type">EmojiArtDocument</span></span><br><span class="line"></span><br><span class="line"> 	<span class="operator">...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> documentBody: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="comment">//å¸Œæœ› å›¾ç‰‡ä¸¤è¾¹æ˜¯ç™½è‰²çš„ï¼ˆæœ€åº•å±‚ä¸ºç™½è‰²ï¼‰</span></span><br><span class="line">            <span class="type">Color</span>.white</span><br><span class="line">            <span class="type">ForEach</span>(document.emojis) &#123; emoji <span class="keyword">in</span></span><br><span class="line">                <span class="type">Text</span>(emoji.string)</span><br><span class="line">                    .font(emoji.font)</span><br><span class="line">                    .position(emoji.position)</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="operator">...</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-2-æ·»åŠ -ObservedObject"><a href="#2-2-æ·»åŠ -ObservedObject" class="headerlink" title="2.2 æ·»åŠ  ObservedObject"></a>2.2 æ·»åŠ  <code>ObservedObject</code></h3><p>åœ¨ <code>EmojiArtApp</code> ä¸­åˆ›å»º <code>EmojiArtDocument</code> çš„çŠ¶æ€å¯¹è±¡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiArtApp.swift</span></span><br><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">@main</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiArtApp</span>: <span class="title class_ inherited__">App</span> &#123;</span><br><span class="line">    <span class="meta">@StateObject</span> <span class="keyword">var</span> defaultDocument <span class="operator">=</span> <span class="type">EmojiArtDocument</span>()</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">Scene</span> &#123;</span><br><span class="line">        <span class="type">WindowGroup</span> &#123;</span><br><span class="line">            <span class="type">EmojiArtDocumentView</span>(document: defaultDocument)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶è¿˜å‡ºç°ä¸€ä¸ªé”™è¯¯ <code>Referencing initializer &#39;init(_:content:)&#39; on &#39;ForEach&#39; requires that &#39;EmojiArtDocument.Emoji&#39; (aka &#39;EmojiArt.Emoji&#39;) conform to &#39;Identifiable&#39;</code> è¡¨æ˜éœ€è¦ <code>Emoji</code> éµå¾ª <code>Identifiable</code> åè®®ã€‚</p>
<h3 id="2-3-å®ç°-Identifiable-åè®®"><a href="#2-3-å®ç°-Identifiable-åè®®" class="headerlink" title="2.3 å®ç° Identifiable åè®®"></a>2.3 å®ç° <code>Identifiable</code> åè®®</h3><p>é€šè¿‡å”¯ä¸€æ ‡è¯†ç¬¦æ”¯æŒ ForEach çš„è¿­ä»£ï¼Œå¹¶ä¸ºè¡¨æƒ…ç¬¦å·æä¾›æ·»åŠ æ–¹æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiArt.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiArt</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> background: <span class="type">URL</span>?</span><br><span class="line">    <span class="comment">// ç¡®ä¿åªæœ‰ Model å¯ä»¥ä¿®æ”¹emojisï¼Œå…¶ä½™åªèƒ½è¯»å–</span></span><br><span class="line">    <span class="keyword">private(set)</span> <span class="keyword">var</span> emojis <span class="operator">=</span> [<span class="type">Emoji</span>]()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// è®¾å®šåˆå§‹ id å€¼ä¸º 0</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> uniqueEmojiId <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">addEmoji</span>(<span class="keyword">_</span> <span class="params">emoji</span>: <span class="type">String</span>, <span class="params">at</span> <span class="params">position</span>: <span class="type">Emoji</span>.<span class="type">Position</span>, <span class="params">size</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        uniqueEmojiId <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">        emojis.append(<span class="type">Emoji</span>(</span><br><span class="line">            string: emoji,</span><br><span class="line">            position: position,</span><br><span class="line">            size: size,</span><br><span class="line">            id: uniqueEmojiId</span><br><span class="line">        ))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Emoji</span> : <span class="title class_ inherited__">Identifiable</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> string: <span class="type">String</span></span><br><span class="line">        <span class="keyword">var</span> position: <span class="type">Position</span></span><br><span class="line">        <span class="keyword">var</span> size: <span class="type">Int</span></span><br><span class="line">        <span class="comment">// æ¯æ¬¡æ·»åŠ è¡¨æƒ…ç¬¦å·æ—¶ï¼Œéƒ½ä¼šä½¿id+1</span></span><br><span class="line">        <span class="keyword">var</span> id: <span class="type">Int</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">Position</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> x: <span class="type">Int</span></span><br><span class="line">            <span class="keyword">var</span> y: <span class="type">Int</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¸ºè¡¨æƒ…æ•°ç»„æ·»åŠ è¡¨æƒ…çš„æ“ä½œå±äºç”¨æˆ·æ„å›¾ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>ViewModel</code> EmojiArtDocument ä¸­æ·»åŠ  addEmoji æ–¹æ³•ä»¥ä¾¿åœ¨ UI è§†å›¾ä¸­è°ƒç”¨ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiArtDocument.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiArtDocument</span>: <span class="title class_ inherited__">ObservableObject</span> &#123;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">addEmoji</span>(<span class="keyword">_</span> <span class="params">emoji</span>:<span class="type">String</span>,<span class="params">at</span> <span class="params">position</span>:<span class="type">Emoji</span>.<span class="type">Position</span>,<span class="params">size</span>:<span class="type">CGFloat</span>) &#123;</span><br><span class="line">        emojiArt.addEmoji(emoji, at: position, size: <span class="type">Int</span>(size))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶ <code>EmojiArtDocumentView</code> ä¼šå‘ç°æœ‰é”™è¯¯ <code>Value of type &#39;EmojiArtDocument.Emoji&#39; (aka &#39;EmojiArt.Emoji&#39;) has no member &#39;font&#39;</code>ï¼Œå³ Emoji ç»“æ„ä½“æ²¡æœ‰ font æˆå‘˜ã€‚<code>font</code> å±äº UI è§†å›¾çš„ç»„æˆï¼Œè€Œ Emoji å±äº Model ï¼Œæ— æ³•ä½¿å¾— <code>font</code> å‡ºç°åœ¨ Model ä¸­ï¼Œä½†å¯ä»¥ä½¿ç”¨ extension ä¸º Emoji æ·»åŠ æ‰©å±•ï¼Œå°†è¿™ä¸ªæ‰©å±•æ·»åŠ åœ¨ ViewModel ä¸­ä¼šæ›´å¥½ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiArtDocument.swift</span></span><br><span class="line"></span><br><span class="line"><span class="operator">...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">EmojiArt</span>.<span class="type">Emoji</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> font: <span class="type">Font</span> &#123;</span><br><span class="line">        <span class="type">Font</span>.system(size: <span class="type">CGFloat</span>(size))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å›åˆ° Viewï¼Œ<code>.position</code> ä»ç„¶ä¼šæŠ¥é”™ <code>Cannot convert value of type &#39;EmojiArt.Emoji.Position&#39; to expected argument type &#39;CGPoint&#39;</code>ã€‚</p>
<p>æˆ‘ä»¬å°† View ä¸­çš„é»„è‰²èƒŒæ™¯æ›¿æ¢ä¸º <code>documentBody</code>ï¼Œå¸Œæœ›åˆ©ç”¨ GeometryReader æ¥è·å–è¿™ä¸ª Emoji åœ¨è§†å›¾ä¸­çš„ä½ç½®ï¼Œåœ¨ <code>ViewModel</code> ä¸­æ·»åŠ ä¸€ä¸ªæ‰©å±•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiArtDocumentView.swift</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiArtDocumentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="meta">@ObservedObject</span> <span class="keyword">var</span> document: <span class="type">EmojiArtDocument</span></span><br><span class="line"></span><br><span class="line"> 	<span class="operator">...</span></span><br><span class="line"><span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">	<span class="type">VStack</span> (spacing:<span class="number">0</span>)&#123;</span><br><span class="line">		documentBody</span><br><span class="line">		<span class="type">ScrollingEmojis</span>(emojis)</span><br><span class="line">			.font(.system(size: paletteEmojiSize))</span><br><span class="line">			.padding(.horizontal)</span><br><span class="line">			.scrollIndicators(.hidden)</span><br><span class="line">	&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> documentBody: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">	   <span class="type">GeometryReader</span> &#123; geometry <span class="keyword">in</span></span><br><span class="line">		   <span class="type">ZStack</span> &#123;</span><br><span class="line">			   <span class="comment">//å¸Œæœ› å›¾ç‰‡ä¸¤è¾¹æ˜¯ç™½è‰²çš„ï¼ˆæœ€åº•å±‚ä¸ºç™½è‰²ï¼‰</span></span><br><span class="line">			   <span class="type">Color</span>.white</span><br><span class="line">			   <span class="type">ForEach</span>(document.emojis) &#123; emoji <span class="keyword">in</span></span><br><span class="line">				   <span class="type">Text</span>(emoji.string)</span><br><span class="line">					   .font(emoji.font)</span><br><span class="line">					   .position(emoji.position.in(geometry))</span><br><span class="line">			   &#125;</span><br><span class="line">		   &#125;</span><br><span class="line">	   &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="operator">...</span></span><br><span class="line"></span><br><span class="line">#<span class="type">Preview</span> &#123;</span><br><span class="line">    <span class="type">EmojiArtDocumentView</span>(document: <span class="type">EmojiArtDocument</span>())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiArtDocument.swift</span></span><br><span class="line"></span><br><span class="line"><span class="operator">...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">EmojiArt</span>.<span class="type">Emoji</span>.<span class="type">Position</span> &#123;</span><br><span class="line">	<span class="keyword">func</span> <span class="title function_">`in`</span>(<span class="keyword">_</span> <span class="params">geometry</span>:<span class="type">GeometryProxy</span>) -&gt; <span class="type">CGPoint</span> &#123;</span><br><span class="line">		<span class="comment">// center ä¸ºé¡µé¢ä¸­å¿ƒ</span></span><br><span class="line">		<span class="comment">//.frame().center é€šè¿‡æ‰©å±•å®ç°ï¼Œè§extension.swift</span></span><br><span class="line">		<span class="keyword">let</span> center <span class="operator">=</span> geometry.frame(in: .local).center</span><br><span class="line">        <span class="keyword">return</span> <span class="type">CGPoint</span>(x: center.x <span class="operator">+</span> <span class="type">CGFloat</span>(x), y: center.y <span class="operator">-</span> <span class="type">CGFloat</span>(y))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>Keyword &#39;in&#39; cannot be used as an identifier here</code>, <code>in</code> ä½œä¸ºå¸¸ç”¨çš„é—­åŒ…ä¸­çš„å…³é”®è¯ï¼Œä¸èƒ½ç”¨ä½œå‡½æ•°åç§°ï¼Œéœ€è¦ä¸ºå…¶æ·»åŠ åå¼•å·æ‰èƒ½æ­£å¸¸ä½¿ç”¨ã€‚</li>
</ul>
<p>åœ¨ ViewModel ä¸­æ·»åŠ åˆå§‹åŒ–ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiArtDocument.swift</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmojiArtDocument</span>: <span class="title class_ inherited__">ObservableObject</span> &#123;</span><br><span class="line">	<span class="operator">...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>() &#123;</span><br><span class="line">        emojiArt.addEmoji(<span class="string">&quot;ğŸš´&quot;</span>, at: .<span class="keyword">init</span>(x: <span class="operator">-</span><span class="number">200</span>, y: <span class="operator">-</span><span class="number">150</span>), size: <span class="number">200</span>)</span><br><span class="line">        emojiArt.addEmoji(<span class="string">&quot;ğŸ”¥&quot;</span>, at: .<span class="keyword">init</span>(x: <span class="number">150</span>, y: <span class="number">150</span>), size: <span class="number">200</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="operator">...</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶çš„é¢„è§ˆå¦‚ä¸‹ï¼š</p>
<p><img src="/2025/01/24/Stanford-cs193p-10%EF%BD%9CEmojiArt/Stanford-cs193p-10%EF%BD%9CEmojArt-2.png" alt="Stanford-cs193p-10ï½œEmojArt-2"></p>
<h2 id="3-èƒŒæ™¯å›¾ç‰‡å¢å¼º"><a href="#3-èƒŒæ™¯å›¾ç‰‡å¢å¼º" class="headerlink" title="3. èƒŒæ™¯å›¾ç‰‡å¢å¼º"></a>3. èƒŒæ™¯å›¾ç‰‡å¢å¼º</h2><h3 id="3-1-AsyncImage-èƒŒæ™¯å›¾ç‰‡æ·»åŠ "><a href="#3-1-AsyncImage-èƒŒæ™¯å›¾ç‰‡æ·»åŠ " class="headerlink" title="3.1 AsyncImage èƒŒæ™¯å›¾ç‰‡æ·»åŠ "></a>3.1 <code>AsyncImage</code> èƒŒæ™¯å›¾ç‰‡æ·»åŠ </h3><p><code>AsyncImage</code> åœ¨å¤–éƒ¨è·å–å›¾åƒæ—¶ä¼šæ”¾ç½®ä¸€ä¸ªç°è‰²ç›’å­ï¼Œå½“å›¾åƒè¿”å›æ—¶ï¼Œä¼šå¼‚æ­¥æ˜¾ç¤ºã€‚è®¾å®šèƒŒæ™¯ä½ç½®ä¸º geometry ä¸­çš„åŸç‚¹ï¼ˆ0,0ï¼‰ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiArtDocumentView.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiArtDocumentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="keyword">typealias</span> <span class="type">Emoji</span> <span class="operator">=</span> <span class="type">EmojiArt</span>.<span class="type">Emoji</span></span><br><span class="line"></span><br><span class="line">	<span class="operator">...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> documentBody: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">GeometryReader</span> &#123; geometry <span class="keyword">in</span></span><br><span class="line">            <span class="type">ZStack</span> &#123;</span><br><span class="line">                <span class="comment">//å¸Œæœ› å›¾ç‰‡ä¸¤è¾¹æ˜¯ç™½è‰²çš„ï¼ˆæœ€åº•å±‚ä¸ºç™½è‰²ï¼‰</span></span><br><span class="line">                <span class="type">Color</span>.white</span><br><span class="line">                <span class="type">AsyncImage</span>(url: document.background)</span><br><span class="line">                    .position(<span class="type">Emoji</span>.<span class="type">Position</span>.zero.in(geometry))</span><br><span class="line">                <span class="type">ForEach</span>(document.emojis) &#123; emoji <span class="keyword">in</span></span><br><span class="line">                    <span class="type">Text</span>(emoji.string)</span><br><span class="line">                        .font(emoji.font)</span><br><span class="line">                        .position(emoji.position.in(geometry))</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiArt.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiArt</span> &#123;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Emoji</span> : <span class="title class_ inherited__">Identifiable</span>&#123;</span><br><span class="line">        <span class="operator">...</span></span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">Position</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> x: <span class="type">Int</span></span><br><span class="line">            <span class="keyword">var</span> y: <span class="type">Int</span></span><br><span class="line">            <span class="keyword">static</span> <span class="keyword">let</span> zero <span class="operator">=</span> <span class="keyword">Self</span>(x: <span class="number">0</span>, y: <span class="number">0</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="4-æ‹–æ‹½åŠŸèƒ½å®ç°"><a href="#4-æ‹–æ‹½åŠŸèƒ½å®ç°" class="headerlink" title="4. æ‹–æ‹½åŠŸèƒ½å®ç°"></a>4. æ‹–æ‹½åŠŸèƒ½å®ç°</h2><h3 id="4-1-æ‹–æ‹½åŠŸèƒ½ç®€ä»‹"><a href="#4-1-æ‹–æ‹½åŠŸèƒ½ç®€ä»‹" class="headerlink" title="4.1 æ‹–æ‹½åŠŸèƒ½ç®€ä»‹"></a>4.1 æ‹–æ‹½åŠŸèƒ½ç®€ä»‹</h3><p>æ‹–æ”¾æ“ä½œéå¸¸ç®€å•ï¼Œåªéœ€è¦å°†è¦ä¼ è¾“çš„æ•°æ®è¡¨ç¤ºä¸ºä¸€ä¸ª <code>Transferable</code> å¯¹è±¡ã€‚å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œå¦‚ <code>String</code>ã€<code>Int</code>ã€<code>Data</code> ç­‰ï¼Œéƒ½å®ç°äº† <code>Transferable</code>åè®®ã€‚</p>
<p>è¦ä½¿ä¸€ä¸ªè§†å›¾æˆä¸ºæ‹–åŠ¨çš„å‘èµ·è€…ï¼Œåªéœ€åº”ç”¨ <code>draggable(Transferable)</code> ä¿®é¥°ç¬¦å³å¯ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">Text</span>(<span class="string">&quot;ğŸ˜Š&quot;</span>).draggable(<span class="string">&quot;ğŸ˜Š&quot;</span>) <span class="comment">// emoji æ˜¯ä¸€ä¸ª String</span></span><br></pre></td></tr></table></figure>

<p>å½“ç”¨æˆ·æŒ‰ä½å¹¶æ‹–åŠ¨æ—¶ï¼Œæ•´ä¸ªæ–‡æœ¬ä¼šå¼€å§‹æ‹–åŠ¨ã€‚è¢«æ‹–åŠ¨çš„æ•°æ®ï¼ˆå³ <strong>Transferable</strong> å¯¹è±¡ï¼‰å°†æ˜¯è¿™ä¸ª emoji å­—ç¬¦ä¸²ã€‚</p>
<h3 id="4-2-Transferable-åè®®"><a href="#4-2-Transferable-åè®®" class="headerlink" title="4.2 Transferable åè®®"></a>4.2 Transferable åè®®</h3><p>ä¸€ä¸ªè§†å›¾å¯ä»¥è¢«æ”¾ç½®åœ¨å…·æœ‰ <code>dropDestination</code> ä¿®é¥°ç¬¦çš„ç›®æ ‡ä¸Šã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> highlighted <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line"><span class="type">Rectangle</span>()</span><br><span class="line">    .stroke(lineWidth: highlighted <span class="operator">?</span> <span class="number">5</span> : <span class="number">1</span>)</span><br><span class="line">    .dropDestination(for: <span class="type">String</span>.<span class="keyword">self</span>) &#123; [<span class="type">String</span>, <span class="type">CGPoint</span>] <span class="keyword">in</span></span><br><span class="line">        <span class="comment">// å¤„ç†è¢«æ”¾ç½®åœ¨ Rectangle ä¸­çš„å­—ç¬¦ä¸²å’Œ CGPoint</span></span><br><span class="line">    &#125; isTargeted: &#123; isTargeted: <span class="type">Bool</span> <span class="keyword">in</span></span><br><span class="line">        <span class="comment">// é«˜äº®æˆ–å…¶ä»–æ–¹å¼æŒ‡ç¤ºæœ‰ä¸œè¥¿å¯ä»¥æ”¾ç½®</span></span><br><span class="line">        highlighted <span class="operator">=</span> isTargeted</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>é—æ†¾çš„æ˜¯ï¼Œæ¯ä¸ªè§†å›¾åªèƒ½æœ‰ä¸€ä¸ª <code>dropDestination</code>ã€‚å› æ­¤ï¼Œå¦‚æœå¸Œæœ›åœ¨åŒä¸€è§†å›¾ä¸Šæ”¾ç½® <code>String</code> å’Œ <code>Int</code>ï¼Œæ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ <code>Transferable</code>ã€‚æ¥ä¸‹æ¥ï¼Œåœ¨æ¼”ç¤ºä¸­å…·ä½“è¯´æ˜è¿™ä¸ªè¿‡ç¨‹ã€‚</p>
<h3 id="4-3-Demo-å®ç°å›¾ç‰‡æ‹–æ‹½"><a href="#4-3-Demo-å®ç°å›¾ç‰‡æ‹–æ‹½" class="headerlink" title="4.3 Demo-å®ç°å›¾ç‰‡æ‹–æ‹½"></a>4.3 Demo-å®ç°å›¾ç‰‡æ‹–æ‹½</h3><p>ç°åœ¨å®ç°ä»ç½‘é¡µä¸­æ‹–æ‹½å›¾ç‰‡ä½œä¸ºå½“å‰èƒŒæ™¯å›¾ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiArtDocumentView.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiArtDocumentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> documentBody: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">GeometryReader</span> &#123; geometry <span class="keyword">in</span></span><br><span class="line">            <span class="type">ZStack</span> &#123;</span><br><span class="line">                <span class="comment">//å¸Œæœ› å›¾ç‰‡ä¸¤è¾¹æ˜¯ç™½è‰²çš„ï¼ˆæœ€åº•å±‚ä¸ºç™½è‰²ï¼‰</span></span><br><span class="line">                <span class="type">Color</span>.white</span><br><span class="line">                <span class="type">AsyncImage</span>(url: document.background)</span><br><span class="line">                    .position(<span class="type">Emoji</span>.<span class="type">Position</span>.zero.in(geometry))</span><br><span class="line">                <span class="type">ForEach</span>(document.emojis) &#123; emoji <span class="keyword">in</span></span><br><span class="line">                    <span class="type">Text</span>(emoji.string)</span><br><span class="line">                        .font(emoji.font)</span><br><span class="line">                        .position(emoji.position.in(geometry))</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            .dropDestination(for:<span class="type">URL</span>.<span class="keyword">self</span>) &#123; urls,location <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">return</span> drop(urls,at:location, in: geometry)</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">func</span> <span class="title function_">drop</span>(<span class="keyword">_</span> <span class="params">urls</span>:[<span class="type">URL</span>], <span class="params">at</span> <span class="params">location</span>:<span class="type">CGPoint</span>, <span class="params">in</span> <span class="params">geomery</span>: <span class="type">GeometryProxy</span>) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> url <span class="operator">=</span> urls.first &#123;</span><br><span class="line">            document.setBackground(url)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥å®ç°å¤–éƒ¨å›¾ç‰‡çš„æ‹–æ‹½ï¼Œä½†æ˜¯ä¸èƒ½åŒæ—¶å®ç° URL å’Œ String çš„æ‹–æ‹½ï¼Œå³ä¸èƒ½å†æ·»åŠ ä¸€ä¸ª <code>dropDestination</code>ã€‚</p>
<h3 id="4-4-å®ç°è¡¨æƒ…å’Œå›¾ç‰‡æ‹–æ‹½"><a href="#4-4-å®ç°è¡¨æƒ…å’Œå›¾ç‰‡æ‹–æ‹½" class="headerlink" title="4.4 å®ç°è¡¨æƒ…å’Œå›¾ç‰‡æ‹–æ‹½"></a>4.4 å®ç°è¡¨æƒ…å’Œå›¾ç‰‡æ‹–æ‹½</h3><p>æˆ‘ä»¬å°†è¯¾ç¨‹æºä»£ç ä¸­çš„ <code>Sturldata.swift</code> æ–‡ä»¶æ‹–æ‹½åˆ°å½“å‰é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ï¼Œå¹¶åœ¨ View ä¸­å®šä¹‰æ‹–æ‹½çš„å›è°ƒé€»è¾‘ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  EmojiArtDocumentView.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EmojiArtDocumentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> documentBody: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">GeometryReader</span> &#123; geometry <span class="keyword">in</span></span><br><span class="line">            <span class="type">ZStack</span> &#123;</span><br><span class="line">                <span class="comment">//å¸Œæœ› å›¾ç‰‡ä¸¤è¾¹æ˜¯ç™½è‰²çš„ï¼ˆæœ€åº•å±‚ä¸ºç™½è‰²ï¼‰</span></span><br><span class="line">                <span class="type">Color</span>.white</span><br><span class="line">                <span class="type">AsyncImage</span>(url: document.background)</span><br><span class="line">                    .position(<span class="type">Emoji</span>.<span class="type">Position</span>.zero.in(geometry))</span><br><span class="line">                <span class="type">ForEach</span>(document.emojis) &#123; emoji <span class="keyword">in</span></span><br><span class="line">                    <span class="type">Text</span>(emoji.string)</span><br><span class="line">                        .font(emoji.font)</span><br><span class="line">                        .position(emoji.position.in(geometry))</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            .dropDestination(for:<span class="type">Sturldata</span>.<span class="keyword">self</span>) &#123; sturldatas,location <span class="keyword">in</span></span><br><span class="line">                <span class="keyword">return</span> drop(sturldatas,at:location, in: geometry)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">func</span> <span class="title function_">drop</span>(<span class="keyword">_</span> <span class="params">sturldatas</span>:[<span class="type">Sturldata</span>], <span class="params">at</span> <span class="params">location</span>:<span class="type">CGPoint</span>, <span class="params">in</span> <span class="params">geometry</span>: <span class="type">GeometryProxy</span>) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> sturldata <span class="keyword">in</span> sturldatas &#123;</span><br><span class="line">            <span class="keyword">switch</span> sturldata &#123;</span><br><span class="line">            <span class="keyword">case</span> .url(<span class="keyword">let</span> url):</span><br><span class="line">                document.setBackground(url)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">            <span class="keyword">case</span> .string(<span class="keyword">let</span> emoji):</span><br><span class="line">                document.addEmoji(</span><br><span class="line">                    emoji,</span><br><span class="line">                    at:emojiPosition(at: location, in: geometry),</span><br><span class="line">                    size:paletteEmojiSize</span><br><span class="line">                )</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">func</span> <span class="title function_">emojiPosition</span>(<span class="params">at</span> <span class="params">location</span>: <span class="type">CGPoint</span>, <span class="params">in</span> <span class="params">geometry</span>: <span class="type">GeometryProxy</span>) -&gt; <span class="type">Emoji</span>.<span class="type">Position</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> center <span class="operator">=</span> geometry.frame(in: .local).center</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Emoji</span>.<span class="type">Position</span>(</span><br><span class="line">            x: <span class="type">Int</span>(location.x <span class="operator">-</span> center.x),</span><br><span class="line">            y: <span class="type">Int</span>(<span class="operator">-</span>(location.y <span class="operator">-</span> center.y))</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="operator">...</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶ï¼Œå·²ç»å¯ä»¥å®ç° URL å’Œ String çš„åŒæ—¶æ‹–æ‹½ã€‚</p>
]]></content>
      <categories>
        <category>code</category>
        <category>swift</category>
      </categories>
      <tags>
        <tag>cs193p</tag>
      </tags>
  </entry>
</search>
